# $Id$

PortSystem 1.0
name             coreutils
version          5.97
categories       sysutils
maintainers      toby@opendarwin.org
description      GNU File, Shell, and Text utilities
long_description \
    The GNU Core Utilities are the basic file, shell, and text manipulation \
    utilities of the GNU operating system. These are the core utilities which \
    are expected to exist on every operating system. Previously these \
    utilities were offered as three individual sets of GNU utilities, \
    fileutils, shellutils, and textutils. Those three have been combined into \
    a single set of utilities called the coreutils.
homepage         http://www.gnu.org/software/coreutils/
platforms        darwin

master_sites     gnu
use_bzip2        yes
checksums        md5 1537379b6264a1def443713988a78020 \
                 sha1 6a5cf0b15433569af0de9a7bc3f4ef281d876b31 \
                 rmd160 96750ad46f0ae1d4af3c714076b5c384a2b901a9

configure.args   --program-prefix=g \
                 --infodir=${prefix}/share/info \
                 --mandir=${prefix}/share/man \
                 --disable-nls

# Set the RUN_EXPENSIVE_TESTS environmental variable to 'yes' to run
# the really expensive tests.
test.run        yes
test.target     check

post-destroot {
	file delete -force ${destroot}${prefix}/share/info/dir
	file delete -force ${destroot}${prefix}/lib/charset.alias
}

post-destroot {
	if {[variant_isset normal_install_names]} {
		system "cd ${destroot}${prefix}/bin && for f in g*; do ln -s \$f `echo \$f | sed -e 's/^g//'`; done"
	}
}

variant normal_install_names {
}
