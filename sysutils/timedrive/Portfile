# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           python26 1.0

name                timedrive
version             0.3.0
categories          sysutils net
maintainers         snc
description         incremental backup across networks
long_description    Time Drive is a front-end utility for duplicity. It makes \
                    backup to an external file server easy and efficient. Time \
                    Drive supports WebDAV, secure WebDAV, FTP, SSH, and SCP. \
                    It can also be configured to work with Samba.

homepage            http://www.oak-tree.us/blog/index.php/science-and-technology/time-drive

platforms           darwin
depends_build-append \
                    port:py26-pyqt4 \
                    port:py26-sip \
                    port:py26-setuptools
depends_lib-append  port:duplicity
depends_run-append  port:ncftp
#                    port:sshfs

master_sites        http://www.oak-tree.us/stuff/
distname            Time-Drive-${version}
use_zip             yes

checksums           md5     e58a25601d201b7ce3666d955f21f040 \
                    sha1    a39baddc576f7b0269c163c5467062da54aa2dc9 \
                    rmd160  2b6d599a918cc37ae884f6a58ed4780e3995c03f

worksrcdir          [string tolower ${worksrcdir}]

#patch {
#    reinplace s|pyrcc4|pyrcc4-2.6|g ${worksrcpath}/BuildUi.sh
#    reinplace s|pyuic4|pyuic4-2.6|g ${worksrcpath}/BuildUi.sh
#    file attributes ${worksrcpath}/BuildUi.sh -permissions +x
#    file copy ${filespath}/setup.py ${worksrcpath}/
#    reinplace s|backends|backend|g ${worksrcpath}/duplicity_interface.py
#}

#pre-build {
#    system "cd ${worksrcpath} && ./BuildUi.sh"
#}

livecheck.type      regex
livecheck.url       ${homepage}
livecheck.regex     Time Drive \\((\\d+\\.\\d+\\.\\d+)\\)
