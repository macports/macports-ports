# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           golang 1.0

go.setup            github.com/coreos/butane 0.14.0 v
revision            0
categories          sysutils
maintainers         {bgilbert @bgilbert} openmaintainer
license             Apache-2
homepage            https://coreos.github.io/butane/

description         Butane translates Butane Configs into Ignition Configs.

long_description    Butane translates human-readable Butane Configs into \
                    machine-readable Ignition Configs for provisioning \
                    operating systems that use Ignition, such as Fedora CoreOS.

checksums           ${distname}${extract.suffix} \
                        rmd160  25367cd74fd228065736b781e6d12b38097f8669 \
                        sha256  c7d15c695adb35cbab931b7d71e45797157dec9a1d581e1fdcafe7da2b7dc2f6 \
                        size    461461

go.vendors          gopkg.in/yaml.v3 \
                        lock    496545a6307b \
                        rmd160  16a43936d8ae6243895e23465132977d3a1193c2 \
                        sha256  333e78b3b9cb73b3572d62f692d32426a8554b86c93025ea032f779395869e84 \
                        size    90145 \
                    gopkg.in/yaml.v2 \
                        lock    v2.2.2 \
                        rmd160  03aea7b7e847179b29044d5a928b9f8a889fe87b \
                        sha256  da1e31b7beb9a6907947caa794134bdc2501d1a3474568b61cc2562a398d3d87 \
                        size    70676 \
                    gopkg.in/check.v1 \
                        lock    41f04d3bba15 \
                        rmd160  1e5543a8e6a3159296ee63e28cbde9931a04f6b3 \
                        sha256  c41575a73d10809f89b05ef9e783f2d53facdc6573697770d30efb05a9d2dc28 \
                        size    31612 \
                    github.com/vincent-petithory/dataurl \
                        lock    v1.0.0 \
                        rmd160  7ca9265612cfb9e6dde563d74e06fca9b188a3e2 \
                        sha256  4aae6cb73f46068289c415beaf5529c0212cf12b8cd7d3776548733eccb35f6a \
                        size    11594 \
                    github.com/stretchr/testify \
                        lock    v1.7.0 \
                        rmd160  adae5096e8c4cfcc8e3f6d096646d1165b5ef49a \
                        sha256  f7dde97d0c9634483ae6ea273968f80f3105c22382a1f841886cd20d57586642 \
                        size    91096 \
                    github.com/spf13/pflag \
                        lock    d5e0c0615ace \
                        rmd160  4b273c282a0c56fd46234cc1bba3df93b9b93272 \
                        sha256  fea60733b1b022287b547bcd287de9987871f0c0e9cc54340efa890d48fa5be5 \
                        size    52045 \
                    github.com/pmezard/go-difflib \
                        lock    v1.0.0 \
                        rmd160  fc879bfbdef9e3ff50844def58404e2b5a613ab8 \
                        sha256  7cd492737641847266115f3060489a67f63581e521a8ec51efbc280c33fc991f \
                        size    11409 \
                    github.com/kr/text \
                        lock    v0.1.0 \
                        rmd160  0b3c78459e227170a3b80a0103d87a3eef77ed88 \
                        sha256  5ed970aad0da3cba3cffacdb4d154a162a8968655ee6d6f7b627e71b869efaf6 \
                        size    8691 \
                    github.com/kr/pretty \
                        lock    v0.1.0 \
                        rmd160  9aa7a5aad4c48840eecfd0f80186d1fb5ded0fd6 \
                        sha256  f6c3f89667c63e5b7f1fc6ee2c06b6a6bfdce88f3a965ccd395b64c6f95c9a47 \
                        size    8553 \
                    github.com/davecgh/go-spew \
                        lock    v1.1.1 \
                        rmd160  7c02883aa81f81aca14e13a27fdca9e7fbc136f7 \
                        sha256  e85d6afa83e64962e0d63dd4812971eccf2b9b5445eda93f46a4406f0c177d5f \
                        size    42171 \
                    github.com/coreos/vcontext \
                        lock    f1dbbca7bef4 \
                        rmd160  21d8b0ec2edad0bee827abb2f1efe2054bbba1d0 \
                        sha256  bc28bb9b1a954a01175191f321dcbd1eb4f5318c6487a46f4ef2da1778da3e3f \
                        size    16006 \
                    github.com/coreos/ignition \
                        lock    v2.13.0 \
                        rmd160  d6749833ac0c35e8545625700829960407ca2c90 \
                        sha256  4c6d72153d1992bf9259498a5c44a2f7c9ebd1d241fb7f50f99705273f708107 \
                        size    4260909 \
                    github.com/coreos/go-systemd \
                        lock    v22.0.0 \
                        rmd160  5aeb2f14fd6b7bcfa8450585792c1461897361f5 \
                        sha256  e661b735a1d59542d0127f257561374bbf47fde876027596bedc4493750db905 \
                        size    67898 \
                    github.com/coreos/go-semver \
                        lock    v0.3.0 \
                        rmd160  c4586d02e1c2747dbc72aab4bc10e0cc32703b03 \
                        sha256  1bbfd8b72c657327bc3d347ca26567d3de99452354eb999695f5ecb3db8ec1fa \
                        size    10670 \
                    github.com/coreos/go-json \
                        lock    c63f628265de \
                        rmd160  00a3db9cc3af6f416f7a32ecdeda4e79b5068f21 \
                        sha256  9e53cdf5a4d16b9922d494088193a5ba9d36c0ed2b7471a2c087f44a0d17667d \
                        size    190377 \
                    github.com/clarketm/json \
                        lock    v1.14.1 \
                        rmd160  dc411d043196e11ef06560b1b5a791d058520b3f \
                        sha256  a5e4cd06e4ba38669a946cfe6475f08a2caf9e4309fcdaf43ac75618772173c6 \
                        size    186896

build.args          -o ${name} \
                    -ldflags -X\\ github.com/coreos/butane/internal/version.Raw=${version} \
                    internal/main.go

destroot {
    set docdir ${prefix}/share/doc/${subport}
    xinstall -m 0755 ${worksrcpath}/${name} ${destroot}${prefix}/bin
    xinstall -d ${destroot}${docdir}
    xinstall -m 0644 \
        ${worksrcpath}/LICENSE \
        ${worksrcpath}/NEWS \
        ${worksrcpath}/README.md \
        ${destroot}${docdir}
    xinstall -d ${destroot}${docdir}/docs
    xinstall -m 0644 \
        {*}[glob ${worksrcpath}/docs/*.md] \
        ${destroot}${docdir}/docs
}
