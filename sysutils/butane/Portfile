# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           golang 1.0

go.setup            github.com/coreos/butane 0.13.0 v
revision            0
categories          sysutils
maintainers         {bgilbert @bgilbert} openmaintainer
license             Apache-2
homepage            https://coreos.github.io/butane/

description         Butane translates Butane Configs into Ignition Configs.

long_description    Butane translates human-readable Butane Configs into \
                    machine-readable Ignition Configs for provisioning \
                    operating systems that use Ignition, such as Fedora CoreOS.

checksums           ${distname}${extract.suffix} \
                        rmd160  1ba7c071165671c34da246c333e688872f1a1658 \
                        sha256  6543c76d46adbfc48ed8afcbaf19a0b9f827fb9e401990c10e870ef710f93dd1 \
                        size    493858

go.vendors          gopkg.in/yaml.v3 \
                        lock    fc94e3f71652 \
                        rmd160  795413c42c3e23e392b013a38d943c0c294c3dc7 \
                        sha256  8ab9ec0e6380efde355f472b696f1c048bb89a6b14ba9ae3dabf0c3b4a1b6d81 \
                        size    85343 \
                    gopkg.in/yaml.v2 \
                        lock    v2.2.2 \
                        rmd160  03aea7b7e847179b29044d5a928b9f8a889fe87b \
                        sha256  da1e31b7beb9a6907947caa794134bdc2501d1a3474568b61cc2562a398d3d87 \
                        size    70676 \
                    gopkg.in/check.v1 \
                        lock    41f04d3bba15 \
                        rmd160  1e5543a8e6a3159296ee63e28cbde9931a04f6b3 \
                        sha256  c41575a73d10809f89b05ef9e783f2d53facdc6573697770d30efb05a9d2dc28 \
                        size    31612 \
                    github.com/vincent-petithory/dataurl \
                        lock    9a301d65acbb \
                        rmd160  ba36f080f12e8ceebbf76a1d9907a687ea9ffaa8 \
                        sha256  261eba03f8aec2b3cedb8cc0de83e3c05b997215dd47368f905ae662dde5b0f9 \
                        size    11526 \
                    github.com/stretchr/testify \
                        lock    v1.5.1 \
                        rmd160  db9d43c3c804950ce9650d830f7dea5434ed83c1 \
                        sha256  e5f566d1c23fb2b987f8a9f139e32866c1eea8c72051da25bbf6880a4f8c541a \
                        size    78702 \
                    github.com/spf13/pflag \
                        lock    v1.0.5 \
                        rmd160  2ce81608a38c6f383a35bccd24d64361df5828c9 \
                        sha256  7f41acdcba65b1fab5b9b633947a139f9915b60f94bdab486cdbe9d90c54f61e \
                        size    50815 \
                    github.com/pmezard/go-difflib \
                        lock    v1.0.0 \
                        rmd160  fc879bfbdef9e3ff50844def58404e2b5a613ab8 \
                        sha256  7cd492737641847266115f3060489a67f63581e521a8ec51efbc280c33fc991f \
                        size    11409 \
                    github.com/kr/text \
                        lock    v0.1.0 \
                        rmd160  0b3c78459e227170a3b80a0103d87a3eef77ed88 \
                        sha256  5ed970aad0da3cba3cffacdb4d154a162a8968655ee6d6f7b627e71b869efaf6 \
                        size    8691 \
                    github.com/kr/pretty \
                        lock    v0.1.0 \
                        rmd160  9aa7a5aad4c48840eecfd0f80186d1fb5ded0fd6 \
                        sha256  f6c3f89667c63e5b7f1fc6ee2c06b6a6bfdce88f3a965ccd395b64c6f95c9a47 \
                        size    8553 \
                    github.com/davecgh/go-spew \
                        lock    v1.1.1 \
                        rmd160  7c02883aa81f81aca14e13a27fdca9e7fbc136f7 \
                        sha256  e85d6afa83e64962e0d63dd4812971eccf2b9b5445eda93f46a4406f0c177d5f \
                        size    42171 \
                    github.com/coreos/vcontext \
                        lock    4ee6c745c8bd \
                        rmd160  5bc66930fb3bdd3cf02c42ca9f06a2f4731d0e9e \
                        sha256  539dee6be07d7f03c43baff893269c08cdb8938c0db3b6c58fff1e9d618bfe27 \
                        size    15885 \
                    github.com/coreos/ignition \
                        lock    v2.11.0 \
                        rmd160  7d85321a52d21d6331b17bdfc794815d9acf2ffc \
                        sha256  7d0a0c80165d37fb595d3e89c21e62b32e8f74bc39064a27a09017c0e9656cf7 \
                        size    4248161 \
                    github.com/coreos/go-systemd \
                        lock    v22.0.0 \
                        rmd160  5aeb2f14fd6b7bcfa8450585792c1461897361f5 \
                        sha256  e661b735a1d59542d0127f257561374bbf47fde876027596bedc4493750db905 \
                        size    67898 \
                    github.com/coreos/go-semver \
                        lock    v0.3.0 \
                        rmd160  c4586d02e1c2747dbc72aab4bc10e0cc32703b03 \
                        sha256  1bbfd8b72c657327bc3d347ca26567d3de99452354eb999695f5ecb3db8ec1fa \
                        size    10670 \
                    github.com/coreos/go-json \
                        lock    6a2fe990e083 \
                        rmd160  0ef6354920637871f1acf0bc62547e868ac06947 \
                        sha256  e7b40b7ac8eb60f5ebb2f52e0d8f2c1f0b59a59632493b656de707ce759cc87e \
                        size    169207 \
                    github.com/clarketm/json \
                        lock    v1.14.1 \
                        rmd160  dc411d043196e11ef06560b1b5a791d058520b3f \
                        sha256  a5e4cd06e4ba38669a946cfe6475f08a2caf9e4309fcdaf43ac75618772173c6 \
                        size    186896

build.args          -o ${name} \
                    -ldflags -X\\ github.com/coreos/butane/internal/version.Raw=${version} \
                    internal/main.go

destroot {
    set docdir ${prefix}/share/doc/${subport}
    xinstall -m 0755 ${worksrcpath}/${name} ${destroot}${prefix}/bin
    xinstall -d ${destroot}${docdir}
    xinstall -m 0644 \
        ${worksrcpath}/LICENSE \
        ${worksrcpath}/NEWS \
        ${worksrcpath}/README.md \
        ${destroot}${docdir}
    xinstall -d ${destroot}${docdir}/docs
    xinstall -m 0644 \
        {*}[glob ${worksrcpath}/docs/*.md] \
        ${destroot}${docdir}/docs
}
