# $Id: Portfile,v 1.7 2004/04/10 19:46:58 landonf Exp $

PortSystem 1.0
name			dpkg
version			1.10.20
platforms		darwin
categories		sysutils archivers
maintainers		landonf@opendarwin.org
description		Debian package maintenance system
homepage		http://www.debian.org/

master_sites		http://ftp.debian.org/debian/pool/main/d/dpkg/
checksums		md5 897ba0669fad834b9fb8d0e10408a4df

distname		${portname}_${portversion}
worksrcdir		${portname}-${portversion}

patchfiles		patch-config.h.in \
			patch-configure \
			patch-configure.in \
			patch-lib_utils.c

configure.args		--with-included-gettext --without-sgml-doc

post-patch {
	set scripts ${worksrcpath}/scripts
	reinplace s|/etc/dpkg/|${prefix}/etc/dpkg/| \
			${scripts}/dpkg-shlibdeps.pl \
			${scripts}/dpkg-source.1

	reinplace s|/etc/|${prefix}/etc/| \
			${scripts}/update-alternatives.8

	reinplace s|/etc/alternatives|${prefix}/etc/alternatives|g \
			${scripts}/update-alternatives.pl
}

pre-destroot {
	file mkdir ${destroot}${prefix}/share/doc/dpkg
}

variant darwin {
	patchfiles-append patch-utils_start-stop-daemon.c
}

