# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0
PortGroup           cargo 1.0

github.setup        sharkdp fd 7.0.0 v
categories          sysutils
platforms           darwin
maintainers         {raimue @raimue} \
                    openmaintainer
license             {MIT Apache-2}

description         simple, fast and user-friendly alternative to find
long_description    fd is a simple, fast and user-friendly alternative to find. \
                    While it does not seek to mirror all of find's powerful \
                    functionality, it provides sensible (opinionated) defaults \
                    for 80% of the use cases.

checksums           fd-${version}.tar.gz \
                    rmd160  5e44970aeef6b6b84b4f7975caef6a20a6bb8d31 \
                    sha256  e6ba21e66a295b9fb69bfc9a361813b3c7d73b8d29dc819d37d21af750814ee9 \
                    size    49655

cargo.crates \
    aho-corasick                     0.6.4  d6531d44de723825aa81398a6415283229725a00fa30713812ab9323faa82fc4 \
    ansi_term                       0.11.0  ee49baf6cb617b853aa8d93bf420db2383fab46d314482ca2803b40d5fde979b \
    atty                             0.2.8  af80143d6f7608d746df1520709e5d141c96f240b0e62b0aa41bdfb53374d9d4 \
    bitflags                         1.0.1  b3c30d3802dfb7281680d6285f2ccdaa8c2d8fee41f93805dba5c4cf50dc23cf \
    bitflags                         0.9.1  4efd02e230a02e18f92fc2735f44597385ed02ad8f831e7c1c1156ee5e1ab3a5 \
    cfg-if                           0.1.2  d4c819a1287eb618df47cc647173c5c4c66ba19d888a6e50d605672aed3140de \
    clap                            2.31.1  5dc18f6f4005132120d9711636b32c46a233fad94df6217fa1d81c5e97a9f200 \
    crossbeam                        0.3.2  24ce9782d4d5c53674646a6a4c1863a21a8fc0cb649b3c94dfc16e45071dea19 \
    ctrlc                            3.1.0  653abc99aa905f693d89df4797fadc08085baee379db92be9f2496cefe8a6f2c \
    diff                            0.1.11  3c2b69f912779fbb121ceb775d74d51e915af17aaebc38d28a592843a2dd0a3a \
    fnv                              1.0.6  2fad85553e09a6f881f739c29f0b00b0f01357c743266d478b68951ce23285f3 \
    fuchsia-zircon                   0.3.3  2e9763c69ebaae630ba35f74888db465e49e259ba1bc0eda7d06f4a067615d82 \
    fuchsia-zircon-sys               0.3.3  3dcaa9ae7725d12cdb85b3ad99a434db70b468c09ded17e012d86b5c1010f7a7 \
    globset                          0.3.0  1e96ab92362c06811385ae9a34d2698e8a1160745e0c78fbb434a44c8de3fabc \
    ignore                           0.4.1  245bea0ba52531a3739cb8ba99f8689eda13d7faf8c36b6a73ce4421aab42588 \
    kernel32-sys                     0.2.2  7507624b29483431c0ba2d82aece8ca6cdba9382bff4ddd0f7490560c056098d \
    lazy_static                      1.0.0  c8f31047daa365f19be14b47c29df4f7c3b581832407daabe6ae77397619237d \
    libc                            0.2.39  f54263ad99207254cf58b5f701ecb432c717445ea2ee8af387334bdd1a03fdff \
    log                              0.4.1  89f010e843f2b1a31dbd316b3b8d443758bc634bed37aabade59c686d644e0a2 \
    memchr                           2.0.1  796fba70e76612589ed2ce7f45282f5af869e0fdd7cc6199fa1aa1f1d591ba9d \
    nix                              0.9.0  a2c5afeb0198ec7be8569d666644b574345aad2e95a53baf3a532da3e0f3fb32 \
    num_cpus                         1.8.0  c51a3322e4bca9d212ad9a158a02abc6934d005490c054a2778df73a70aa0a30 \
    rand                             0.4.2  eba5f8cb59cc50ed56be8880a5c7b496bfd9bd26394e176bc67884094145c2c5 \
    redox_syscall                   0.1.37  0d92eecebad22b767915e4d529f89f28ee96dbbf5a4810d2b844373f136417fd \
    redox_termios                    0.1.1  7e891cfe48e9100a70a3b6eb652fef28920c117d366339687bd5576160db0f76 \
    regex                            0.2.8  0a33e44e4f5dbeb5619910f68b874d85b01e15f86fa7bb0fbc41bbd148883a48 \
    regex-syntax                     0.5.2  d8337992c33b62cf49462a1ce4d0eedbb021f48de017e40ec307cca445df0ca9 \
    remove_dir_all                   0.3.0  b5d2f806b0fcdabd98acd380dc8daef485e22bcb7cddc811d1337967f2528cf5 \
    same-file                        1.0.2  cfb6eded0b06a0b512c8ddbcf04089138c9b4362c2f696f3c3d76039d68f3637 \
    strsim                           0.7.0  bb4f380125926a99e52bc279241539c018323fab05ad6368b56f93d9369ff550 \
    tempdir                          0.3.6  f73eebdb68c14bcb24aef74ea96079830e7fa7b31a6106e42ea7ee887c1e134e \
    term_size                        0.3.1  9e5b9a66db815dcfd2da92db471106457082577c3c278d4138ab3e3b4e189327 \
    termion                          1.5.1  689a3bdfaab439fd92bc87df5c4c78417d3cbe537487274e9b0b2dce76e92096 \
    textwrap                         0.9.0  c0b59b6b4b44d867f1370ef1bd91bfb262bf07bf0ae65c202ea2fbc16153b693 \
    thread_local                     0.3.5  279ef31c19ededf577bfd12dfae728040a21f635b06a24cd670ff510edd38963 \
    ucd-util                         0.1.1  fd2be2d6639d0f8fe6cdda291ad456e23629558d466e2789d2c3e9892bda285d \
    unicode-width                    0.1.4  bf3a113775714a22dcb774d8ea3655c53a32debae63a063acc00a91cc586245f \
    unreachable                      1.0.0  382810877fe448991dfc7f0dd6e3ae5d58088fd0ea5e35189655f84e6814fa56 \
    utf8-ranges                      1.0.0  662fab6525a98beff2921d7f61a39e7d59e0b425ebc7d0d9e66d316e55124122 \
    vec_map                          0.8.0  887b5b631c2ad01628bbbaa7dd4c869f80d3186688f8d0b6f58774fbe324988c \
    version_check                    0.1.3  6b772017e347561807c1aa192438c5fd74242a670a6cffacc40f2defd1dc069d \
    void                             1.0.2  6a02e4885ed3bc0f2de90ea6dd45ebcbb66dacffe03547fadbb0eeae2770887d \
    walkdir                          2.1.4  63636bd0eb3d00ccb8b9036381b526efac53caf112b7783b730ab3f8e44da369 \
    winapi                           0.3.4  04e3bd221fcbe8a271359c04f21a76db7d0c6028862d1bb5512d85e1e2eb5bb3 \
    winapi                           0.2.8  167dc9d6949a9b857f3451275e911c3f44255842c1f7a76f33c55103a909087a \
    winapi-build                     0.1.1  2d315eee3b34aca4797b2da6b13ed88266e6d612562a0c46390af8299fc699bc \
    winapi-i686-pc-windows-gnu       0.4.0  ac3b87c63620426dd9b991e5ce0329eff545bccbbb34f3be09ff6fb6ab51b7b6 \
    winapi-x86_64-pc-windows-gnu     0.4.0  712e227841d057c1ee1cd2fb22fa7e5a5461ae8e48fa2ca79ec42cfc1931183f


pre-build {
    file mkdir ${worksrcpath}/shell_completions
}

build.env-append    SHELL_COMPLETIONS_DIR="shell_completions"

destroot {
    xinstall -m 755 ${worksrcpath}/target/[cargo.rust_platform]/release/${name} ${destroot}${prefix}/bin/
    xinstall -m 444 ${worksrcpath}/doc/${name}.1 ${destroot}${prefix}/share/man/man1/

    xinstall -d ${destroot}${prefix}/share/doc/${name}
    xinstall -m 644 -W ${worksrcpath} \
        README.md LICENSE-MIT LICENSE-APACHE \
        ${destroot}${prefix}/share/doc/${name}

    xinstall -d ${destroot}${prefix}/share/bash-completion/completions
	xinstall -m 644 ${worksrcpath}/shell_completions/fd.bash \
        ${destroot}${prefix}/share/bash-completion/completions/fd
    xinstall -d ${destroot}${prefix}/share/zsh/site-functions
	xinstall -m 644 ${worksrcpath}/shell_completions/_fd \
        ${destroot}${prefix}/share/zsh/site-functions/_fd
    xinstall -d ${destroot}${prefix}/share/fish/completions
    xinstall -m 644 ${worksrcpath}/shell_completions/fd.fish \
        ${destroot}${prefix}/share/fish/completions/fd.fish
}
