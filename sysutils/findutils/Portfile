# $Id$

PortSystem      1.0

name            findutils
version         4.3.7
categories      sysutils
platforms       darwin
maintainers     nox
description     findutils contains GNU find, xargs, and locate

long_description \
    ${description}

homepage        http://www.gnu.org/software/findutils/
master_sites    http://alpha.gnu.org/gnu/${name} \
                ftp://alpha.gnu.org/gnu/${name}

checksums       md5 4f30c3af6848e31ca767490cc628613e \
                sha1 1bba2db2af97bf0e6aa54c2f5e3f4096ed70b2f5 \
                rmd160 83492bd517e39d5fe5d4c6d3739dcb7074dc5ef4


configure.env   SORT=/usr/bin/sort

configure.args  --mandir=${prefix}/share/man \
                --infodir=${prefix}/share/info \
                --program-prefix=g \
                --disable-nls

post-destroot {
    file rename ${destroot}${prefix}/share/info/find.info ${destroot}${prefix}/share/info/gfind.info
    delete ${destroot}${prefix}/lib/charset.alias
    if {[variant_isset with_default_names]} {
        foreach d {bin libexec share/info share/man/man1 share/man/man5} {
            cd ${destroot}${prefix}/$d
            foreach a [glob g*] {
                regexp g(.+) $a dummy b
                file link -hard $b g$b
            }
        }
    }
}

test.run        yes
test.target     check

variant nls {
    configure.args-delete   --disable-nls
    depends_lib-append      port:gettext
}

variant with_default_names {}

# livecheck disabled for the time being
livecheck.check   none
# livecheck.check regex
# livecheck.url   http://ftp.gnu.org/gnu/${name}/?C=M&O=D
# livecheck.regex ${name}-(\\d+\\.\\d+\\.\\d+)
