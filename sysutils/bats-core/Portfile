# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem      1.0
PortGroup       github 1.0

github.setup    bats-core bats-core 1.13.0 v
revision        0
categories      sysutils
platforms       any
supported_archs noarch
license         MIT
maintainers     nomaintainer
description     Bash Automated Testing System
long_description \
    Bats is a TAP-compliant testing framework for Bash. It provides a simple way to \
    verify that the UNIX programs you write behave as expected.

github.tarball_from archive

checksums       rmd160  ef1ce0fd2f14396ec5d46b4503537ee4e1221097 \
                sha256  a85e12b8828271a152b338ca8109aa23493b57950987c8e6dff97ba492772ff3 \
                size    178709

patchfiles      patch-libexec-bats.diff \
                patch-test-timeout.diff

depends_run     port:bash \
                port:parallel

use_configure   no
build           {}

# test from bats-core github action
# depends_test            port:parallel
test.cmd                ./bin/bats
test.pre_args-prepend   --formatter tap --print-output-on-failure
test.env                TERM=linux
test.run                yes
destroot.cmd            ./install.sh
destroot.args           ${destroot}${prefix} lib
destroot.target-delete  install
