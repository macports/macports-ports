# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0
PortGroup           xcode 1.0
PortGroup           xcodeversion 1.0

github.setup        nullpointerdepressivedisorder MiddleDrag 1.3.8.3 v
github.tarball_from archive
revision            0
categories          sysutils
maintainers         {@nullpointerdepressivedisorder eagereverest.com:fear.silver7589} \
                    openmaintainer
license             MIT
homepage            https://middledrag.app
description         Three-finger trackpad gestures for middle-click and middle-drag on macOS
long_description    Mac trackpads don't have a middle mouse button. Many apps expect one. \
                    MiddleDrag fixes this. Three-finger tap for middle-click. Three-finger \
                    drag for middle-drag. Works alongside Mission Control and other system \
                    gestures.

platforms           {darwin >= 24}
supported_archs     x86_64 arm64

use_configure       no
use_xcode           yes

minimum_xcodeversions {24 16.4 25 16.4 26 16.4}

checksums           rmd160 1b9b8e093dba865db36914d7b91fbfabaf0189f9 \
                    sha256 c8e350b3e7aa66239f29dea7d5f5ac6285e21f832dabe4d7c28d3325c33d92ae \
                    size 7898645

xcode.scheme        MiddleDrag
xcode.configuration Release
xcode.destroot.type none
xcode.build.settings \
                    {OTHER_LDFLAGS="-F/System/Library/PrivateFrameworks -framework MultitouchSupport -framework CoreFoundation -framework CoreGraphics"} \
                    {FRAMEWORK_SEARCH_PATHS="/System/Library/PrivateFrameworks"} \
                    CODE_SIGN_IDENTITY=- \
                    CODE_SIGNING_REQUIRED=NO

destroot {
    copy ${worksrcpath}/build/Release/MiddleDrag.app \
        ${destroot}${applications_dir}/MiddleDrag.app
}

notes "
MiddleDrag requires Accessibility permissions to function.
After launching, grant permission in:
System Settings > Privacy & Security > Accessibility
"

