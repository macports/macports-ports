# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           golang 1.0

go.setup            github.com/nalgeon/redka 1.0.1 v
revision            0
categories          databases
maintainers         {@sikmir disroot.org:sikmir} \
                    openmaintainer
license             BSD

description         Redis re-implemented with SQLite
long_description    {*}${description}

set go_ldflags      "-s -w -X main.version=${version}"

build.args-append   -ldflags \"${go_ldflags}\" \
                    -o bin/ \
                    ./cmd/redka

destroot {
    xinstall -m 0755 ${worksrcpath}/bin/redka ${destroot}${prefix}/bin
}

checksums           ${distname}${extract.suffix} \
                        rmd160  22c7fea40ceb3082e71ee0a33cb37ba333bac103 \
                        sha256  368cfae611fcf908019f7f37d9fe400fd13b8c87c9ad0a091563c9aa6461f7c7 \
                        size    130568

go.vendors          github.com/tidwall/redcon \
                        lock    v1.6.2 \
                        rmd160  724ebc0d97f1cfdae8d19277161cb90f6cebe400 \
                        sha256  e35e584f33765b8fcea0a94c5b1fbc8473ae05fdfad1e1e766650cb308d440d3 \
                        size    49178 \
                    github.com/tidwall/match \
                        lock    v1.1.1 \
                        rmd160  c120d8ecd4d45abbb5b04deb804d1566b9a672fe \
                        sha256  9fd7217a82378a818d31cf6b01db7f9f176674cea583b139ee89b4f06da2ccfd \
                        size    5934 \
                    github.com/tidwall/btree \
                        lock    v1.7.0 \
                        rmd160  59017aac6c4fc24d16e2efffacf61f0d4d91e3e7 \
                        sha256  da5041373bcd1b0da101ec3cc26eeba68f778633a4611ad1165d1dd549a547aa \
                        size    31444 \
                    github.com/nalgeon/be \
                        lock    v0.3.0 \
                        rmd160  0f4084201d8dafb6143f7cce510ee97959a42c7a \
                        sha256  a8315d87ad6c2540563214bee2a2675a7eb6eed09044a5510fdf2476b003b8dd \
                        size    6826 \
                    github.com/mattn/go-sqlite3 \
                        lock    v1.14.33 \
                        rmd160  90ccfd9bb220e6e5d31cbe6f2b2e1e09907aa834 \
                        sha256  4424bd9972c8b83ebc49824ee806588759c1afa924d0f5b9a3362a395feafe95 \
                        size    2701992 \
                    github.com/lib/pq \
                        lock    v1.11.1 \
                        rmd160  afa0b59ee08bb9e80b2e78c08b67b086ced8dab6 \
                        sha256  a01f753ca4d561193b2e68be48fc84ddadbe9f7920b7bba943cab7956d67246c \
                        size    141200
