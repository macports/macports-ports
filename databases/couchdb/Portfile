# $Id: Portfile 30491 2007-10-29 07:53:46Z ryandesign@macports.org $

PortSystem 1.0

name                couchdb
version             0.7.0
categories          databases
platforms           darwin
description         couchdb is a document database server
maintainers         jwa
long_description    ${description}
homepage            http://couchdb.org/
master_sites        http://couchdb.googlecode.com/files/
checksums           sha1 1b60bf37c80ac93ebc69291c3f7177cda789d60d \
    rmd160 eff94ed13da39c035da8fc7a1121505886e1a16f

depends_lib	port:automake \
    port:autoconf \
    port:libtool \
    port:help2man \
    port:icu \
    port:erlang

platform darwin 8 {
    configure.compiler	gcc-4.0
}

variant server {
    set logdir ${prefix}/var/log
    startupitem.create	yes
    startupitem.type	launchd
    startupitem.name	CouchDB
    startupitem.start	"${prefix}/bin/couchdb -b -o ${logdir}/couchdb.stdout -e ${logdir}/couchdb.stderr"
    startupitem.stop	"${prefix}/bin/couchdb -d"
}

livecheck.check	regex
livecheck.url	http://code.google.com/p/couchdb/downloads/list
livecheck.regex	CouchDB (0.\[0-9\].\[0-9\])
