# $Id: Portfile 29623 2007-10-03 10:44:55Z afb@macports.org $

PortSystem 1.0

name                couchdb-devel
version             0.7.0a
categories          databases
platforms           darwin
description         couchdb is a document database server
maintainers         jwa
long_description    ${description}
homepage            http://couchdb.org/
master_sites        http://couchdb.googlecode.com/svn/trunk/
checksums           sha1 bf6506dd200ea18ea1331391da7aaece1188208d

distname            couchdb-${version}
fetch.type          svn
svn.url             http://couchdb.googlecode.com/svn/trunk/
worksrcdir          trunk

depends_lib	port:automake \
    port:autoconf \
    port:libtool \
    port:help2man \
    port:icu \
    port:erlang

pre-configure {
    system "cd ${worksrcpath}; ./bootstrap"
}

platform darwin 8 {
    configure.compiler	gcc-4.0
}

variant server {
    set logdir ${prefix}/var/log
    startupitem.create	yes
    startupitem.type	launchd
    startupitem.name	CouchDB
    startupitem.start	"${prefix}/bin/couchdb -b -o ${logdir}/couchdb.stdout -e ${logdir}/couchdb.stderr"
    startupitem.stop	"${prefix}/bin/couchdb -d"
}

livecheck.check	moddate
livecheck.url	http://couchdb.googlecode.com/svn/trunk
#livecheck.regex	files/couchdb

