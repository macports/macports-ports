PortSystem          1.0
PortGroup           legacysupport 1.1
legacysupport.newest_darwin_requires_legacy 10

name                tdb
version             1.4.6
revision            0
categories          databases
license             GPL-2+
platforms           darwin
maintainers         nomaintainer
description         TDB is a Trivial Database
long_description    TDB is a Trivial Database. In concept, it is very much \
                    like GDBM, and BSDÊ¼s DB except that it allows multiple \
                    simultaneous writers and uses locking internally to keep \
                    writers from trampling on each other. TDB is also \
                    extremely small.

homepage            http://sourceforge.net/projects/tdb/
master_sites        https://www.samba.org/ftp/tdb/
checksums           rmd160 ed1b102ea47dbb1f72e74376db65cb8ca8ff06f8 \
                    sha256 d6892bd8befe04a77642a1dd56e4a879349bf1cf5b2c0bf5fb841061938def0b \
                    size   736747

conflicts           samba3

depends_build       port:gdbm \
                    port:python39

configure.python    ${prefix}/bin/python3.9

post-patch {
    reinplace "s|/usr/bin/env python3|${configure.python}|" \
        ${worksrcpath}/buildtools/bin/waf \
        ${worksrcpath}/buildtools/examples/run_on_target.py \
        ${worksrcpath}/python/tdbdump.py \
        ${worksrcpath}/python/tests/simple.py
}

configure.args      --mandir=${prefix}/share/man
