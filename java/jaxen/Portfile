# $Id: Portfile,v 1.5 2005/04/19 18:15:08 jberry Exp $

PortSystem 1.0

name		jaxen
version		1.0-FCS
revision	2
categories	java devel textproc

platforms			darwin
maintainers			mww@opendarwin.org
description			Java XPath engine
long_description	The jaxen project is a Java XPath Engine. jaxen is a \
					universal object model walker, capable of evaluating \
					XPath expressions across multiple models. Currently \
					supported  are dom4j and JDOM.
homepage			http://www.jaxen.org/

master_sites		sourceforge:jaxen/
checksums			md5 c0baf972b669579aff40ca7fdb9a90d0

depends_build		bin:ant:apache-ant
depends_lib			bin:java:kaffe \
					port:junit \
					port:saxpath \
					port:dom4j

use_configure		no

post-extract {
	# But there ain't no MANIFEST there
	reinplace s|manifest="src/conf/MANIFEST.MF"|| ${worksrcpath}/build.xml
}

set javaLibs ${prefix}/share/java
set classpath "
	${javaLibs}/saxpath.jar
	${javaLibs}/apache-ant/ant.jar
	${javaLibs}/junit.jar
	${javaLibs}/xalan.jar
	${javaLibs}/xml-apis.jar
	${javaLibs}/dom4j.jar
	"

build.cmd			ant
build.target		dist
build.env			CLASSPATH=[join ${classpath} :]
build.args			-Djunit.jar=${prefix}/share/java/junit.jar

destroot {
	xinstall -m 755 -d ${destroot}${prefix}/share/java \
		${destroot}${prefix}/share/doc
	xinstall -m 644 -W ${worksrcpath}/dist/tmp/${distname}/ \
		jaxen-core.jar \
		jaxen-dom.jar \
		jaxen-dom4j.jar \
		jaxen-full.jar \
		${destroot}${prefix}/share/java/
	file copy ${worksrcpath}/dist/tmp/${distname}/doc \
		${destroot}${prefix}/share/doc/${name}
}
