# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0

name                xmlgraphics-commons
version             2.11
platforms           any
categories          java graphics
maintainers         nomaintainer
license             Apache-2
supported_archs     noarch

description         XML Graphics Commons

long_description    Apache XML Graphics Commons is a library that consists of \
                    several reusable components used by Apache Batik and \
                    Apache FOP. Many of these components can easily be used \
                    separately outside the domains of SVG and XSL-FO. You will \
                    find components such as a PDF library, an RTF library, \
                    Graphics2D implementations that let you generate PDF & \
                    PostScript files, and much more.

homepage            https://xmlgraphics.apache.org/commons
master_sites        apache:xmlgraphics/commons/source/

distname            ${name}-${version}-src
worksrcdir          ${name}-${version}

checksums           rmd160  6c2a68818e74efb227d152cd08e18cf003e44137 \
                    sha256  6cb4b78bbd4b56e2b0b0110e8f78da8dd7f029ba18ef0ca8055308397be170ee \
                    size    2564533

depends_build       bin:mvn3:maven3 \

depends_lib         port:junit \
                    port:commons-io \
                    port:commons-logging
set maven_local_repository ${worksrcpath}/.m2/repository

pre-build {
    file mkdir ${maven_local_repository}
}

use_configure       no

build.cmd           mvn3
build.target        "package"
build.pre_args-append \
                    -Dmaven.repo.local=${maven_local_repository} \
                    -DskipTests

destroot {
    xinstall -m 755 -d \
        ${destroot}${prefix}/share/java \
        ${destroot}${prefix}/share/doc/${name}

    xinstall -m 644 \
        ${worksrcpath}/target/${name}-${version}.jar \
        ${destroot}${prefix}/share/java/

    xinstall -m 644 -W ${worksrcpath} \
        KEYS \
        LICENSE \
        NOTICE \
        README \
        ${destroot}${prefix}/share/doc/${name}
    
    ln -s ${name}-${version}.jar ${destroot}${prefix}/share/java/${name}.jar
}
