# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem       1.0

name             openjdk-distributions
categories       java devel
maintainers      {breun.nl:nils @breun} openmaintainer
platforms        darwin
# These ports use prebuilt binaries, 'NoMirror' makes sure MacPorts doesn't mirror/distribute these third-party binaries
license          GPL-2 NoMirror
# These ports use prebuilt binaries for a particular architecture, they are not universal binaries
universal_variant no

# Note: This is the version/revision for the parent stub only
version          1.0
revision         0

set obsoleted_ports {
    openjdk
    openjdk7-zulu
    openjdk8-graalvm
    openjdk8-openj9-large-heap
    openjdk11-openj9-large-heap
    openjdk16
    openjdk16-graalvm
    openjdk16-temurin
    openjdk16-zulu
}

if {${subport} in ${obsoleted_ports}} {
    PortGroup    obsolete 1.0

    replaced_by  openjdk-distributions
    description
    long_description
    homepage
    master_sites
}

if {${subport} eq ${name}} {
    PortGroup            stub 1.0

    supported_archs      noarch
    set meta true
    description          "Meta port encompassing binary OpenJDK releases"
    long_description     {*}${description}
    homepage

    notes {
        The openjdk-distributions port is not installable, but recommends users to install\
        the latest Long Term Support (LTS) subport
    }
}

# Remove after 2023-01-23
subport openjdk7-zulu {
    version      7.56.0.11
    revision     1
    replaced_by  openjdk8-zulu
}

# Remove after 2022-10-19
subport openjdk8-graalvm {
    version      21.0.0.2
    revision     2
    replaced_by  openjdk11-graalvm
}

# Remove after 2022-09-14
subport openjdk16 {
    version      16.0.2
    revision     1
    replaced_by  openjdk17
}

# Remove after 2022-10-19
subport openjdk16-graalvm {
    version      21.2.0
    revision     1
    replaced_by  openjdk17-graalvm
}

# Remove after 2022-09-14
subport openjdk16-temurin {
    version      16.0.2
    revision     1
    replaced_by  openjdk17-temurin
}

# Remove after 2022-09-14
subport openjdk16-zulu {
    version      16.32.15
    revision     1
    replaced_by  openjdk17-zulu
}
