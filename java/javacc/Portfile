# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem 1.0

revision            4
PortGroup           github 1.0

use_zip             yes
github.setup        javacc javacc 7.0.13
description         Java Compiler Compiler, a parser generator for use with Java
categories          java lang devel
license             BSD
long_description    Java Compiler Compiler (JavaCC) is the most popular \
    parser generator for use with Java applications. A parser generator is a \
    tool that reads a grammar specification and converts it to a Java program \
    that can recognize matches to the grammar. In addition to the parser \
    generator itself, JavaCC provides other standard capabilities related to \
    parser generation such as tree building (via a tool called JJTree included \
    with JavaCC), actions, debugging, etc.
github.master_sites https://github.com/${github.author}/${name}/archive:source \
                    https://repo1.maven.org/maven2/net/java/dev/${github.author}/${name}/${version}:binary
distfiles           ${distname}${extract.suffix}:source \
                    ${distname}.jar:binary
platforms           any
supported_archs     noarch
maintainers         nomaintainer
checksums           ${distname}${extract.suffix} \
                        rmd160 b8ac61e85f3881d08cac08c40b6298e351e81d4e \
                        sha256 735d39bca711aeb77ed3bc113747f97844ba29f5e91c78c8a6fc317068de3157 \
                        size 3612611 \
                    ${distname}.jar \
                        rmd160 087ef8f84326064ac4503228f98b406be401e311 \
                        sha256 a4ea46021ec567d89ca305763eedf738ba8a63601445e1aad08a329a6554502a \
                        size 637847
worksrcdir          ${github.author}-${github.project}-${github.version}

configure {
    reinplace "s|target|share/java|g" \
        ${worksrcpath}/scripts/javacc \
        ${worksrcpath}/scripts/jjdoc \
        ${worksrcpath}/scripts/jjtree
}

build {}

destroot {
    xinstall -d -m 755 ${destroot}${prefix}/share/java \
        ${destroot}${prefix}/share/doc/
    file copy ${worksrcpath}/docs ${destroot}${prefix}/share/doc/${name}
    file rename ${distpath}/${distname}.jar \
        ${destroot}${prefix}/share/java/${name}.jar
    xinstall -m 755 -W ${worksrcpath}/scripts javacc jjdoc jjtree jjrun \
        ${destroot}${prefix}/bin
    xinstall -m 644 -W ${worksrcpath} LICENSE \
        ${destroot}${prefix}/share/doc/${name}
}
