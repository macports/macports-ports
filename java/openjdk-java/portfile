# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
PortSystem          1.0
name                openjdk-java
version             17
categories          java
platforms           darwin
description         an Open Source, Open Innovation, Open Standards implementation of the Java Platform, Standard Edition, and related projects.
homepage            https://openjdk.java.net/
license             GPL-2+CE
universal_variant   no

set long_description_openjdk-ga \
 Production-ready open-source builds of the Java Development Kit

set long_description_openjdk-ea \
 early-access, open-source builds

set long_description_openjfx \
 JavaFX is an open source, next generation client application platform for desktop, mobile and embedded systems built on Java. It is a collaborative effort by many individuals and companies with the goal of producing a modern, efficient, and fully featured toolkit for developing rich client applications.

set obsoleted_ports {
openjdk-java
}

if {${subport} in ${obsoleted_ports}} {
    PortGroup    obsolete 1.0

}

if {${subport} eq "openjdk-java"} {
    # The openjdk-java is not installable, but recommends users to install the latest java subport
    replaced_by  openjdk${version}
}

subport openjdk-6-bsd-i386-soylatte {
 version             1.6
 set build           1.0.3
 description         openjdk 6 port:bsd builds
 supported_archs     i386
 long_description    openjdk 6 darwin port:bsd soylatte i386 build
 master_sites        https://landonf.org/static/soylatte/bsd-dist/javasrc_${version}_jrl_darwin/
 distname            soylatte16-i386-${build}
}

subport openjdk-7-bsd-ppc-zerovm {
 version             1.7
 set build           2012-02-16-07-18-b00
 description         openjdk 7 port:bsd builds
 supported_archs     ppc
 long_description    openjdk-7 darwin port:bsd zerovm ppc builds
 master_sites        http://commondatastorage.googleapis.com/bluelotussoftware/openjdk/macppc/
 distname            openjdk7-zerovm-ppc-jyeary-${build}
}

subport openjdk-9-jdk {
 version             9.0.4
 description         openjdk 9 builds
 long_description    ${long_description_openjdk-ga}
 master_sites        https://download.java.net/java/GA/jdk9/${version}/binaries/
 supported_archs     x86_64
 checksum            sha256  66415406716fc42cff36e2d74ae991d46c42b3cf317b0425c7bf67697c616716
 distname            openjdk-{version}_osx-x64_bin
 worksrcdir          jdk-${version}.jdk
}

subport openjdk-10-jdk {
 version             10.0.2
 description         openjdk 10 builds
 set build           13
 long_description    ${long_description_openjdk-ga}
 master_sites        https://download.java.net/java/GA/jdk10/${version}/19aef61b38124481863b1413dce1855f/${build}/
 supported_archs     x86_64
 checksum            sha256  77ea7675ee29b85aa7df138014790f91047bfdafbc997cb41a1030a0417356d7 \
                     size    200916897
 distname            openjdk-{version}_osx-x64_bin
 worksrcdir          jdk-${version}.jdk
}

subport openjdk-11-jfx {
 version             11.0.2
 description         openjfx 11 builds
 long_description    ${long_description_openjfx}
 master_sites        https://download2.gluonhq.com/openjfx/${version}/
 supported_archs     x86_64
 checksum            sha256  e98158812db1a0037cdaf85824adff384e41e3edf046fda145479ce6057cb514
 distname            openjfx-${version}_osx-x64_bin-sdk
 worksrcdir          javafx-sdk-${version}
 depends_lib-append  port:openjdk-11-jdk
}

subport openjdk-11-jdk {
 version             11.0.2
 description         openjdk 11 builds
 set build           9
 long_description    ${long_description_openjdk-ga}
 master_sites        https://download.java.net/java/GA/jdk11/${build}/GPL/
 supported_archs     x86_64
 checksum            sha256  f365750d4be6111be8a62feda24e265d97536712bc51783162982b8ad96a70ee \
                     size    182670822
 distname            openjdk-{version}_osx-x64_bin
 worksrcdir          jdk-${version}.jdk
}

subport openjdk-12-jfx {
 version             12.0.2
 description         openjfx 12 builds
 long_description    ${long_description_openjfx}
 master_sites        https://download2.gluonhq.com/openjfx/${version}/
 supported_archs     x86_64
 checksum            sha256  a87b0a6f30bcf21ec1bd1c89e1596f43dc5b0d7fd302776d0d0d2e226022fead
 distname            openjfx-${version}_osx-x64_bin-sdk
 worksrcdir          javafx-sdk-${version}
 depends_lib-append  port:openjdk-12-jdk
}

subport openjdk-12-jdk {
 version             12.0.2
 description         openjdk 12 builds
 set build           10
 long_description    ${long_description_openjdk-ga}
 master_sites        https://download.java.net/java/GA/jdk${version}/e482c34c86bd4bf8b56c0b35558996b9/${build}/GPL/
 supported_archs     x86_64
 checksum            sha256  675a739ab89b28a8db89510f87cb2ec3206ec6662fb4b4996264c16c72cdd2a1 \
                     size    190273787
 distname            openjdk-{version}_osx-x64_bin
 worksrcdir          jdk-${version}.jdk
}

subport openjdk-13-jfx {
 version             13.0.2
 description         openjfx 13 builds
 long_description    ${long_description_openjfx}
 master_sites        https://download2.gluonhq.com/openjfx/${version}/
 supported_archs     x86_64
 checksum            sha256  9e637520b65281f214a67b35c5028b70eedc288130ea78d142dd7fca44ae0ef4
                     size    
 distname            openjfx-${version}_osx-x64_bin-sdk
 worksrcdir          javafx-sdk-${version}
 depends_lib-append  port:openjdk-13-jdk
}

subport openjdk-13-jdk {
 version             13.0.2
 description         openjdk 13 builds
 set build           8
 long_description    ${long_description_openjdk-ga}
 master_sites        https://download.java.net/java/GA/jdk${version}/d4173c853231432d94f001e99d882ca7/${build}/GPL/
 supported_archs     x86_64
 checksum            sha256  08fd2db3a3ab6fb82bb9091a035f9ffe8ae56c31725f4e17d573e48c39ca10dd \
                     size    189969691
 distname            openjdk-${version}_osx-x64_bin
 worksrcdir          jdk-${version}.jdk
}

subport openjdk-14-jfx {
 version             14.0.2.1
 description         openjfx 14 builds
 long_description    ${long_description_openjfx}
 master_sites        https://download2.gluonhq.com/openjfx/${version}/
 supported_archs     x86_64
 checksum            sha256  228973dd66beb80f2734b44868b57adbac793427e26672cad641631683ea685c
 distname            openjfx-${version}_osx-x64_bin-sdk
 worksrcdir          javafx-sdk-${version}
 depends_lib-append  port:openjdk-14-jdk
}

subport openjdk-14-jdk {
 version             14.0.2
 description         openjdk 14 builds
 set build           12
 long_description    ${long_description_openjdk-ga}
 master_sites        https://download.java.net/java/GA/jdk${version}/205943a0976c4ed48cb16f1043c5c647/${build}/GPL/
 supported_archs     x86_64
 checksum            sha256  386a96eeef63bf94b450809d69ceaa1c9e32a97230e0a120c1b41786b743ae84 \
                     size    193313480
 distname            openjdk-${version}_osx-x64_bin
 worksrcdir          jdk-${version}.jdk
}

subport openjdk-15-jfx {
 version             15.0.1
 description         openjfx 15 builds
 long_description    ${long_description_openjfx}
 master_sites        https://download2.gluonhq.com/openjfx/${version}/
 supported_archs     x86_64
 checksum            sha256  c40b99d7b0d4ce329d2ed702f720d20a0a57a8b8a54a30bb0a8ca8fd636f205f
 distname            openjfx-${version}_osx-x64_bin-sdk
 worksrcdir          javafx-sdk-${version}
 depends_lib-append  port:openjdk-15-jdk
}

subport openjdk-15-jdk {
 version             15.0.2
 description         openjdk 15 builds
 set build           7
 long_description    ${long_description_openjdk-ga}
 master_sites        https://download.java.net/java/GA/jdk${version}/0d1cfde4252546c6931946de8db48ee2/${build}/GPL/
 supported_archs     x86_64
 checksum            sha256  578b17748f5a7d111474bc4c9b5a8a06b4a4aa1ba4a4bc3fef014e079ece7c74 \
                     size    192067136
 distname            openjdk-${version}_osx-x64_bin
 worksrcdir          jdk-${version}.jdk
}

subport openjdk-16-jfx {
 version             16
 description         openjfx 16 builds
 long_description    ${long_description_openjfx}
 master_sites        https://download2.gluonhq.com/openjfx/${version}/
 supported_archs     x86_64
 checksum            sha256  9b112f9d034fff308a236e577d5c1ad595cd9e6821147e5eed1d37abcd36c312
 distname            openjfx-${version}_osx-x64_bin-sdk
 worksrcdir          javafx-sdk-${version}
 depends_lib-append  port:openjdk-16-jdk
}

subport openjdk-16-jdk {
 version             16.0.2
 description         openjdk 16 builds
 set build           7
 long_description    ${long_description_openjdk-ga}
 master_sites        https://download.java.net/java/GA/jdk${version}/d4a915d82b4c4fbb9bde534da945d746/${build}/GPL/
 supported_archs     x86_64
 checksum            sha256  6098f839954439d4916444757c542c1b8778a32461706812d41cc8bbefce7f2f \
                     size    181647220
 distname            openjdk-${version}_osx-x64_bin
 worksrcdir          jdk-${version}.jdk
}

subport openjdk-17-jfx {
 version             17.0.1
 description         openjfx 17 builds
 long_description    ${long_description_openjfx}
 supported_archs     x86_64 arm64
 if {${configure.build_arch} eq "x86_64"} {
  master_sites        https://download2.gluonhq.com/openjfx/${version}/
  checksum            sha256  b783616124aa3a4a39e5e3398a91a748b6b58e6d999beb6f79d9005d5540e0ae
  distname            openjfx-${version}_osx-x64_bin-sdk
 } elseif {${configure.build_arch} eq "arm64"} {          
  master_sites        https://download2.gluonhq.com/openjfx/${version}/
  checksum            sha256  19169cc1130b327ce0477be3d6aa84db20d0fe72ad6680a6f21ead65d8cb045e
  distname            openjfx-${version}_osx-aarch64_bin-sdk
 } 
 depends_lib-append  port:openjdk-17-jdk
}

subport openjdk-17-jdk {
 version             17.0.1
 description         openjdk 17 builds
 set build           12
 long description    ${long_description_openjdk-ga}
 supported_archs     arm64 x86_64
 if {${configure.build_arch} eq "x86_64"} {
  master_sites        https://download.java.net/java/GA/jdk${version}/2a2082e5a09d4267845be086888add4f/${build}/GPL/
  checksum            sha256  6ccb35800e723cabe15af60e67099d1a07c111d2d3208aa75523614dde68bee1 \
                      size    184043709
  distname            openjdk-${version}_macos-x64_bin
 } elseif {${configure.build_arch} eq "arm64"} {          
  master_sites        https://download.java.net/java/GA/jdk${version}/2a2082e5a09d4267845be086888add4f/${build}/GPL/
  checksum            sha256  45acad5647960ecde83dc1fb6dda72e5e274798660fa9acff0fb9cc8a37b5794 \
                      size    181747413
  distname            openjdk-${version}_macos-aarch64_bin
 }
 worksrcdir          jdk-${version}.jdk
}

subport openjdk-18-jfx {
 version             18
 description         openjfx 18 builds
 long_description    ${long_description_openjfx}
 supported_archs     x86_64 arm64
 if {${configure.build_arch} eq "x86_64"} {
  master_sites        https://download2.gluonhq.com/openjfx/${version}/
  checksum            sha256  7cb9c4ee71c81c283f462daf62e1710b3e651e9cb7bf8bd2024b5a2d2274c610
  distname            openjfx-${version}-ea+9_osx-x64_bin-sdk
 } elseif {${configure.build_arch} eq "arm64"} {          
  master_sites        https://download2.gluonhq.com/openjfx/${version}/
  checksum            sha256  63bb5f510f373b6fc53fe31ee4626f826d873d11ff5ddf10aa80774f91acb651
  distname            openjfx-${version}-ea+9_osx-aarch64_bin-sdk
 }
 depends_lib-append  port:openjdk-18-jdk
}

subport openjdk-18-jdk {
 version             18
 description         openjdk 18 builds
 set build           30
 long description    ${long_description_openjdk-ea}
 supported_archs     arm64 x86_64
 if {${configure.build_arch} eq "x86_64"} {
  master_sites        https://download.java.net/java/early_access/jdk${version}/${build}/GPL/
  checksum            sha256  d733f8b715a746b0c4c4c5c363fc08aed02b88bd14efb0b81b2cdf2cb80a3880 \
                      size    185343149
  distname            openjdk-${version}-ea+{build}_macos-x64_bin
 } elseif {${configure.build_arch} eq "x86_64"} {          
  master_sites        https://download.java.net/java/early_access/jdk${version}/${build}/GPL/
  checksum            sha256  2d1c87d8ab4e8686eae3908a1d03f9b40ce3eef610628c5923205664cb3bf671 \
                      size    183200268
  distname            openjdk-${version}-ea+{build}_macos-aarch64_bin
 }
 worksrcdir          jdk-${version}.jdk
}

subport openjdk-19-jdk {
 version             19
 description         openjdk 19 builds
 set build           4
 long description    ${long_description_openjdk-ea}
 supported_archs     arm64 x86_64
 if {${configure.build_arch} eq "x86_64"} {
  master_sites        https://download.java.net/java/early_access/jdk${version}/${build}/GPL/
  checksum            sha256  348c7ed5118d0681c1080f6490f5bf5b3247a2af8f1cb4c13f97046b452a6707 \
                      size    186298743
  distname            openjdk-${version}-ea+{build}_macos-x64_bin
 } elseif {${configure.build_arch} eq "arm64"} {          
  master_sites        https://download.java.net/java/early_access/jdk${version}/${build}/GPL/
  checksum            sha256  b04cba881108b87d04a1312e32bb6ff31dca428feb9f1c775bddc5f1677bb7bc \
                      size    184139469
  distname            openjdk-${version}-ea+{build}_macos-aarch64_bin
 }
 worksrcdir          jdk-${version}.jdk
}

if {[string match *-jdk ${subport}]} {
 homepage            openjdk.java.net
} elseif {[string match *-jfx ${subport}]} {
 homepage            openjfx.io
} 

 
if {[string match *-bsd-i386-soylatte ${subport}]} {
 destroot.violate_mtree yes
 set target /usr/local
 set destroot_target ${destroot} ${target}
  
 destroot {
  xinstall -m 755 -d ${destroot_target}
  copy ${worksrcpath} ${destroot_target}
 }
 notes "
  To check if openjdk6 port:bsd darwin10build i386 was installed, java version can be checked by:
    /usr/local/soylatte16-i386-1.0.3/bin/java -version
  If you have more than one JDK installed you can make ${subport} the default by adding the following line to your shell profile:
  export JAVA_HOME=${target}/soylatte16-i386-1.0.3/
 "
} elseif {[string match *-bsd-ppc-zerovm ${subport}]} {
  
 destroot.violate_mtree yes
 set target /usr/local
 set destroot_target ${destroot} ${target}
  
 destroot {
  xinstall -m 755 -d ${destroot_target}
  copy ${worksrcpath} ${destroot_target}
 }
 notes "
  To check if openjdk port:bsd darwin9build macppc was installed, java version can be checked by:
   /usr/local/openjdk7-zerovm-ppc-jyeary-2012-02-16-07-18-b00/bin/java \-version
 "
} elseif {[string match *-jdk ${subport}]} {
 # macOS Java tools expect to find Java virtual machines under /Library/Java/JavaVirtualMachines, which is not under ${prefix}.
 destroot.violate_mtree yes

 set target /Library/Java/JavaVirtualMachines/${subport}
 set destroot_target ${destroot}${target}

 destroot {
  xinstall -m 755 -d ${destroot_target}
  copy ${worksrcpath}/Contents ${destroot_target}
 }

 notes "
  If you have more than one JDK installed you can make ${subport} the default by adding the following line to your shell profile:
   export JAVA_HOME=${target}/Contents/Home
 "
} elseif {[string match *-jfx ${subport}]} {
 # macOS Java tools expect to find Java virtual machines under /Library/Java/JavaVirtualMachines, which is not under ${prefix}.
 destroot.violate_mtree yes
 set target /Library/Java/JavaVirtualMachines/${subport}
 set destroot_target ${destroot}${target}

 destroot {
  xinstall -m 755 -d ${destroot_target}
  copy ${worksrcpath}/lib ${destroot_target}
  copy ${worksrcpath}/legal ${destroot_target}
  copy ${worksrcpath}/src.zip ${destroot_target}
 }
 notes "
  If you have more than one JavaFX installed you can make ${subport} the default by adding the following line to your shell profile:
  export PATH_TO_FX=${destroot_target}/lib
 "
}
