# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           java 1.0

name                bcprov
version             1.63
set distfile_version \
                    [join [split ${version} .] {}]

categories          java devel security
license             MIT
maintainers         nomaintainer
platforms           darwin
supported_archs     noarch

description         A Java implementation of cryptographic algorithms
long_description    ${description}
homepage            https://www.bouncycastle.org/java.html

master_sites        https://search.maven.org/remotecontent?filepath=org/bouncycastle/${name}-jdk15on/${version}/

distname            ${name}-jdk15on-${distfile_version}
distfiles           ${distname}.jar
worksrcdir          ${distname}

checksums           rmd160  94c928cacd73ee667caee05d59674a12979fcbf1 \
                    sha256  28155c8695934f666fabc235f992096e40d97ecb044d5b6b0902db6e15a0b72f \
                    size    4761203

java.version        1.5+
java.fallback       openjdk11

extract {
    file copy ${distpath}/${distname}.jar ${workpath}
}

use_configure       no

build {}

destroot {
    set javadir ${destroot}${prefix}/share/java
    xinstall -d -m 755 -d ${javadir}/${name}
    xinstall -m 644 ${workpath}/${distname}.jar ${javadir}/${name}/${name}.jar
}

livecheck.type      regex
livecheck.url       https://repo1.maven.org/maven2/org/bouncycastle/${name}-jdk15on/maven-metadata.xml
livecheck.regex     >(\\d+\\.\\d+(\\.\\d+)*)</
