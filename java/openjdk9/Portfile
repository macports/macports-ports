# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem       1.0

name             openjdk9
version          9.0.4

categories       java devel
maintainers      {@breun breun.nl:nils} openmaintainer
platforms        darwin
license          GPL-2
supported_archs  x86_64

description      OpenJDK -- Open Java Development Kit

long_description Production-ready, free and open-source build of the Java \
                 Development Kit, an implementation of the Java Standard \
                 Edition (SE) 9 Platform. OpenJDK is the official reference \
                 implementation of Java SE. Included components are the \
                 HotSpot virtual machine, the Java class library and the Java \
                 compiler. 

homepage         http://jdk.java.net/9/

master_sites     https://download.java.net/java/GA/jdk9/${version}/binaries/
distname         openjdk-${version}_osx-x64_bin

checksums        rmd160  0b38a97b6534649ec362d897e7cbd601121bb3eb \
                 sha256  66415406716fc42cff36e2d74ae991d46c42b3cf317b0425c7bf67697c616716 \
                 size    188745049

worksrcdir       jdk-${version}.jdk

use_configure    no

build {}

# macOS Java tools expect to find Java virtual machines under /Library/Java/JavaVirtualMachines, which is not under ${prefix}.
destroot.violate_mtree yes

destroot {
    set target ${destroot}/Library/Java/JavaVirtualMachines
    xinstall -m 755 -d ${target}
    copy ${worksrcpath} ${target}
}
