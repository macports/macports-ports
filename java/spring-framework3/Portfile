# $Id$

PortSystem 1.0

name			spring-framework3
version			3.0.0
revision		3

categories		java
maintainers		blair
platforms		darwin

description		Spring application framework for Java
long_description	Spring is a layered Java/J2EE application framework.
homepage		http://www.springsource.org/about

distname		spring-framework-${version}.RC2-with-docs
master_sites		http://s3.amazonaws.com/dist.springframework.org/milestone/SPR
checksums		md5 779c64be6f8e2045829d98ace84c0ce0 \
			sha1 ebc2242590bd816a8ea8806ebd7d30197804d6f2 \
			rmd160 61edd5588af3d6efc693fa7b3bc353d3fb15e6d9

use_zip			yes

depends_lib		bin:java:kaffe

use_configure		no

worksrcdir		spring-framework-${version}.RC2

build.cmd		true

destroot {
	# Ensure needed directories
	xinstall -m 755 -d ${destroot}${prefix}/share \
		${destroot}${prefix}/share/doc/${name} \
		${destroot}${prefix}/share/examples

	# Install the framework
	file copy ${worksrcpath}/dist ${destroot}${prefix}/share/java
	foreach f [glob ${destroot}${prefix}/share/java/*.jar] {
		file rename ${f} [strsed ${f} {s/-3.0.0.RC2//}]
	}

	# Install the docs
	foreach f {changelog.txt license.txt notice.txt readme.txt} {
		file copy ${worksrcpath}/${f} \
			${destroot}${prefix}/share/doc/${name}/${f}
	}
	file copy ${worksrcpath}/docs/javadoc-api \
		${destroot}${prefix}/share/doc/${name}/api
	file copy ${worksrcpath}/docs/spring-framework-reference \
		${destroot}${prefix}/share/doc/${name}/reference
}
