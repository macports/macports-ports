# $Id: Portfile,v 1.2 2004/10/28 18:43:43 toby Exp $

PortSystem 1.0
name             poc
version          0.3.7.1
revision         1
categories       audio
maintainers      toby@opendarwin.org
description      MP3 cue file parser
long_description \
	mp3cue is a program that parses an input CUE \
	file describing a multitrack MP3 and cuts the \
	input MP3 into multiple MP3 tracks according \
	to the description in the CUE file.
homepage         http://www.bl0rg.net/software/poc/
platforms        darwin

master_sites     ${homepage}
checksums        md5 d96ed857d3a9e075210653c434d655d1

# Need a newish version of bison.
depends_build    bin:XXX:bison

patch {
	reinplace "s|YACC=bison|YACC=${prefix}/bin/bison|" \
		${worksrcpath}/Makefile
}

configure        {}

build.target     servers clients

destroot {
	file mkdir ${destroot}${prefix}/share/doc/poc
	xinstall -m 444 ${worksrcpath}/README ${destroot}${prefix}/share/doc/poc

	set binaries {poc-2250 poc-3119 poc-2250-ploss poc-3119-ploss \
		poc-fec poc-fec-ploss poc-http pogg-http \
		pob-2250 pob-3119 pob-fec pob-3119-rb pob-2250-rb}

	foreach binary $binaries {
		xinstall -m 555 ${worksrcpath}/${binary} ${destroot}${prefix}/bin
	}
}
