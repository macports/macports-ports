# -*- Mode: Tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:et:sw=4:ts=4:sts=4
# $Id$

PortSystem 1.0

name            mpd-devel
version         0.14.0.r6745
categories      audio
maintainers     sfiera
description     Music Player Daemon development snapshot
long_description \
    This is a development snapshot of mpd, containing, among other things, \
    support for Bonjour/Zeroconf. For more information about mpd, see the mpd \
    port.

homepage        http://www.musicpd.org/
platforms       darwin
master_sites    macports
checksums       md5 ba011170730857d1bdd4dea55349ef9e \
                sha1 acf94512ead6eed610cadb8d4c771873a8395d46 \
                rmd160 2e0e4562fd10e1d374e5b8d123a19781c28018a0
use_bzip2       yes

depends_lib     port:libmad \
                port:libid3tag \
                port:libiconv \
                port:pkgconfig \
                port:zlib \
                port:libogg \
                port:libvorbis \
                port:libao

configure.args  --mandir=${prefix}/share/man \
                --enable-id3 \
                --enable-ao \
                --disable-flac \
                --disable-aac

configure.cflags-append -I${prefix}/include

default_variants +aac

variant aac {
    depends_lib-append    port:faad2
    configure.args-delete --disable-aac
    configure.args-append --enable-aac
}

variant flac {
    depends_lib-append    port:flac
    configure.args-delete --disable-flac
    configure.args-append --enable-flac
}

platform macosx {
    configure.args-delete --enable-ao
    configure.args-append --disable-ao
    depends_lib-delete    port:libao
}

post-activate {
    ui_msg "You may get \"Problems shmget'ing\" message when launching mpd.
    In this case, you can increase the values of kern.sysv.shmmax and
    kern.sysv.shmall in /etc/rc."
}

# I could pull the most recent revision number, but I don't know of a way to
# munge the retrieved value with the defined version number above
livecheck.check none
