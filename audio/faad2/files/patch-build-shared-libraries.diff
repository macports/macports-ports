From 92ce281311f629faa99c9e06baaf41977f431f1b Mon Sep 17 00:00:00 2001
From: Fabian Greffrath <fabian@greffrath.com>
Date: Tue, 7 Nov 2023 11:19:42 +0100
Subject: [PATCH] build shared libraries by default and hide symbols

--- CMakeLists.txt
+++ CMakeLists.txt
@@ -15,12 +15,18 @@ if(NOT DEFINED FAAD_BUNDLED_MODE)
   # depending on whether or not we are the top-level project.
   if(FAAD_PARENT_DIRECTORY)
     set(FAAD_BUNDLED_MODE ON)
+    set(BUILD_SHARED_LIBS OFF)
   else()
     set(FAAD_BUNDLED_MODE OFF)
+    set(BUILD_SHARED_LIBS ON)
   endif()
 endif()
 mark_as_advanced(FAAD_BUNDLED_MODE)
 
+if(BUILD_SHARED_LIBS)
+  set(CMAKE_C_VISIBILITY_PRESET hidden)
+endif()
+
 find_library(MATH_LIBRARY m)
 
 include(GNUInstallDirs)
