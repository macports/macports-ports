https://github.com/knik0/faad2/compare/2.11.0...a5d3097f9c788d3d895dbbb622b67afcd77c9faf
--- CMakeLists.txt
+++ CMakeLists.txt
@@ -3,8 +3,21 @@
 #  - Solaris 11.4 SRU 15 : 3.15
 cmake_minimum_required(VERSION 3.15)
 
+include(CheckSymbolExists)
+
 project(LIBFAAD2 LANGUAGES C)
 
+# Set a default build type if none was specified
+set(default_build_type "RelWithDebInfo")
+if(NOT CMAKE_BUILD_TYPE AND NOT CMAKE_CONFIGURATION_TYPES)
+  message(STATUS "Setting build type to '${default_build_type}' as none was specified.")
+  set(CMAKE_BUILD_TYPE "${default_build_type}" CACHE
+      STRING "Choose the type of build." FORCE)
+  # Set the possible values of build type for cmake-gui
+  set_property(CACHE CMAKE_BUILD_TYPE PROPERTY STRINGS
+    "Debug" "Release" "MinSizeRel" "RelWithDebInfo")
+endif()
+
 # If FAAD is being bundled in another project, we don't want to
 # install anything. However, we want to let people override this, so
 # we'll use the FAAD_BUNDLED_MODE variable to let them do that; just
@@ -15,12 +28,27 @@ if(NOT DEFINED FAAD_BUNDLED_MODE)
   # depending on whether or not we are the top-level project.
   if(FAAD_PARENT_DIRECTORY)
     set(FAAD_BUNDLED_MODE ON)
+    if(NOT DEFINED BUILD_SHARED_LIBS)
+      set(BUILD_SHARED_LIBS OFF)
+    endif()
   else()
     set(FAAD_BUNDLED_MODE OFF)
+    if(NOT DEFINED BUILD_SHARED_LIBS)
+      set(BUILD_SHARED_LIBS ON)
+    endif()
   endif()
 endif()
 mark_as_advanced(FAAD_BUNDLED_MODE)
 
+if(BUILD_SHARED_LIBS)
+  if(NOT DEFINED CMAKE_C_VISIBILITY_PRESET)
+    set(CMAKE_C_VISIBILITY_PRESET hidden)
+  endif()
+  if (WIN32 AND NOT DEFINED CMAKE_DLL_NAME_WITH_SOVERSION)
+    set(CMAKE_DLL_NAME_WITH_SOVERSION ON)
+  endif()
+endif()
+
 find_library(MATH_LIBRARY m)
 
 include(GNUInstallDirs)
@@ -78,6 +106,13 @@ set(FAAD_DEFINES
   PACKAGE_VERSION=\"${FAAD_VERSION}\"
 )
 
+check_symbol_exists(lrintf "math.h" HAVE_LRINTF)
+if(HAVE_LRINTF)
+  list(APPEND FAAD_DEFINES
+    HAVE_LRINTF=1
+  )
+endif()
+
 set(FAAD_FLAGS
   -Wall
 )
@@ -237,4 +272,10 @@ if(NOT FAAD_BUNDLED_MODE AND NOT MSVC)
     FILES ${CMAKE_CURRENT_BINARY_DIR}/include/neaacdec.h
     DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}"
   )
+
+  install(
+    FILES frontend/faad.man
+    DESTINATION ${CMAKE_INSTALL_MANDIR}/man1
+    RENAME faad.1
+  )
 endif()  # FAAD_BUNDLED_MODE
