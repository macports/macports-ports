--- configure
+++ configure
@@ -19208,9 +19208,13 @@ if test x$enable_universal_binary = xyes; then
    esac
 fi
 
-if ($CXX --version | grep 'clang version' > /dev/null); then
-    LDFLAGS="${LDFLAGS} -latomic"
-fi
+case $host_os in
+  linux* | gnu*)
+    if ($CXX --version | grep 'clang version' > /dev/null); then
+        LDFLAGS="${LDFLAGS} -latomic"
+    fi
+    ;;
+esac
 
 if test x$enable_sse = xyes; then
 
--- configure.ac
+++ configure.ac
@@ -208,9 +208,13 @@ dnl Check if $CXX is clang by evaluating the version string because
 dnl $ax_cv_cxx_compiler_vendor seems not to work (it is either "gnu" or just empty).
 dnl If $CXX is clang (string is found), grep returns 0 and the if is executed.
 dnl Use /dev/null to suppress grep output to shell.
-if ($CXX --version | grep 'clang version' > /dev/null); then
-    LDFLAGS="${LDFLAGS} -latomic"
-fi
+case $host_os in
+  linux* | gnu*)
+    if ($CXX --version | grep 'clang version' > /dev/null); then
+        LDFLAGS="${LDFLAGS} -latomic"
+    fi
+    ;;
+esac
 
 if test x$enable_sse = xyes; then
 
