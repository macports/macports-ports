--- src/ShuttleGui.h
+++ src/ShuttleGui.h
@@ -89,7 +89,9 @@ public:
    wxStaticBoxWrapper( Args &&...args )
       : wxStaticBox( std::forward<Args>(args)... )
    {
-      m_container.EnableSelfFocus();
+#if wxCHECK_VERSION(3, 1, 1)
+       m_container.EnableSelfFocus();
+#endif
    }
 };
 
--- lib-src/FileDialog/mac/FileDialogPrivate.h
+++ lib-src/FileDialog/mac/FileDialogPrivate.h
@@ -96,7 +96,9 @@ protected:
     int m_firstFileTypeFilter;
     wxArrayString m_currentExtensions;
     WX_NSObject m_delegate;
+#if !wxCHECK_VERSION(3, 0, 3)
     WX_NSObject m_sheetDelegate;
+#endif
     wxString m_noOverwritePromptFilename;
 #endif
 
--- lib-src/FileDialog/mac/FileDialogPrivate.mm
+++ lib-src/FileDialog/mac/FileDialogPrivate.mm
@@ -148,7 +148,9 @@ void FileDialog::Init()
 {
     m_filterIndex = -1;
     m_delegate = nil;
+#if !wxCHECK_VERSION(3, 0, 3)
     m_sheetDelegate = nil;
+#endif
     m_filterPanel = NULL;
     m_filterChoice = NULL;
 }
@@ -160,13 +162,17 @@ void FileDialog::Create(
 {
     FileDialogBase::Create(parent, message, defaultDir, defaultFileName, wildCard, style, pos, sz, name);
 
+// #if !wxCHECK_VERSION(3, 0, 3)
 //    m_sheetDelegate = [[ModalDialogDelegate alloc] init];
 //    [(ModalDialogDelegate*)m_sheetDelegate setImplementation: this];
+// #endif
 }
 
 FileDialog::~FileDialog()
 {
+#if !wxCHECK_VERSION(3, 0, 3)
     [m_sheetDelegate release];
+#endif
 }
 
 bool FileDialog::SupportsExtraControl() const
@@ -316,10 +322,23 @@ void FileDialog::ShowWindowModal()
         [sPanel setAllowsOtherFileTypes:NO];
         
         NSWindow* nativeParent = parentWindow->GetWXWindow();
+#if wxCHECK_VERSION(3, 0, 3)
+        // the ModalDialogDelegate class is no longer exported, but the
+        // beginSheetForDirectory: message has been deprecated since 10.6 
+        // Use the modern equivalent:
+        [sPanel setDirectoryURL:[NSURL fileURLWithPath:dir.AsNSString() isDirectory:YES]];
+        [sPanel setNameFieldStringValue:file.AsNSString()];
+        [sPanel beginSheetModalForWindow:nativeParent completionHandler:^(NSInteger result) {
+            if (result == NSFileHandlingPanelOKButton) {
+                NSLog(@"Saved file %@", [sPanel URL]);
+            }
+        }];
+#else
         [sPanel beginSheetForDirectory:dir.AsNSString() file:file.AsNSString()
             modalForWindow: nativeParent modalDelegate: nil // m_sheetDelegate
             didEndSelector: @selector(sheetDidEnd:returnCode:contextInfo:)
             contextInfo: nil];
+#endif
     }
     else 
     {
@@ -335,11 +354,22 @@ void FileDialog::ShowWindowModal()
         [oPanel setAllowsMultipleSelection: (HasFlag(wxFD_MULTIPLE) ? YES : NO )];
         
         NSWindow* nativeParent = parentWindow->GetWXWindow();
+#if wxCHECK_VERSION(3, 0, 3)
+        [oPanel setDirectoryURL:[NSURL fileURLWithPath:dir.AsNSString() isDirectory:YES]];
+        [oPanel setNameFieldStringValue:file.AsNSString()];
+        [oPanel setAllowedFileTypes:types];
+        [oPanel beginSheetModalForWindow:nativeParent completionHandler:^(NSInteger result) {
+            if (result == NSFileHandlingPanelOKButton) {
+                NSLog(@"Opened file(s) %@", [oPanel URLs]);
+            }
+        }];
+#else
         [oPanel beginSheetForDirectory:dir.AsNSString() file:file.AsNSString()
             types: types modalForWindow: nativeParent
             modalDelegate: nil // m_sheetDelegate
             didEndSelector: @selector(sheetDidEnd:returnCode:contextInfo:)
             contextInfo: nil];
+#endif
     }
 }
 
