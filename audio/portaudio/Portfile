# $Id$
# -*- Mode: Tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:filetype=tcl:et:sw=4:ts=4:sts=4
PortSystem       1.0
name             portaudio
version          19.20071207
categories       audio devel
platforms        macosx
maintainers      themiwi@users.sourceforge.net
homepage         http://www.portaudio.com/

description      PortAudio is a free, cross platform, open-source, audio I/O library.
long_description PortAudio is a free, cross platform, open-source, audio I/O library. \
                 It lets you write simple audio programs in 'C' that will compile and \
                 run on many platforms including Windows, Macintosh (8,9,X), Unix (OSS), \
                 SGI, and BeOS. PortAudio is intended to promote the exchange of audio \
                 synthesis software between developers on different platforms. \
                 PortAudio provides a very simple API for recording and/or playing sound \
                 using a simple callback function.  Example programs are included that \
                 synthesize sine waves and pink noise, perform fuzz distortion on a guitar, \
                 list available audio devices, etc. 

master_sites     ${homepage}archives
distname         pa_stable_v19_20071207
checksums        md5 d2943e4469834b25afe62cc51adc025f \
                 sha1 3841453bb7be672a15b6b632ade6f225eb0a4efc \
                 rmd160 5185bd85bd4bc75dddb3fa56f172a346bdeea0c7

worksrcdir       ${name}

# Universal building is on by default
universal_variant   no

post-build {
  copy ${worksrcpath}/portaudio-2.0.pc.in ${worksrcpath}/portaudio.pc
  reinplace -E "s|\@prefix\@|${prefix}|g" ${worksrcpath}/portaudio.pc
  reinplace -E "s|\@exec_prefix\@|${prefix}/bin|g" ${worksrcpath}/portaudio.pc
  reinplace -E "s|\@libdir\@|${prefix}/lib|g" ${worksrcpath}/portaudio.pc
  reinplace -E "s|\@includedir\@|${prefix}/include|g" ${worksrcpath}/portaudio.pc
  reinplace -E "s|\@LIBS\@|-framework CoreAudio -framework AudioToolbox -framework AudioUnit -framework -framework CoreServices|g" ${worksrcpath}/portaudio.pc
  reinplace -E "s|\@THREAD_CFLAGS\@||g" ${worksrcpath}/portaudio.pc
}

post-destroot {
  xinstall -c -d  ${destroot}/${prefix}/lib/pkgconfig
  xinstall -c -m 644 ${worksrcpath}/portaudio.pc ${destroot}/${prefix}/lib/pkgconfig
  xinstall -c -d  ${destroot}/${prefix}/share/doc/${name}
  xinstall -c -m 644 ${worksrcpath}/README.txt  \
                     ${worksrcpath}/COMPILING.DARWIN \
                     ${worksrcpath}/LICENSE.txt \
                     ${worksrcpath}/V19-devel-readme.txt \
                     ${destroot}/${prefix}/share/doc/${name}
}

