# $Id$

PortSystem 1.0

name			wxWidgets-devel
version			2007-04-16
categories		graphics devel
platforms		darwin
maintainers		jwa@macports.org mww@macports.org
description		mature cross-platform C++ GUI framework
long_description	wxWidgets is a mature open-source cross-platform C++ \
			GUI framework for MacOS, Unix, Linux, Windows. It can \
			make use of a variety of native widget sets as well as \
			its own widget set: MacOS, GTK+, Motif, WIN32. \
			wxWidgets will even run on embedded systems using \
			Linux and X11.

homepage		http://www.wxwidgets.org/
distname		wxWidgets
master_sites		http://biolpc22.york.ac.uk/pub/CVS_HEAD/v2/files/
#master_sites		http://biolpc22.york.ac.uk/pub/${version}/
use_bzip2		yes

distfiles		${distname}-${version}${extract.suffix}
dist_subdir		${distname}/${version}
checksums		${distname}-${version}${extract.suffix} \
				md5 eb0479642ed509e3f5cc38d223ff19e7 \
			${distname}-${version}${extract.suffix} \
				sha1 ed030855fe46a375bbec06c7cba57b72b62c5f2e \
			${distname}-${version}${extract.suffix} \
				rmd160 75c919ea12b9de45cef5e000648318259c4c926e

depends_lib		port:jpeg \
			port:tiff \
			port:libpng \
			port:zlib \
			port:libiconv \
			port:expat \
			port:libsdl \
			port:libsdl_mixer

#set worksrcdir	build
set worksrcdir	${distname}-${version}/build

extract.only	${distname}-${version}${extract.suffix}

set sub			wx-devel
configure.cmd	../configure
configure.env	LDFLAGS="-L${build.dir}/lib"
configure.args	--mandir=${prefix}/share/man \
			--libdir=${prefix}/lib/${sub} \
			--bindir=${prefix}/lib/${sub}/bin \
			--includedir=${prefix}/include/${sub} \
			--datadir=${prefix}/share/${sub} \
			--with-libiconv-prefix=${prefix} \
			--with-libjpeg \
			--with-libtiff \
			--with-libpng \
			--with-zlib \
			--with-sdl \
			--with-opengl \
			--with-mac \
			--disable-sdltest \
			--enable-unicode \
			--enable-display \
			--without-subdirs \
			--enable-monolithic

platform darwin 8 {
	configure.env-append	CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
}

set contrib		"gizmos stc ogl"

build.target

post-build {
#		system "cd ${build.dir} && make -C contrib/src/gizmos"
#		system "cd ${build.dir} && make -C contrib/src/stc"
#		system "cd ${build.dir} && make -C contrib/src/ogl"
}

post-destroot {
#		system "cd ${destroot.dir} && make -C contrib/src/gizmos install ${destroot.destdir}"
#		system "cd ${destroot.dir} && make -C contrib/src/stc install ${destroot.destdir}"
#		system "cd ${destroot.dir} && make -C contrib/src/ogl install ${destroot.destdir}"

	xinstall -d -m 755 ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${workpath}/${distname}-${version} \
		install-mac.txt install-mgl.txt install-motif.txt \
		INSTALL-OS2.txt install-x11.txt readme-cocoa.txt \
		readme-gtk.txt readme-mac.txt \
		readme-mgl.txt readme-motif.txt readme-x11.txt \
		${destroot}${prefix}/share/doc/${name}
}
