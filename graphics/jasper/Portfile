# $Id$

PortSystem		1.0
name			jasper
version			1.701.0
categories		graphics
maintainers		nomaintainer@macports.org
description		Library for manipulating JPEG-2000 images
long_description \
	The JasPer Project is an open-source initiative to provide a free \
	software-based reference implementation of the codec specified in the \
	JPEG-2000 Part-1 standard (i.e., ISO/IEC 15444-1).

platforms		darwin

homepage		http://www.ece.uvic.ca/~mdadams/jasper/
master_sites		${homepage}/software/
use_zip			yes

checksums		md5 22a9f74fc880e38dd125c60aa4e4ce97

depends_lib		lib:libjpeg:jpeg

patchfiles		patch-src_libjasper_base_jas_cm.c

configure.env		CPPFLAGS="-I${prefix}/include" LDFLAGS="-L${prefix}/lib"
configure.args		--enable-shared --disable-static --disable-opengl

post-destroot {
	xinstall -m 755 -d ${destroot}/${prefix}/share/doc
	file copy ${worksrcpath}/doc ${destroot}/${prefix}/share/doc/${name}
}

variant jiv {
	depends_lib		lib:libglut:glut
	configure.args-delete	--disable-opengl
	configure.args-append	--enable-opengl
	configure.env-delete	CPPFLAGS="-I${prefix}/include"
	configure.env-append	CPPFLAGS="-I${prefix}/include \
					-I${x11prefix}/include"
}
