--- Makefile.orig	2024-01-30 00:08:25
+++ Makefile	2024-12-13 19:19:32
@@ -89,7 +89,7 @@
 
 app: $(APPNAME)
 all: app lib
-lib: lib$(APPNAME).a
+lib: lib$(APPNAME).a lib$(APPNAME).dylib
 
 WGET_CMD = @echo "run make with WGET_CMD=wget to allow file downloads" ; echo "DISABLED:" wget
 
@@ -186,9 +186,13 @@
 
 ifeq ($(SIMD),select)
 lib$(APPNAME).a: $(SIMDOBJ:%=lib%)
+lib$(APPNAME).dylib: $(SIMDOBJ:%=lib%)
+	$(CC) $(CFLAGS_APP) -fPIC -shared $(JPEGLIB2) $(SIMDOBJ) $(LDFLAGS) -o $@ $(SIMDOBJ:%=lib%)
 endif
 lib$(APPNAME).a: libjpegqs.o
 	$(AR) -rsc $@ $^
+lib$(APPNAME).dylib: libjpegqs.o
+	$(CC) $(CFLAGS_APP) -fPIC -shared $(JPEGLIB2) $(SIMDOBJ) $(LDFLAGS) -o $@ $^
 
 libjpegqs.o: libjpegqs.c $(SRCDEPS)
 	$(CC) $(CFLAGS_APP) -c -o $@ $<
