# $Id$

PortSystem		1.0
name			fontconfig
version			2.4.2
categories		graphics
maintainers		ryandesign@macports.org openmaintainer@macports.org
description		An XML-based font configuration API for X Windows
long_description \
	Fontconfig is a library for configuring and customizing font access.

platforms		darwin

homepage		http://fontconfig.org/
master_sites	${homepage}release/

checksums		md5 f035852f521b54677f2b5c9e2f6d54a4 \
				sha1 cd5e30625680a0435563b586275156eaf8d0d34a \
				rmd160 c953020a5193500080c9eceef47b76e61c41b188

depends_lib		port:expat port:freetype

configure.env	CPPFLAGS=-I${prefix}/include LDFLAGS=-L${prefix}/lib
configure.args	--mandir=${prefix}/share/man \
				--with-add-fonts=${x11prefix}/lib/X11/fonts

post-activate	{
	system "${prefix}/bin/fc-cache -fv /usr/share/fonts /Library/Fonts /System/Library/Fonts ${x11prefix}/lib/X11/fonts ${prefix}/share/fonts"
}

variant vera {
	depends_build-append	path:${prefix}/share/fonts/Vera.ttf:bitstream-vera
	post-destroot {
		xinstall -m 644 ${prefix}/share/doc/bitstream-vera/local.conf \
			${destroot}/${prefix}/etc/fonts
	}
}

platform macosx {
	configure.args-delete	--with-add-fonts=${x11prefix}/lib/X11/fonts
	configure.args-append	--with-add-fonts=/Library/Fonts,/Network/Library/Fonts,/System/Library/Fonts,${x11prefix}/lib/X11/fonts,${prefix}/share/fonts
}

