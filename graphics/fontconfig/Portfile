# $Id$

PortSystem          1.0

name                fontconfig
version             2.4.2
categories          graphics
maintainers         ryandesign openmaintainer@macports.org
homepage            http://fontconfig.org/
platforms           darwin

description \
	An XML-based font configuration API for X Windows

long_description \
	Fontconfig is a library for configuring and customizing font access.

master_sites \
	sourceforge:gimp-win \
	http://www.ryandesign.com/tmp/ \
	${homepage}release/ \
	ftp://ftp.sunfreeware.com/pub/freeware/SOURCES/

checksums \
	md5 f035852f521b54677f2b5c9e2f6d54a4 \
	sha1 cd5e30625680a0435563b586275156eaf8d0d34a \
	rmd160 c953020a5193500080c9eceef47b76e61c41b188

depends_lib \
	port:expat \
	port:freetype

configure.args \
	--mandir=${prefix}/share/man \
	--with-add-fonts=${x11prefix}/lib/X11/fonts

post-activate {
	system "${prefix}/bin/fc-cache -fv /usr/share/fonts /Library/Fonts /System/Library/Fonts ${x11prefix}/lib/X11/fonts ${prefix}/share/fonts"
}

variant vera {
	depends_build-append \
		path:${prefix}/share/fonts/Vera.ttf:bitstream-vera
	post-destroot {
		xinstall -m 644 ${prefix}/share/doc/bitstream-vera/local.conf \
			${destroot}/${prefix}/etc/fonts
	}
}

platform macosx {
	configure.args-delete \
		--with-add-fonts=${x11prefix}/lib/X11/fonts
	configure.args-append \
		--with-add-fonts=/Library/Fonts,/Network/Library/Fonts,/System/Library/Fonts,${x11prefix}/lib/X11/fonts,${prefix}/share/fonts
}
