# $Id$

PortSystem              1.0
PortGroup               muniversal 1.0
name                    dcmtk
version                 3.6.0
set unpatched_version   [lindex [split ${version} _] 0]
set stripped_version    [string map {. ""} ${unpatched_version}]
categories              graphics
platforms               darwin
license                 {{BSD} {Apache-2.0}}

maintainers             eborisch \
                        openmaintainer

description             The DICOM Toolkit.
long_description        DCMTK is a collection of libraries and applications    \
                        implementing large parts the DICOM standard. It        \
                        includes software for examining, constructing and      \
                        converting DICOM image files, handling offline media,  \
                        sending and receiving images over a network connection,\
                        as well as demonstrative image storage and worklist    \
                        servers. DCMTK is is written in a mixture of ANSI C    \
                        and C++. It comes in complete source code and is made  \
                        available as "open source" software.

homepage                http://dicom.offis.de/dcmtk

master_sites            ftp://dicom.offis.de/pub/dicom/offis/software/dcmtk/dcmtk${stripped_version}/ \
                        http://dicom.offis.de/download/dcmtk/dcmtk${stripped_version}/

distname                ${name}-${unpatched_version}
distfiles               ${distname}${extract.suffix}

checksums               md5     19409e039e29a330893caea98715390e \
                        sha1    469e017cffc56f36e834aa19c8612111f964f757 \
                        rmd160  ad80a4b6cff9ed275e6153036bdce9e2d912721b

depends_lib             port:zlib \
                        port:tiff \
                        port:libpng \
                        port:libxml2 \
                        port:openssl

destroot.target-append  install-lib

use_parallel_build      no

variant llvm description "Use llvm compiler" {
  configure.compiler    llvm-gcc-4.2
}

destroot.args           docdir=${destroot}${prefix}/share/doc/${name}

livecheck.type          regex
livecheck.regex         {dcmtk\-(\d+(?:\.\d+)*).tar.gz}

