# $Id: Portfile,v 1.7 2004/11/05 09:42:00 pguyot Exp $

PortSystem		1.0
name			xfig
version			3.2.4
revision		3
categories		graphics x11
maintainers		pguyot@kallisys.net
description		Facility for Interactive Generation of figures under X11
long_description	\
				Xfig is a menu-driven tool that allows the user to draw and \
				manipulate objects interactively in an X window.  The \
				resulting pictures can be saved, printed on postscript \
				printers or converted to a variety of other formats (e.g. to \
				allow inclusion in LaTeX documents).
homepage		http://www.xfig.org/
platforms		darwin
master_sites	${homepage}/xfigdist/ \
				ftp://www-epb.lbl.gov/xfig/
distname		${name}.${version}
distfiles		${distname}.full${extract.suffix}
checksums		md5 1911fc0f733cb2f40336a8d0e82513de
depends_lib		lib:libXaw3d:Xaw3d \
				lib:libpng:libpng \
				lib:libjpeg:jpeg
depends_run		bin:gs:ghostscript \
				bin:fig2dev:transfig
use_xmkmf		yes
patchfiles		patch-Imakefile
post-patch {
	reinplace "s|__PREFIX|${prefix}|g" ${worksrcpath}/Imakefile
	reinplace "s|__DESTROOT|${destroot}|g" ${worksrcpath}/Imakefile
}
destroot.target	install.all install.man
post-destroot {
	# Remove the /usr/X11R6/lib/X11/app-defaults symlink
	# (this could be done by handling symlinks better on images)
	file delete "${destroot}/usr/X11R6/lib/X11/app-defaults"
}
