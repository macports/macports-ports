# $Id$

PortSystem		1.0
name			xfig
version			3.2.5
revision		1
categories		graphics x11
maintainers		pguyot@kallisys.net
description		Facility for Interactive Generation of figures under X11
long_description	\
				Xfig is a menu-driven tool that allows the user to draw and \
				manipulate objects interactively in an X window.  The \
				resulting pictures can be saved, printed on postscript \
				printers or converted to a variety of other formats (e.g. to \
				allow inclusion in LaTeX documents).
homepage		http://xfig.org/
platforms		darwin
master_sites	http://files.xfig.org/ \
				ftp://www-epb.lbl.gov/xfig/
distname		${name}.${version}
distfiles		${distname}.full${extract.suffix}
checksums		md5 fae0c67a3951bd41c057deb63b6aa47a \
				sha1 ce09d1a74dbddf0bc6b20fe9c558db584fbfed17 \
				rmd160 0d5ada9e4b7f1dbd8dab8a09fd5946ec0211904c
depends_lib		port:Xaw3d \
				port:libpng \
				port:jpeg \
				port:zlib
depends_run		bin:gs:ghostscript \
				bin:fig2dev:transfig
use_xmkmf		yes
patchfiles		patch-Imakefile \
				patch-fig.h \
				patch-w_keyboard.c
post-patch {
	reinplace "s|__PREFIX|${prefix}|g" ${worksrcpath}/Imakefile
	reinplace "s|__DESTROOT|${destroot}|g" ${worksrcpath}/Imakefile
}
destroot.target	install.all install.man
post-destroot {
	# Remove the /usr/X11R6/lib/X11/app-defaults symlink
	# (this could be done by handling symlinks better on images)
	file delete "${destroot}/usr/X11R6/lib/X11/app-defaults"
}

livecheck.check	regex
livecheck.regex	{>Xfig/Transfig (.*) Download</a>}
