# $Id $

PortSystem 1.0
name            gd2-nox11
version         2.0.33
categories      graphics
maintainers     ryandesign@macports.org openmaintainer@macports.org
description     GD creates PNG and JPEG images, among other formats
long_description	\
		This is a special version of the gd2 library,	\
		configured to build without X11. It is used	\
		when building graphviz without X11 support.	\
								\
		Note that it is incompatible with the standard	\
		gd2 port, as they install files to the same	\
		places.

platforms       darwin
homepage        http://www.boutell.com/gd/
master_sites    ${homepage}http/ 

distname        gd-${version}
checksums       md5 be0a6d326cd8567e736fbc75df0a5c45

depends_lib     port:libpng	\
                port:jpeg	\
                port:freetype

patchfiles      gdft.c.diff

configure.env   CPPFLAGS=-I${prefix}/include LDFLAGS=-L${prefix}/lib
configure.args	--without-x

platform darwin 6 {
    depends_lib lib:libdl:dlcompat
}

platform darwin {
	post-configure {
		reinplace "s/^\\(hardcode_direct=\\)yes/\\1no/" ${worksrcpath}/libtool
	}
}
