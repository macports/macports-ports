# $Id: Portfile,v 1.4 2004/12/06 08:54:10 blb Exp $

PortSystem			1.0
name				pstoedit
version				3.33
revision			2
categories			graphics
maintainers			blb@pobox.com
description			Translate PostScript and PDF to other vector formats
long_description \
	pstoedit converts Postscript(TM) and PDF files to other vector graphic \
	formats so that they can be edited graphically.

platforms			darwin

homepage			http://home.t-online.de/home/helga.glunz/wglunz/pstoedit/
master_sites		${homepage}

checksums			md5 6a671ef165bf7d1611a2ad3f0499ff5b

depends_lib			lib:libMagick:ImageMagick lib:libplotter:plotutils \
					lib:libpng:libpng lib:libz:zlib
depends_run			bin:gs:ghostscript

configure.env		CPPFLAGS="-I${prefix}/include" LDFLAGS="-L${prefix}/lib"

post-destroot {
	xinstall -m 755 -d ${destroot}/${prefix}/share/man/man1 \
		${destroot}/${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath}/doc pstoedit.1 \
		${destroot}/${prefix}/share/man/man1
	xinstall -m 644 -W ${worksrcpath}/doc pstoedit.htm pstoedit.tex \
		${destroot}/${prefix}/share/doc/${name}
}

variant gnughostscript {
	depends_run-delete	bin:gs:ghostscript
	depends_run-append	bin:gs:gnughostscript
}

variant darwin {
	patchfiles-append		patch-src_dynload.cpp patch-src_Makefile.in \
							patch-configure patch-ltmain.sh
}

platform darwin 6 {
	depends_lib-append		lib:libdl:dlcompat
}

