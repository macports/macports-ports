PortSystem 1.0
name		jpeg
version		6b 
set libver	9
categories	graphics
maintainers	eric@opendarwin.org
distname	jpegsrc.v6b
worksrcdir	${portname}-${portversion}
description	Library for manipulating JPEG images
platforms	darwin freebsd
master_sites	http://www.ijg.org/files/
checksums	md5 dbd5f3b47ed13132f04c685d608a7547
post-build	{ cd ${worksrcpath}
		  system "cc -dynamiclib -install_name \
		  ${prefix}/lib/libjpeg.${libver}.dylib -compatibility_version \
		  ${libver} -all_load libjpeg.a -o libjpeg.${libver}.dylib" }

pre-install	{ system "install -o root -m 755 -d ${prefix}/bin"
		  system "install -o root -m 755 -d ${prefix}/man/man1"
		  system "install -o root -m 755 -d ${prefix}/include"
		  system "install -o root -m 755 -d ${prefix}/lib" }

post-install	{ cd ${worksrcpath}
		  system "install -o root -m 644 -c libjpeg.${libver}.dylib \
		  ${prefix}/lib"
		  system "ln -sf libjpeg.${libver}.dylib \
		  ${prefix}/lib/libjpeg.dylib" }

contents	bin/cjpeg \
		bin/djpeg \
		bin/jpegtran \
		bin/rdjpgcom \
		bin/wrjpgcom \
		man/man1/cjpeg.1 \
		man/man1/djpeg.1 \
		man/man1/jpegtran.1 \
		man/man1/rdjpgcom.1 \
		man/man1/wrjpgcom.1 \
		include/jconfig.h \
		include/jpeglib.h \
		include/jmorecfg.h \
		include/jerror.h \
		lib/libjpeg.9.dylib \
		lib/libjpeg.dylib
