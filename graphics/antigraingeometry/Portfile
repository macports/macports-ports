# $Id: Portfile,v 1.4 2005/05/11 07:52:12 blb Exp $

PortSystem			1.0
name				antigraingeometry
version				2.3
revision			1
categories			graphics devel
maintainers			blb@pobox.com
description			A high quality rendering engine for C++
long_description \
	Anti-Grain Geometry (AGG) is a general purpose graphical toolkit \
	written completely in standard and platform independent C++.  It can be \
	used in many areas of computer programming where high quality 2D \
	graphics is an essential part of the project.  For example, if you \
	render 2D geographic maps AGG is a must.  AGG uses only C++ and standard \
	C runtime functions, such as memcpy, sin, cos, sqrt, etc.  The basic \
	algorithms don't even use C++ Standard Template Library.  Thus, AGG can \
	be used in a very large number of applications, including embedded \
	systems.

platforms			darwin

homepage			http://www.antigrain.com/
master_sites		${homepage}
distname			agg23

checksums			md5 03e01a6a50826531bbea792068334e8b \
					sha1 f0c66b1f69caab63634562c55a497c98bd4ed680

depends_lib			lib:libfreetype.6:freetype lib:libX11:XFree86

patchfiles			patch-Makefile.am

use_autoconf		yes
use_automake		yes
automake.args		--foreign --add-missing --ignore-deps

pre-configure {
	cd ${worksrcpath}
	if {[variant_isset darwin]} {
		system "aclocal -I /usr/share/aclocal"
		system "glibtoolize --force"
	} else {
		system "aclocal"
		system "libtoolize --force"
	}
}

configure.args		LD_TWOLEVEL_NAMESPACE=1 MACOSX_DEPLOYMENT_TARGET="10.3"

build.env			MACOSX_DEPLOYMENT_TARGET="10.3"

post-destroot {
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} README.txt readme \
		${destroot}${prefix}/share/doc/${name}
	file copy ${worksrcpath}/tutorial \
		${destroot}${prefix}/share/doc/${name}
}

# Empty so it gets set for pre-configure
variant darwin {
}

