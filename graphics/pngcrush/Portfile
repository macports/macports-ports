# $Id$

PortSystem 1.0
name			pngcrush	
version			1.6.10
categories      graphics	
description     optimizer for PNG files	
long_description	pngcrush reads in a PNG image, and writes it out \
			again, with the optimum filter_type and zlib_level. \
			It uses brute force (trying filter_type none, and \
			libpng adaptive filtering, with compression levels 3 \
			and 9).  It does the most time-consuming method last \
			in case it turns out to be the best. Optionally, it can \
			remove unwanted chunks or add gAMA and sRGB chunks.
homepage	    http://pmt.sourceforge.net/pngcrush/
platforms	    darwin freebsd
maintainers	    nomaintainer
master_sites	sourceforge:pmt
checksums		md5     375d3119f7dbc53c9c9c6d7764b0fec9 \
				sha1    18835985d715dec37b6806fb9afa07f13129f93f \
				rmd160  eb4e6cdbd826647c387e363226c7a8454fb44dda
use_bzip2		yes

use_configure	no

build.args-append	LD="/usr/bin/gcc-4.0"

destroot {
	xinstall -m 755 -d ${destroot}${prefix}/bin
	xinstall -m 755 ${worksrcpath}/${name} ${destroot}${prefix}/bin
}

platform darwin 8 {
	build.args-append CC="/usr/bin/gcc-4.0 -DPNG_NO_ASSEMBLER_CODE"
}

platform darwin 9 {
	build.args-append CC="/usr/bin/gcc-4.0 -DPNG_NO_ASSEMBLER_CODE"
}
