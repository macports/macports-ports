# $Id: Portfile,v 1.4 2003/10/29 12:23:50 mww Exp $

PortSystem 1.0
name		smpeg
version		0.4.4
revision	2
categories	devel
maintainers	mww@opendarwin.org
description	a general purpose MPEG video/audio player/library
long_description	smpeg is a general purpose MPEG video/audio player and \
			library programmed by Loki entertainment and others

homepage	http://www.lokigames.com/development/smpeg.php3
master_sites	ftp://ftp.lokigames.com/pub/open-source/smpeg/ \
		http://distfiles.opendarwin.org/:lt
distfiles-append	ltconfig13:lt \
			ltmain13:lt
extract.only	${distname}${extract.sufx}

checksums	${distname}${extract.sufx} \
			md5 59c76ac704088ef5539210190c4e1fe3 \
		ltconfig13 md5 ea53f42a550c9f9e653758a8ed91574e \
		ltmain13 md5 e094ae92724c4015dbab97de151c2525

depends_lib	lib:libSDL:libsdl

post-patch {
	system "cp ${distpath}/ltconfig13 ${worksrcpath}/ltconfig"
	system "cp ${distpath}/ltmain13 ${worksrcpath}/ltmain.sh"
}

configure.args	--without-x \
		--disable-gtktest \
		--disable-gtk-player \
		--disable-static \
		--mandir=${prefix}/share/man

post-configure	{ reinplace "s|gcc|g++|g" ${worksrcpath}/Makefile }

build.target
