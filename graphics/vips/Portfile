# $Id$
PortSystem 1.0
name		vips
version		7.12.5
description	VIPS is an image processing library.
long_description	VIPS is an image processing library. It's good for \
			large images and for colour.
maintainers	nomaintainer
categories	graphics
platforms	darwin 
homepage	http://www.vips.ecs.soton.ac.uk/
master_sites	${homepage}/vips-7.12/
checksums	md5 94bee1c2770cd7da63faa3c75f8c381f \
		sha1 be7d81e453e847dbd8df2e4d7f3ea28caa70b008

depends_build	port:swig \
		bin:perl:perl5.8 \
		port:p5-xml-parser 

depends_lib	lib:libfftw3:fftw-3 \
		lib:libglib.2:glib2 \
		lib:libjpeg:jpeg \
		lib:libpng:libpng \
		lib:libtiff:tiff \
		port:ImageMagick \
		port:OpenEXR \
		port:lcms \
		port:libexif \
		port:liboil \
		port:libxml2 

configure.args	--mandir=${prefix}/share/man 
configure.cppflags-append "-L${prefix}/lib"
configure.cflags-append "-no-cpp-precomp -flat_namespace -undefined suppress"
 
post-destroot	{
	# we have to remove these because of clashes on non-case-sensitive FSes.
	file delete -force ${destroot}${prefix}/share/doc/vips/html/man/IM_RINT.3.html
	file delete -force ${destroot}${prefix}/share/doc/vips/html/man/IM_MIN.3.html
	file delete -force ${destroot}${prefix}/share/doc/vips/html/man/IM_MAX.3.html

	file delete -force ${destroot}${prefix}/share/man/man3/IM_RINT.3
	file delete -force ${destroot}${prefix}/share/man/man3/IM_MIN.3
	file delete -force ${destroot}${prefix}/share/man/man3/IM_MAX.3
}
