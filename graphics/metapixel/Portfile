# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0

name                    metapixel
version                 1.0.2
revision                4
categories              graphics
platforms               darwin
maintainers             free.fr:fclaire

description             A Photomosaic Generator

long_description        Metapixel is a program for generating photomosaics. \
                        It can generate classical photomosaics, in which the \
                        source image is viewed as a matrix of equally sized \
                        rectangles for each of which a matching image is \
                        substitued, as well as collage-style photomosaics, \
                        in which rectangular parts of the source image at \
                        arbitrary positions (i.e. not aligned to a matrix) \
                        are substituted by matching images.

homepage                http://www.complang.tuwien.ac.at/schani/metapixel/
master_sites            ${homepage}files/

checksums               md5     af5d77d38826756af213a08e3ada9941 \
                        sha1    f917aec91430b1bdbcc7b3dea29cb93f15a04c77 \
                        rmd160  7343c66e925e5b55cfe63624be18159717b1295e

depends_lib             port:jpeg \
                        port:giflib \
                        port:libpng

patchfiles              patch-Makefile.diff \
                        patch-rwimg-Makefile.diff

use_configure           no

variant universal {}
if {[variant_isset universal]} {
    set archflags       ${configure.universal_cflags}
} else {
    set archflags       ${configure.cc_archflags}
}

build.args              PREFIX=${prefix} \
                        CC="${configure.cc}" \
                        MACOS_CCOPTS="${archflags}" \
                        MACOS_LDOPTS="${archflags}"

destroot.destdir        PREFIX=${destroot}${prefix} \
                        CC="${configure.cc}" \
                        MACOS_CCOPTS="${archflags}" \
                        MACOS_LDOPTS="${archflags}"
