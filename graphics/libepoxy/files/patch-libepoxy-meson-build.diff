diff --git src/meson.build.orig src/meson.build
index e19a918..b917071 100644
--- src/meson.build.orig
+++ src/meson.build
@@ -106,16 +106,31 @@ if build_egl and egl_dep.found() and egl_dep.type_name() == 'pkgconfig'
 endif
 
 pkg = import('pkgconfig')
-pkg.generate(
-  libraries: libepoxy,
-  name: 'epoxy',
-  description: 'GL dispatch library',
-  version: meson.project_version(),
-  variables: [
-    'epoxy_has_glx=@0@'.format(epoxy_has_glx),
-    'epoxy_has_egl=@0@'.format(epoxy_has_egl),
-    'epoxy_has_wgl=@0@'.format(epoxy_has_wgl),
-  ],
-  filebase: 'epoxy',
-  requires_private: ' '.join(gl_reqs),
-)
+if gl_reqs.length() > 0
+  pkg.generate(
+    libraries: libepoxy,
+    name: 'epoxy',
+    description: 'GL dispatch library',
+    version: meson.project_version(),
+    variables: [
+      'epoxy_has_glx=@0@'.format(epoxy_has_glx),
+      'epoxy_has_egl=@0@'.format(epoxy_has_egl),
+      'epoxy_has_wgl=@0@'.format(epoxy_has_wgl),
+    ],
+    filebase: 'epoxy',
+    requires_private: ' '.join(gl_reqs),
+  )
+else
+  pkg.generate(
+    libraries: libepoxy,
+    name: 'epoxy',
+    description: 'GL dispatch library',
+    version: meson.project_version(),
+    variables: [
+      'epoxy_has_glx=@0@'.format(epoxy_has_glx),
+      'epoxy_has_egl=@0@'.format(epoxy_has_egl),
+      'epoxy_has_wgl=@0@'.format(epoxy_has_wgl),
+    ],
+    filebase: 'epoxy',
+  )
+endif
