# -*- coding: utf-8; mode: tcl; tab-width: 4; truncate-lines: t; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                makeicns
version             1.4.1
categories          graphics
maintainers         mk pixilla
platforms           darwin
license             MIT

description         This program lets you convert all kinds of images to Apple icns format on the command line.
long_description    ${description}

homepage            http://bitbucket.org/mkae/makeicns
master_sites        ${homepage}/downloads

livecheck.type      regex
livecheck.url       ${homepage}/downloads
livecheck.regex     "/mkae/makeicns/src/.*>(1\\.\\d+)<"

use_bzip2           yes

distname            ${name}-${version}
worksrcdir          ${name}

checksums           md5     e62f6453152764dd42fec10dce949304 \
                    sha1    1dfae1de3643b15385dcf8e7ef3c24326e0d8d45 \
                    rmd160  3c3d9e6a53e11878ee33c0fae031463f90f57ac6

use_configure       no

variant universal {
    build.env-append BUILD_UNIVERSAL=yes
}

if {[variant_isset universal]} {
    set archflags ${configure.universal_cflags}
} else {
    set archflags ${configure.cc_archflags}
}

build.env-append    CC=${configure.cc} \
                    CXX=${configure.cxx}

if {${configure.sdkroot} != ""} {
    build.env-append SDK=${configure.sdkroot}
}

destroot {
    xinstall ${worksrcpath}/${name} ${destroot}${prefix}/bin/${name}
}
