# $Id$

PortSystem 1.0
name		libpng
version		1.2.16
categories	graphics
maintainers	ryandesign@macports.org waqar@macports.org
description	Library for manipulating PNG images
long_description	\
	Libpng was written as a companion to the PNG specification, as a  \
	way to reduce the amount of time and effort it takes to support   \
	the PNG file format in application programs.  Most users will not \
	have to modify the library significantly, advanced users may want \
	to modify it more.  The library was coded for both users.  All    \
	attempts were made to make it as complete as possible, while      \
	keeping the code easy to understand.  Currently, this library     \
	only supports C.  Support for other languages is being considered.
platforms	darwin openbsd freebsd sunos linux
homepage	http://www.libpng.org/pub/png/
use_bzip2	yes
master_sites	sourceforge
checksums	md5 7a1ca4f49bcffdec60d50f48460642bd \
			sha1 0b37d42d2ae33c22093d46a28e6b8fa21eb4c1da \
			rmd160 a328e6f4c8b10480b6f13d4fdcb5863fd42c357b

depends_lib	port:zlib

configure.args	--mandir=${prefix}/share/man
configure.env	CFLAGS="-I${prefix}/include" LDFLAGS="-L${prefix}/lib"

if {[llength [info commands configure.universal_ldflags-append]] > 0} {
    configure.universal_ldflags-append  -L${prefix}/lib
    configure.universal_cflags-append   -I${prefix}/include
} else {
    variant universal {
        return -code error "You need to be running MacPorts 1.4.0 or higher to \
        use this variant (universal)."
    }
}

test.run        yes
test.target     check

post-destroot	{
	system "ranlib ${destroot}${prefix}/lib/libpng12.a"
	xinstall -d -m 755 ${destroot}${prefix}/share/${name}
	file copy ${worksrcpath}/example.c ${destroot}${prefix}/share/${name}
}

platform darwin 8 {
	configure.env-append    CC=/usr/bin/gcc-4.0 \
                            CXX=/usr/bin/g++-4.0 \
                            CPP=/usr/bin/cpp-4.0
}
