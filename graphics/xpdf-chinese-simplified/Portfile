# $Id$
PortSystem 1.0
name			xpdf-chinese-simplified
version			2004-jul-27
description		Xpdf character mapping for simplified Chinese
long_description \
	Xpdf character mapping for simplified Chinese

maintainers		ricci openmaintainer
categories		graphics print
platforms		darwin 
homepage		http://www.foolabs.com/xpdf/

master_sites \
    ftp://ftp.funet.fi/pub/TeX/CTAN/support/xpdf/ \
    ftp://ctan.unsw.edu.au/tex-archive/support/xpdf/ \
    ftp://ftp.tex.ac.uk/tex-archive/support/xpdf/ \
    ftp://ftp.kddlabs.co.jp/CTAN/support/xpdf/ \
    ftp://ftp.meiji.ac.jp/pub/TeX/CTAN/support/xpdf/ \
    ftp://ctan.tug.org/tex-archive/support/xpdf/ \
    ftp://ftp.dante.de/tex-archive/support/xpdf/ \
    ftp://gd.tuwien.ac.at/publishing/tex/CTAN/support/xpdf/ \
    ftp://ftp.ntnu.no/pub/tex/CTAN/support/xpdf/ \
    ftp://www.dnsbalance.ring.gr.jp/pub/text/CTAN/support/xpdf/ \
    http://www.t.ring.gr.jp/archives/text/CTAN/support/xpdf/ \
    ftp://ftp.chg.ru/pub/TeX/CTAN/support/xpdf/ \
    ftp://ftp.foolabs.com/pub/xpdf/

## xpdf-chinese-simplified-2004-jul-27.tar.gz
distfiles	${name}-${version}.tar.gz

worksrcdir	${name}

checksums    md5 6c3b04008000948e62530b8582e7f37c

depends_lib	 port:xpdf

configure {}

build {
    reinplace "s|/usr/local/share/xpdf/|${prefix}/share/xpdf/xpdf-|g" ${worksrcpath}/add-to-xpdfrc
}

destroot {
	xinstall -m 755 -d ${destroot}${prefix}/share/xpdf/${name}
	xinstall -m 755 -d ${destroot}${prefix}/share/xpdf/${name}/CMap
	eval xinstall -m 644 [glob ${worksrcpath}/CMap/*] ${destroot}${prefix}/share/xpdf/${name}/CMap
	eval xinstall -m 644                            \
		${worksrcpath}/Adobe-GB1.cidToUnicode       \
        ${worksrcpath}/EUC-CN.unicodeMap            \
        ${worksrcpath}/GBK.unicodeMap               \
        ${worksrcpath}/ISO-2022-CN.unicodeMap       \
		${worksrcpath}/README                       \
        ${worksrcpath}/add-to-xpdfrc                \
		${destroot}${prefix}/share/xpdf/${name}/

}

variant autoactivate description automatically activate the character mappings {
	## used in post-activate (below)
}


post-activate {
	if {[variant_isset autoactivate]} {
		system "cat ${prefix}/share/xpdf/${name}/add-to-xpdfrc >> ${prefix}/etc/xpdfrc"
		ui_msg "\"Added ${prefix}/share/xpdf/${name}/add-to-xpdfrc\" to \"${prefix}/etc/xpdfrc\". \
			NOTE: uninstall does not attempt to remove these lines"
	} else {
	ui_msg " \
		Activate these character mappings by adding \"${prefix}/share/xpdf/${name}/add-to-xpdfrc\" to ${prefix}/etc/xpdfrc or ~/.xpdfrc \
		The \"autoactivate\" variant does this automatically"
	}
	
}        
        
