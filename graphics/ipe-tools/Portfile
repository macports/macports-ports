# $Id$

PortSystem 1.0

name                    ipe-tools
version                 20091019
categories              graphics
maintainers             jacobs-university.de:m.thon
description             Tools for the Ipe extensible drawing editor
long_description        \
                        The following tools for the Ipe extensible drawing \
                        editor are provided: \
                        - svgtoipe \
                        - pdftoipe \
                        - figtoipe \
                        - ipe5toxml
homepage                http://tclab.kaist.ac.kr/ipe/
platforms               darwin
master_sites            http://sourceforge.net/projects/ipe7/files/tools
set svgtoipe-vers       20091018
set pdftoipe-vers       20091014
set figtoipe-vers       20080517
set ipe5toxml-vers      20051114

distfiles               svgtoipe-${svgtoipe-vers}${extract.suffix} \
                        pdftoipe-${pdftoipe-vers}${extract.suffix} \
                        figtoipe-${figtoipe-vers}${extract.suffix} \
                        ipe5toxml-${ipe5toxml-vers}${extract.suffix}
checksums               svgtoipe-${svgtoipe-vers}${extract.suffix} \
                            md5 804701a5b01a49b7a0818022a9e002d5 \
                            sha1 3ad43a6b9382c11dd457abb6e81f8ab040f335dd \
                            rmd160 af86d6a4b2a3b68c16b17ec76bec12a7db5b3ee0 \
                        pdftoipe-${pdftoipe-vers}${extract.suffix} \
                            md5 2ed474254ff8ad1f8f48115e56acb691 \
                            sha1 7179a12d677f2452726384e0dc2ae25c3f77dfaf \
                            rmd160 82938e26a72989f12adf5a25d51699b5bde050e7 \
                        figtoipe-${figtoipe-vers}${extract.suffix} \
                            md5 2db958443d8dc7e4a8f73d084e74177b \
                            sha1 61aa001c8c32449dac374031108e20c29db2f8ea \
                            rmd160 385a22e8b856c83b8a8169a3f9d87ef553ed7761 \
                        ipe5toxml-${ipe5toxml-vers}${extract.suffix} \
                            md5 abd4731122aad4a7828cc429a3b7e01c \
                            sha1 23cb8b40f1aa8a9bc4904d295b08fe0293cda7fc \
                            rmd160 44c22367e3ef3cb4607310d15af51f527b006be0
depends_lib             port:poppler \
                        port:py26-pil
use_configure           no
use_parallel_build      no

eval build.env          CPPFLAGS+='${configure.cppflags}' \
                        CFLAGS+='${configure.cppflags} ${configure.cflags} ${configure.cc_archflags}' \
                        CXXFLAGS+='${configure.cxxflags} ${configure.cxx_archflags}' \
                        LDFLAGS+='${configure.cc_archflags}' \
                        CC=${configure.cc} CXX=${configure.cxx}

build {
        system "cd ${workpath}/figtoipe-${figtoipe-vers} && ${build.env} ${build.cmd} ${build.target} CXX=${configure.cxx}"
        system "cd ${workpath}/ipe5toxml && ${build.env} ${build.cmd}"
        system "cd ${workpath}/pdftoipe-${pdftoipe-vers} && ${build.env} ${build.cmd}"
}

destroot {
        xinstall -m 755 ${workpath}/figtoipe-${figtoipe-vers}/figtoipe ${destroot}${prefix}/bin
        xinstall -m 644 ${workpath}/figtoipe-${figtoipe-vers}/figtoipe.1 ${destroot}${prefix}/share/man/man1
        xinstall -m 755 ${workpath}/ipe5toxml/ipe5toxml ${destroot}${prefix}/bin
        xinstall -m 755 ${workpath}/pdftoipe-${pdftoipe-vers}/pdftoipe ${destroot}${prefix}/bin
        xinstall -m 644 ${workpath}/pdftoipe-${pdftoipe-vers}/pdftoipe.1 ${destroot}${prefix}/share/man/man1
        xinstall -m 755 ${workpath}/svgtoipe-${svgtoipe-vers}/svgtoipe ${destroot}${prefix}/bin
}
