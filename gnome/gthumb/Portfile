# $Id$

PortSystem              1.0

name                    gthumb
version                 2.10.11
set branch              [join [lrange [split ${version} .] 0 1] .]
description             Image viewer and browser for the gnome desktop.
long_description        ${description}
maintainers             nomaintainer
categories              gnome
platforms               darwin
homepage                http://gthumb.sourceforge.net/
master_sites            gnome:sources/gthumb/${branch}
use_bzip2               yes

checksums           md5     498c583800a05593f7493e8f27991c7d \
                    sha1    a9c133f3a652249329da8b5be8ff08dfec0ded9f \
                    rmd160  ceaef54c96cc6dbea23fe6c461d26b685b13778a

depends_build \
    port:gnome-doc-utils \
    path:bin/perl:perl5 \
    port:pkgconfig

depends_lib \
    port:libgphoto2 \
    port:avahi \
    port:esound \
    port:gnome-keyring \
    port:gnome-vfs \
    port:howl \
    port:libart_lgpl \
    port:libexif \
    port:libgnomeui \
    port:libxslt \
    port:popt

configure.args          --disable-scrollkeeper
configure.cflags-append -no-cpp-precomp
configure.cflags-append -flat_namespace
configure.cflags-append "-undefined suppress"

post-activate {
    system "scrollkeeper-update"
    system "gtk-update-icon-cache -f -t ${prefix}/share/icons/hicolor"
}

livecheck.type          regex
livecheck.url           http://ftp.gnome.org/pub/GNOME/sources/gthumb/${branch}
livecheck.regex         ${name}-(\[0-9.\]+)\\.tar
