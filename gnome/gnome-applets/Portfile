# $Id$
PortSystem 1.0
name		gnome-applets
version		2.18.0
description	GNOME panel applets.
long_description        This package contains applets for use with the \
			GNOME panel.  
maintainers	rhwood openmaintainer@macports.org
categories	gnome
platforms	darwin 
homepage	http://www.gnome.org/
master_sites    gnome:sources/gnome-applets/2.18/
checksums	md5 db3ef99c00335798f30fc0a9162c0257 \
			sha1 7bec1f642e827634f74859e81e1502799d3c05a2 \
			rmd160 c9a18c717fd01ede9476a70784a8522968e52211

depends_lib \
        lib:libatk-1.0:atk bin:gconftool-2:gconf lib:libgettextlib:gettext \
        lib:libglib-2.0:glib2 lib:libgnomevfs-2:gnome-vfs lib:libgtk-x11-2.0:gtk2 \
        lib:libgnomecanvas-2:libgnomecanvas lib:libart_lgpl_2:libart_lgpl \
        lib:libbonobo-2:libbonobo lib:libbonoboui-2:libbonoboui port:Xft2 \
        lib:libglade-2.0:libglade2 lib:libgnome-2:libgnome lib:libgnomeui-2:libgnomeui \
        bin:orbit-idl-2:orbit2 port:libxml2 port:libxslt bin:perl:perl5.8 \
        lib:libpangoft2-1.0:pango bin:pkg-config:pkgconfig lib:libexpat:expat \
        port:fontconfig port:freetype port:gnome-doc-utils lib:libjpeg:jpeg \
        lib:libiconv:libiconv lib:libpng:libpng lib:libtiff:tiff port:xrender \
        port:audiofile port:esound port:gnome-keyring port:cairo port:zlib \
	port:gail port:gnome-panel port:libwnck port:libxklavier port:p5-xml-parser \
	port:popt port:startup-notification port:libgnomekbd \
	port:dbus \
	port:dbus-glib

use_bzip2 	yes

#patchfiles \
#        patch-libgweather-weather.c
#        patch-libgweather-weather-met.c

#patchfiles \
#	patch-Makefile.in \
#	patch-configure \
#	patch-libgweather-weather.c \
#	patch-libgweather-weather-met.c

post-patch	{
	# in 2.18.0 everything is going haywire on the doc builds
	# this is the cheap workaround
	file delete -force ${worksrcpath}/stickynotes/docs/??
	file delete -force ${worksrcpath}/mixer/docs/??
	file delete -force ${worksrcpath}/drivemount/help/??
	file delete -force ${worksrcpath}/multiload/docs/??
	file delete -force ${worksrcpath}/*/docs/??
	file delete -force ${worksrcpath}/*/help/??
}

configure.env	GMSGFMT=${prefix}/bin/msgfmt \
		CFLAGS="-I${prefix}/include -I/usr/include" \
		CPPFLAGS="-I${prefix}/include -I/usr/include"

configure.args  --mandir=${prefix}/share/man \
		--with-gstreamer=0.10 \
		--without-hal \
		--disable-weather \
		--disable-scrollkeeper

post-activate {
	system "scrollkeeper-update"
}
