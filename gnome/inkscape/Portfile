# $Id$

PortSystem 1.0

name		inkscape
version		0.45.1
revision	1
maintainers	nomaintainer
categories	gnome graphics
platforms	darwin
homepage	http://www.inkscape.org

description	Inkscape is an open source SVG editor.
long_description\
	Inkscape is an open source SVG editor with \
	capabilities similar to Illustrator, CorelDraw, \
	Visio, etc. Supported SVG features include basic \
	shapes, paths, text, alpha blending, transforms, \
	gradients, node editing, svg-to-png export, \
	grouping, and more.

master_sites    sourceforge
checksums       md5 1ac63dfd5d78a676599bf5cf6d22e493 \
		sha1 f3df9eafc0fdfcc5f5024ea4bec4d7c477698380

depends_lib	\
		port:libgnomeprintui \
		port:boehmgc \
		port:gtkmm \
		port:gnome-vfs \
		port:libxslt \
		port:lcms \
		port:dbus \
		port:dbus-glib \
		port:py25-numpy \
		port:py25-xml \
		port:libcroco

patchfiles	patch-configure.diff \
		patch-src_conn-avoid-ref.cpp.diff \
		patch-src_extension_script_inkscape_py_wrap.cpp.diff

configure.args	\
	--mandir=${prefix}/share/man \
	--with-xft \
	--with-gnome-print \
	--with-gnome-vfs \
	--with-perl \
	--with-python \
	--enable-lcms \
	--enable-inkboard

configure.env	PYTHON=${prefix}/bin/python2.5

default_variants \
    disable_debugging

variant disable_debugging conflicts enable_debugging {
    # this variant strips the executables saving @200MB of disk space
    # at the cost of not being able to get meaningful debugging information
    # in the event of an application crash
    post-destroot {
        system "strip ${destroot}${prefix}/bin/inkscape"
        system "strip ${destroot}${prefix}/bin/inkview"
    }
}

variant enable_debugging conflicts disable_debugging {
    # does nothing but offer a counter-point to disable_debugging
}

post-patch {
	reinplace "s|\"python-interpreter\", \"python\"|\"python-interpreter\", \"${prefix}/bin/python2.5\"|g" ${worksrcpath}/src/extension/implementation/script.cpp
}
