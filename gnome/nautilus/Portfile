# $Id$

PortSystem 1.0

name		nautilus
version		2.24.2
set branch  [join [lrange [split ${version} .] 0 1] .]
description	The GNOME filemanager
long_description       	Nautilus is the official file manager for the \
			GNOME desktop. It is designed to be primarly a file manager, \
			but there are support for web and file viewing too.
maintainers	nomaintainer
categories	gnome
platforms	darwin
homepage	http://www.gnome.org/
master_sites    gnome:sources/${name}/${branch}/
checksums	md5     783e5f7be6391d6c46b4725e38af475a \
		sha1    9bc2cf110ae50d69633095aa8115cf89c095ef42 \
		rmd160  a0159b7a6814a731bdbbcee33f4c6aafaee4c8ef

depends_lib	\
	port:rarian \
	port:esound \
	port:libgnomeui \
	port:orbit2 \
	port:libexif \
	port:librsvg \
	port:gnome-desktop \
	port:eel \
	port:gnome-keyring
depends_run	\
	port:desktop-file-utils \
	port:shared-mime-info

use_bzip2 	yes

patchfiles  patch-nautilus-emblem-utils.c.diff \
            patch-nautilus-file.c.diff

configure.args  --mandir=${prefix}/share/man \
		--disable-update-mimedb

post-activate {
    system "${prefix}/bin/update-desktop-database -q ${prefix}/share/applications; true"
    system "${prefix}/bin/update-mime-database ${prefix}/share/mime; true"
}

livecheck.check regex
livecheck.url   http://ftp.gnome.org/pub/gnome/sources/${name}/${branch}/
livecheck.regex {LATEST-IS-(\d+(?:\.\d+)*)}
