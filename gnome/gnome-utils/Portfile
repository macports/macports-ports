# $Id: Portfile,v 1.23 2006/05/05 10:38:09 rhwood Exp $
PortSystem 1.0
name		gnome-utils
version		2.14.0
revision	0
description	Session component for the GNOME 2 desktop
long_description        Session component for the GNOME 2.0 desktop.
maintainers	macports-dev@lists.macosforge.org
categories	gnome
platforms	darwin 
homepage	http://www.gnome.org/
master_sites    gnome:sources/gnome-utils/2.14/
checksums	md5 d1d16ff6bfc1f6ddc110d18ec4dfdbfa \
		sha1 96dc3d95ab6ea0057a081403146209f4b7657034 \
		rmd160 799c47e836ed478734e3c42359b0c97fa3e3f319
depends_lib     lib:gnome-session:gnome-session \
		lib:libgnomeprintui:libgnomeprintui \
		port:gnome-panel
#patchfiles	patch_logrtns.c
use_bzip2 	yes
configure.args  --mandir=${prefix}/share/man \
		--disable-scrollkeeper
configure.env   CPPFLAGS="-L${prefix}/lib -I${prefix}/include" \
		CFLAGS="-undefined suppress -flat_namespace" 

post-extract {
	reinplace "s|-export-dynamic||g" ${worksrcpath}/gnome-screenshot/Makefile.in
}

post-activate	{
	system "scrollkeeper-update"
}

platform darwin 7 {
	depends_lib-append lib:libgnuregex:gnuregex
	reinplace "s|gnuregex.h|regex.h|g" ${worksrcpath}/gsearchtool/gsearchtool-support.c
}
