# $Id: Portfile,v 1.3 2003/12/31 17:04:58 olegb Exp $
PortSystem 1.0
name		abiword2
version		2.0.2
description	A word processor with gnome support.
long_description        A word processor with gnome support.
maintainers	olegb@opendarwin.org
categories	gnome editors textproc
platforms	darwin 
homepage	http://www.abisource.com/
master_sites    sourceforge:abiword
checksums	md5 bcb7b45b04e285d5a8b82fb13ebaa170
distname	abiword-${version}
worksrcdir	${distname}/abi
depends_lib	lib:libgtk.2:gtk lib:libz.1:zlib lib:libpng.3:libpng \
		lib:libfribidi:fribidi
configure.env   CPPFLAGS="-L${prefix}/lib -I${prefix}/include" \
                CFLAGS="-no-cpp-precomp -flat_namespace -undefined suppress" 
configure.args	--disable-Cocoa --disable-Carbon --mandir=${prefix}/share/man 
use_bzip2	yes
patchfiles	patch_wvMakefile.in patch_abiword.sh
build.target	{}

post-destroot	{
		system "cd ${worksrcpath}/../wv && \
			mv  xml/wvDocbook.xml xml/wvDocBook.xml &&
			make install prefix=${destroot}${prefix}" 
		}
		
variant gnome 	{ 
		configure.args-append   --enable-gnome
                depends_lib-append	lib:gnome-session:gnome-session 
		}
