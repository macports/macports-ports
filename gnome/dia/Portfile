# $Id$

PortSystem 1.0

name		dia
version		0.96.1
revision		0
description	A diagram program.
long_description        Dia is designed to be much like the commercial Windows \
			program Visio. It can be used to draw many different kinds \
			of diagrams. It currently has special objects to help draw \
			entity relationship diagrams, UML diagrams, flowcharts, \
			network diagrams, and simple circuits. It is also possible \
			to add support for new shapes by writing simple XML files, \
			using a subset of SVG to draw the shape.
maintainers	nomaintainer
categories	gnome
platforms	darwin
homepage	http://live.gnome.org/Dia
master_sites    gnome:sources/dia/0.96/
use_bzip2	yes
checksums	md5 7b81b22baa2df55efe4845865dddc7b6 \
	sha1 e3d8f16f50dbbd03c1ce0235dba28c3e9612bb6e \
	rmd160 aef7b2227be2fb7eb5bdd31536790e868af74311

depends_build	port:p5-xml-parser
depends_lib	port:gtk2 port:libxml2 port:libxslt \
		port:libart_lgpl port:popt

patchfiles	patch-shape_info.c
configure.cppflags-append "-L${prefix}/lib"
configure.cflags-append "-no-cpp-precomp -L${prefix}/lib"
configure.ldflags-append "-flat_namespace"

configure.args	--mandir=${prefix}/share/man --infodir=${prefix}/share/info \
		--enable-static

post-extract {
	reinplace "s|-module||g" ${worksrcpath}/lib/Makefile.in
}

variant with_gnome 	{
	configure.args-append   --enable-gnome
	depends_lib-append      lib:gnome-session:gnome-session
}

livecheck.check regex
livecheck.regex "Version (.+) is "
