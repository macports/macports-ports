# $Id: Portfile,v 1.4 2005/05/09 17:19:27 olegb Exp $
PortSystem 1.0
name		dia
version		0.94
description	A diagram program.
long_description        Dia is designed to be much like the commercial Windows \
			program Visio. It can be used to draw many different kinds \
			of diagrams. It currently has special objects to help draw \
			entity relationship diagrams, UML diagrams, flowcharts, \
			network diagrams, and simple circuits. It is also possible \
			to add support for new shapes by writing simple XML files, \
			using a subset of SVG to draw the shape.
maintainers	olegb@opendarwin.org
categories	gnome
platforms	darwin 
homepage	http://www.gnome.org/projects/dia/
master_sites    gnome:sources/dia/0.94/
use_bzip2	yes
checksums	md5 63584224912dab49fed8d2cf87ea2d85
depends_lib     lib:libgtk.2:gtk2 lib:libxml2.2.6.5:libxml2 
patchfiles	patch-shape_info.c
configure.env   CPPFLAGS="-L${prefix}/lib -I${prefix}/include" \
                CFLAGS="-no-cpp-precomp -L${prefix}/lib" \
		LDFLAGS="-flat_namespace -L${prefix}/lib -latk-1.0 -lgdk_pixbuf-2.0 -lgdk-x11-2.0"
configure.args	--mandir=${prefix}/share/man --infodir=${prefix}/share/info \
		--enable-static

post-extract {
	reinplace "s|-module||g" ${worksrcpath}/lib/Makefile.in
}

variant gnome 	{ 
			configure.args-append   --enable-gnome 
			depends_lib-append      lib:gnome-session:gnome-session 
		}
