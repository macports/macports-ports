# $Id: Portfile,v 1.28 2006/07/05 21:31:23 rhwood Exp $
PortSystem 1.0
name		gnome-panel
version		2.16.1
description	Panel component for the GNOME 2 Desktop.
long_description        Panel component for the GNOME 2 Desktop.
maintainers	macports-dev@lists.macosforge.org
categories	gnome
platforms	darwin 
homepage	http://www.gnome.org/
master_sites    gnome:sources/gnome-panel/2.16/
checksums	md5 d0131e0b33a63b17b22b4d78b00291f8 \
		sha1 7f10a31edb3082c0ef16b1a980807a73e7ef39fa \
		rmd160 9cff06b11d65b905cab3582747da4e00c56f8029

depends_lib \
	port:Xft2 lib:libcairo:cairo lib:libexpat:expat port:fontconfig \
	port:freetype lib:libjpeg:jpeg lib:libiconv:libiconv lib:libpng:libpng \
	port:p5-xml-parser bin:perl:perl5.8 port:xrender port:zlib \
	lib:libtiff:tiff port:popt port:startup-notification port:pkgconfig \
	port:pango port:libxml2 port:libxslt bin:orbit-idl-2:orbit2 \
	port:esound port:audiofile port:glib2 port:gettext port:atk port:gconf \
	port:gnome-doc-utils port:gnome-keyring port:gnome-vfs port:gnome-vfs \
	port:gtk2 port:libart_lgpl port:libbonobo port:libbonoboui \
	port:libgnome port:libgnomecanvas port:libgnomeui port:libwnck \
	port:gnome-menus port:gnome-desktop

depends_build \
	port:shared-mime-info

use_bzip2 	yes

configure.args \
	--mandir=${prefix}/share/man \
	--disable-scrollkeeper \
	--with-gconf-source="xml::${destroot}/${prefix}/etc/gconf/gconf.xml.defaults"

configure.env   CPPFLAGS="-L${prefix}/lib -I${prefix}/include" \
	GMSGFMT=${prefix}/bin/msgfmt

pre-destroot { 
	file mkdir -f ${destroot}${prefix}/etc/gconf/gconf.xml.defaults/ 
}

post-destroot {
	file delete -force ${destroot}${prefix}/var/scrollkeeper
}

post-activate {
	# ensure that the mime database is complete
	system "update-mime-database ${prefix}/share/mime"
	system "scrollkeeper-update"
}

platform darwin 6 {
	depends_lib-append	lib:libdl:dlcompat \
				lib:libiconv:libiconv
	patchfiles-append	langinfo.diff 
}
