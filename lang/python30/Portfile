# $Id: Portfile 28540 2007-09-03 11:42:45Z mww@macports.org $

PortSystem 1.0

name			python30
version			3.0a1
categories		lang
platforms		darwin
maintainers		mww@macports.org
description		An interpreted, object-oriented programming language
long_description	Python is an interpreted, interactive, object-oriented \
			programming language. This version is an ALPHA release!

homepage		http://www.python.org
master_sites		http://www.python.org/ftp/python/3.0/
distname		Python-${version}
extract.suffix		.tgz
checksums		md5 89356ece9bd276e78a9e63cfe4a83a23
patchfiles		patch-setup.py

depends_lib		port:libiconv

configure.args		--enable-shared --without-readline --enable-ipv6 --disable-tk --disable-framework

destroot.target		install maninstall
post-destroot {
	# make sure we dont have any file conflicts with python2.x
	system "cd ${destroot}${prefix}/bin && rm python-config python"
	system "cd ${destroot}${prefix}/bin && mv idle idle3.0 && mv pydoc pydoc3.0 && mv smtpd.py smtpd3.0.py"
	system "cd ${destroot}${prefix}/share/man/man1 && mv python.1 python3.0.1"
}

platform darwin 8 {
	configure.compiler	gcc-4.0
}

livecheck.check		regex
livecheck.url		http://www.python.org/download/releases/3.0/
livecheck.regex		/3.0/Python-(\[0-9a-z.\]+)\\.tgz
 
