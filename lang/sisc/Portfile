# $Id: Portfile,v 1.4 2005/08/26 03:54:51 blb Exp $

PortSystem	1.0
name		sisc
version		1.11.3
categories	lang java
platforms	darwin
maintainers	mvitocruz@gmail.com
description	Second Interpreter of Scheme Code
long_description	SISC is a Java based interpreter of Scheme.
homepage	http://sisc.sourceforge.net/
master_sites	sourceforge
distfiles	${name}-${version}.jar
checksums	md5 d5640ac0c8fad8b24a32bffb0b70b19f
worksrcdir	${name}
use_zip		yes
use_configure	no
depends_build	bin:ant:apache-ant path:${prefix}/share/xsl:docbook-xsl
pre-build	{
	reinplace "s|/usr/share/sgml/docbook/stylesheet/xsl/nwalsh|${prefix}/share/xsl/docbook-xsl|" ${worksrcpath}/build.xml
}
build.cmd	ant
build.target	full-dist
destroot	{
	set siscdir ${worksrcpath}/dist/full/sisc-${version}
	xinstall -m 755 ${siscdir}/sisc ${destroot}${prefix}/bin/sisc
	reinplace "s|/usr/share/java|\"${prefix}/share/java/sisc\"|" \
		${destroot}${prefix}/bin/sisc

	xinstall -m 755 ${siscdir}/install-srfi22.sh \
		${destroot}${prefix}/bin/install-srfi22.sh
	reinplace "s|/usr/local/bin|${prefix}/bin|" \
		${destroot}${prefix}/bin/install-srfi22.sh
	reinplace "s|scheme-src|${prefix}/share/java/sisc/scheme-src|" \
		${destroot}${prefix}/bin/install-srfi22.sh

	set javadir ${destroot}${prefix}/share/java/sisc
	xinstall -d ${javadir}
	file copy ${siscdir}/scheme-src ${javadir}
	file copy ${siscdir}/sisc-lib.jar ${javadir}
	file copy ${siscdir}/sisc-opt.jar ${javadir}
	file copy ${siscdir}/sisc.jar ${javadir}
	file copy ${siscdir}/sisc.shp ${javadir}

	set docdir ${destroot}${prefix}/share/doc/sisc
	xinstall -d ${docdir}
	file copy ${siscdir}/ChangeLog ${docdir}
	file copy ${siscdir}/COPYING ${docdir}
	file copy ${siscdir}/GOALS ${docdir}
	file copy ${siscdir}/README ${docdir}
	file copy ${siscdir}/TODO ${docdir}
	file copy ${siscdir}/doc ${docdir}
}
