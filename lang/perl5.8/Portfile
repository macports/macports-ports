# $Id: Portfile,v 1.31 2004/03/20 10:13:38 michaelm Exp $

PortSystem 1.0
name                       perl5.8
version                    5.8.3
categories                 lang
maintainers                michaelm@opendarwin.org
description                Perl 5.8.x - Practical Extraction and Report Language
long_description \
	Perl is a general-purpose programming language originally developed \
	for text manipulation and now used for a wide range of tasks including \
	system administration, web development, network programming, GUI \
	development, and more.
platforms                  darwin freebsd
distname                   perl-${version}
master_sites               http://www.cpan.org/src/5.0/
checksums                  md5 6d2b389f8c6424b7af303f417947714f 
configure.cmd              sh Configure
unset                      configure.pre_args
configure.env              LC_ALL=C

test.run                   yes

variant darwin {
	pre-configure              { reinplace "s|ld=\"MACOSX_DEPLOYMENT_TARGET=10.3|ld=\"env MACOSX_DEPLOYMENT_TARGET=10.3|g" "${worksrcpath}/hints/darwin.sh" }
}

configure.post_args        -des -Dprefix='${prefix}' -Dccflags="-I'${prefix}/include'"\
                             -Dldflags=-L'${prefix}/lib' \
                             -Dvendorprefix='${prefix}'

variant threads            { configure.args-append -Dusethreads }

