# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0

name                    gawkextlib
categories              lang textproc
maintainers             {ryandesign @ryandesign} openmaintainer
license                 GPL-3+

homepage                http://gawkextlib.sourceforge.net
master_sites            sourceforge:project/gawkextlib

depends_lib-append      port:gawk \
                        port:gettext-runtime

configure.args-append   --with-gawk=${prefix}

test.run                yes
test.target             check

if {${subport} eq ${name}} {
    version             1.0.4
    revision            0
    checksums           rmd160  aa5dc9fb36b03670496119fca9733ccdb33a35fa \
                        sha256  ecd06c1857f58530f73866dffb74a32f17d1194c045f351b5ab8acad4f77678c \
                        size    352608

    description         extension library for gawk

    long_description    Formerly an experimental fork of gawk called \
                        xgawk, ${name} provides a library containing \
                        some gawk extension API additions useful for \
                        writing gawk extensions, and its subports \
                        offer several extensions that enhance the \
                        functionality of gawk.
} else {
    set extension       [string range ${subport} 5 end]
    homepage            ${homepage}/${extension}/${extension}.html

    description         ${extension} extension for gawk

    long_description    {*}${description}
}

subport gawk-abort {
    version             1.0.1
    revision            0
    checksums           rmd160  027f25513de3e14e2cd03643e795d164e5ab7443 \
                        sha256  61a007421159607131d0b7d730948b696db2d03694bac40eb54265a5c9c023b5 \
                        size    387359
}

subport gawk-aregex {
    version             1.1.0
    revision            0
    checksums           rmd160  784c165e6f35e007ec8169452ba799df4bd816b2 \
                        sha256  dcbf5fd243a1ea09d5c5de7e49a2c15aadc78646b2100359d4ce834df0e47afe \
                        size    391996

    depends_lib-append  port:${name} \
                        port:tre

    configure.args-append \
                        --with-gawkextlib=${prefix}
}

subport gawk-errno {
    version             1.1.0
    revision            0
    checksums           rmd160  05d334b701acc57bc9e238586b03f97703cd1e4c \
                        sha256  973b0174836fe9d39bc2f87b42e0076f6cf522d2fc4725a9adf95b85976cb37c \
                        size    411636
}

subport gawk-gd {
    version             1.0.2
    revision            0
    checksums           rmd160  72f5f0ab8550a4120d22b9dd50a0692019fb8a7d \
                        sha256  7d7a98727b02e59561ab4153f31ef24e54e7e2c0ec45b5c0b013030cbb41ebfe \
                        size    508616

    depends_lib-append  port:${name} \
                        port:gd2

    configure.args-append \
                        --with-gawkextlib=${prefix} \
                        --with-gd=${prefix}
}

subport gawk-haru {
    version             1.0.2
    revision            0
    checksums           rmd160  a3136b24dd60412789f7076db73f161cfb7fd9d8 \
                        sha256  92fb8d83b71de2fe2aec0bc2468459e728290e0c675ca8c19aaf195ba3cad9b6 \
                        size    426048

    depends_lib-append  port:${name} \
                        port:libharu

    configure.args-append \
                        --with-gawkextlib=${prefix} \
                        --with-haru=${prefix}
}

subport gawk-json {
    version             2.0.0
    revision            0
    checksums           rmd160  53592d2730165d329fe39fcacd7349df5ad064b4 \
                        sha256  d75944e9bfd8a2edca5c794dffd42a300ba1017abf3f850f53c395d2af8ca0f2 \
                        size    422283

    depends_build-append \
                        port:rapidjson
}

distname                ${subport}-${version}

livecheck.regex         /${subport}-(\\d+(?:\\.\\d+)*)
