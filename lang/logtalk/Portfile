# $Id$

PortSystem	1.0
name		logtalk
version		2.31.1

categories	lang
maintainers	pmoura@logtalk.org
platforms	darwin freebsd linux
description	Logtalk - Open source object-oriented logic programming language

long_description	\
		Logtalk is an open source object-oriented logic programming language	\
		that can use most Prolog implementations as a back-end compiler.		\
		As a multi-paradigm language, Logtalk includes support for both 		\
		prototypes and classes, protocols, component-based programming 			\
		through category-based composition, event-driven programming, and 		\
		multi-threading programming.

homepage        http://logtalk.org/
master_sites	${homepage}files/

checksums		md5 dd4186355459fdd2dc1768d84bfa4be7

distname		lgt[strsed ${version} {g/\.//}]

use_bzip2		yes

use_configure	no

build			{}

universal_variant	no

destroot {
	system "cd ${worksrcpath}/scripts && ./install.sh ${destroot}${prefix}"
}

post-pkg {
	set resources ${workpath}/${name}-${version}.pkg/Contents/Resources/
	file copy -force -- ${workpath}/${worksrcdir}/scripts/macosx/License.html ${resources}
	file copy -force -- ${workpath}/${worksrcdir}/scripts/macosx/ReadMe.html ${resources}
	file copy -force -- ${workpath}/${worksrcdir}/scripts/macosx/Welcome.html ${resources}
	file copy -force -- ${workpath}/${worksrcdir}/scripts/macosx/postflight ${resources}
}

post-activate {
	ui_msg "****************************************************************************"
	ui_msg "*  Integration scripts have been created for running Logtalk with selected"
	ui_msg "*  back-end Prolog compilers (which must be properly installed for running"
	ui_msg "*  the scripts!):"
	ui_msg "*"
	ui_msg "*  B-Prolog (version 7.0 or later):         bplgt    (first run must use sudo)"
	ui_msg "*  CIAO (version 1.10#5 or later):          ciaolgt  (first run must use sudo)"
	ui_msg "*  CxProlog (version 0.96.1 or later):      cxlgt"
	ui_msg "*  ECLiPSe (version 5.10#26 or later):      eclipselgt"
	ui_msg "*  GNU Prolog (version 1.2.16 or later):    gplgt"
	ui_msg "*  K-Prolog (version 6.0.1 or later):       plclgt"
	ui_msg "*  Qu-Prolog (version 8.1 or later):        qplgt"
	ui_msg "*  SICStus Prolog (versions 3.12.x, 4.0.x): sicstuslgt"
	ui_msg "*  SWI-Prolog (version 5.6.16 or later):    swilgt"
	ui_msg "*  XSB (version 3.1 or later):              xsblgt   (first run must use sudo)"
	ui_msg "*  XSB MT (CVS version):                    xsbmtlgt (first run must use sudo)"
	ui_msg "*  YAP (version 5.1.2 or later):            yaplgt"
	ui_msg "*"
	ui_msg "*  Remember to set the environment variable LOGTALKHOME to the path to"
	ui_msg "*  the Logtalk distribution: ${prefix}/share/logtalk"
	ui_msg "*  and the environment variable LOGTALKUSER to your local configuration"
	ui_msg "*  directory (usually ~/logtalk), which you must create by running the"
	ui_msg "*  command cplgtdirs. See the file \$LOGTALKHOME/CUSTOMIZE.txt for details"
	ui_msg "*  on how to customize your working environment."
	ui_msg "****************************************************************************"
}
