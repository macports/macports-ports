# $Id: Portfile,v 1.1 2004/11/08 23:10:56 mww Exp $

PortSystem 1.0

name			iovm
version			2004-09-26
categories		lang
platforms		darwin
maintainers		mww@opendarwin.org
description		Io is small prototype-based programming language
long_description	Io is small prototype-based programming language. The \
				ideas in Io are mostly inspired by Smalltalk (all values are \
				objects), Self, NewtonScript and Act1 (prototype-based \
				differential inheritance, actors and futures for concurrency), \
				LISP (code is a runtime inspectable/modifiable tree) and Lua \
				(small, embeddable).

homepage		http://www.iolanguage.com/
master_sites	http://io.urbanape.com/release/ \
				http://www.sigusr1.org/~steve/
distname		IoVM-${version}
checksums		md5 0df8fe0ab3fb3cf1bd2dc10196d3d4c3

extract.post_args  "| tar -xf - --exclude '_old'"

patch	{
	cd ${worksrcpath}
	reinplace "s|/usr/local|\$(DESTDIR)${prefix}|g" IoVM/Makefile \
		Makefiles/IoDesktop/Makefile Makefiles/IoServer/Makefile \
		Makefiles/IoVM/Makefile
}

post-destroot	{
	xinstall -m 755 -d ${destroot}${prefix}/share/doc
	file delete -force ${destroot}${prefix}/lib
	file copy ${worksrcpath}/IoVM/_include ${destroot}${prefix}/include/iovm
	file copy ${worksrcpath}/IoVM/_libs ${destroot}${prefix}/lib
	file copy ${worksrcpath}/IoVM/_docs ${destroot}${prefix}/share/doc/${name}
}
