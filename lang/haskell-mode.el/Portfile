# $Id: Portfile,v 1.1 2004/12/02 10:23:47 gwright Exp $

PortSystem	1.0
name		haskell-mode.el
version		2.0
categories	lang editors
maintainers	gwright@opendarwin.org
platforms	darwin

description	An emacs major mode for editing haskell programs.
long_description	\
		Haskell-mode is a major Emacs mode for editing		\
		Haskell source code. It provides syntax highlighting	\
		and automatic indentation and comes with inf-haskell	\
		which allows interaction with an inferior Haskell	\
		interactive loop such as the one of Hugs  or GHCi.

distname	haskell-mode

homepage	//http://www-perso.iro.umontreal.ca/~monnier/elisp/
master_sites	${homepage}

checksums	md5 85b4db872e6496a65dd68b3777d107a1

depends_lib	path:${prefix}/bin/emacs:emacs
depends_run	bin:ghci:ghc

worksrcdir	${distname}-${version}

patchfiles	patch-inf-haskell.el

post-patch	{ reinplace s|ghci-program-path|${prefix}/bin/ghci|g ${worksrcpath}/inf-haskell.el }

use_configure	no
build		{}
destroot	{ file mkdir ${destroot}${prefix}/share/emacs/site-lisp
		  file copy  ${workpath}/${worksrcdir}	\
			     ${destroot}${prefix}/share/emacs/site-lisp
		}

post-activate	{ ui_msg "To use this, put the following into your ~/.emacs:"
		  ui_msg "(load \"${prefix}/share/emacs/site-lisp/${distname}-${version}/haskell-site-file\")"
		  ui_msg "(add-hook 'haskell-mode-hook 'turn-in-haskell-doc-mode)"
		  ui_msg "(add-hook 'haskell-mode-hook 'turn-on-haskell-indent)"
		  ui_msg "(add-hook 'haskell-mode-hook 'font-lock-mode)"
		  ui_msg "(add-hook 'haskell-mode-hook 'imenu-add-menubar-index)"
		  ui_msg " "
		  ui_msg "Also, the customization options for haskell mode"
		  ui_msg "are temporarily broken on Emacs. This has been"
		  ui_msg "reported to the author. For the moment, you must"
		  ui_msg "edit the appropriate files in"
		  ui_msg "${prefix}/share/emacs/site-list/{$distname}-${version}"
		  ui_msg "to customize ${name}."
}
