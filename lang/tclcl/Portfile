# $Id: Portfile,v 1.1 2005/07/24 19:06:34 mww Exp $

PortSystem 1.0

name			tclcl
version			2002-06-23
categories		lang
maintainers		benwill at socrates.berkeley.edu
description             TclCL (Tcl with classes)
long_description        TclCL is a Tcl/C++ interface
homepage		http://otcl-tclcl.sourceforge.net/tclcl/
master_sites		http://otcl-tclcl.sourceforge.net/tarballs/:tclcl \
			sourceforge:tcl:tcl
set tclmaj		8.4
set tclmin		9
set tclv		${tclmaj}.${tclmin}
dist_subdir		tcltk
distfiles		${name}-src-current.tar.gz:tclcl \
			tcl${tclv}-src.tar.gz:tcl
checksums		${name}-src-current.tar.gz md5 553bf9c087ec150d0ad8784f4a75ad3f \
                        tcl${tclv}-src.tar.gz md5 7e01b409925e4eb59ad44a4c12b9c681

depends_build		port:autoconf \
			port:automake

depends_lib		port:tcl \
			port:tk \
			port:otcl

patchfiles		conf_configure.in.fns.patch \
			Makefile.in.patch

pre-configure		{
			cd ${worksrcpath}
			system "${prefix}/bin/aclocal && ${prefix}/bin/autoconf"
}

configure.args		--with-tcl=${prefix} --with-tcl-ver=${tclmaj} \
			--with-tk=${prefix} --with-tk-ver=${tclmaj} \
			--with-otcl=${prefix} \
			--prefix=${prefix} \
			CPPFLAGS='-I/usr/X11R6/include -I${workpath}/tcl${tclv}/generic/' \
			CFLAGS='-I/usr/X11R6/include -I${workpath}/tcl${tclv}/generic/' \
			LDFLAGS='-L/usr/X11R6/lib' \
			CC=/usr/bin/gcc-3.3 \
			CXX=/usr/bin/g++-3.3
post-configure          {
                        reinplace "s|-lXext|-L/usr/X11R6/lib -lXext|g" \
                                ${worksrcpath}/Makefile
}

build.target		all

destroot           {
                        cd ${worksrcpath}
                        eval xinstall -m 0644 [glob *.h] ${destroot}${prefix}/include
                        xinstall -m 0755 tcl2c++ ${destroot}${prefix}/bin
                        xinstall -m 0644 libtclcl.a ${destroot}${prefix}/lib
}

