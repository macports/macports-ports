# $Id$

PortSystem 1.0

name			ragel
version			5.20
categories		lang
platforms		darwin
maintainers		mww@macports.org
description		ragel is a state machine compiler
long_description	Ragel compiles finite state machines from regular \
				languages into runnable C/C++ code. Ragel state \
				machines can not only recognize byte sequences as \
				regular expression machines do, but can also execute \
				code at arbitrary points in the recognition of a \
				regular language.

homepage		http://www.cs.queensu.ca/~thurston/ragel/
master_sites	${homepage}
checksums		sha1 4204dee576bc55faaac9fcde8719e469c5ae3a25
#patchfiles		patch-ragel-rlparse.kl patch-ragel-rlparse.cpp \
#				patch-redfsm-xmlparse.kl patch-redfsm-xmlparse.cpp

depends_build	port:bison

post-build	{
	system "cd ${worksrcpath}/doc && ${build.cmd} ragel.1"
}

test.run		yes
test.dir		${worksrcpath}/test
test.target

destroot.destdir	prefix=${destroot}${prefix}
post-destroot {
	xinstall -m 644 ${worksrcpath}/doc/ragel.1 \
		${destroot}${prefix}/share/man/man1
	xinstall -d -m 755 ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} COPYING CREDITS ChangeLog README TODO \
		${destroot}${prefix}/share/doc/${name}
}

platform darwin 8 {
	configure.env CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
}

