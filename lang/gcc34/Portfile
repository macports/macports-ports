# $Id: Portfile,v 1.5 2005/04/13 21:16:33 gwright Exp $

PortSystem 1.0
name            gcc34
version         3.4.3
set major	3.4
revision	2
description     The GNU compiler collection
long_description	${description}
platforms       darwin
categories      lang
maintainers     gwright@opendarwin.org

homepage	http://gcc.gnu.org/gcc-${major}
master_sites    gnu:/gcc/gcc-${version}

#user_notes	This port is intended to be used by other ports		\
#		requiring the features of the latest released gcc or	\
#		g++. For example, covariant returns in g++ are not	\
#		supported by the standard Apple g++-3.3, but are by	\
#		this version. Generally speaking, you'll know if you	\
#		need this.						\
#									\
#		The libraries are moved from their standard location	\
#		so as not to conflict with the libraries installed	\
#		by the system's gcc. It is necessary below to specify	\
#		the C++ include path explicitly (using the		\
#		--with-gxx-include-dir configure argument) because	\
#		of a bug in gcc-3.4.3 that causes incorrect include	\
#		paths to be generated if the library directory is	\
#		changed.


use_bzip2	yes
distname	gcc-${version}

checksums       md5 e744b30c834360fccac41eb7269a3011

worksrcdir	build

pre-configure   {
		  file mkdir ${worksrcpath}
		}

configure.cmd	${workpath}/gcc-${version}/configure
configure.args  --enable-languages=c,c++,f77,objc	\
		--libdir=${prefix}/lib/gcc-${version}	\
		--infodir=${prefix}/share/info		\
                --mandir=${prefix}/share/man		\
		--with-system-zlib			\
		--disable-nls				\
		--program-suffix=-${major}		\
		--with-local-prefix=${prefix}		\
		--with-gxx-include-dir=${prefix}/include/${name}/c++/

build.target    bootstrap-lean

post-destroot   { cd ${destroot}${prefix}
		  file delete -force share/man/man7
		  file delete -force share/info
		}

