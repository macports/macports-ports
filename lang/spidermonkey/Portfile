# $Id: Portfile,v 1.3 2005/09/07 22:55:19 mww Exp $

PortSystem 1.0

name			spidermonkey
version			1.5-rc6a
revision		1
categories		lang
platforms		darwin
maintainers		darwinports@opendarwin.org
description		JavaScript-C Engine
long_description	${description}

homepage		http://www.mozilla.org/js/spidermonkey/
master_sites	ftp://mozilla.isc.org/pub/mozilla.org/js/ \
				http://ftp.uni-erlangen.de/pub/mozilla.org/js/ \
				http://mozilla.isc.org/pub/mozilla.org/js/
distname		js-${version}
checksums		md5 25e1d1dd2674d85883391b6b42a7b02f

worksrcdir		js/src

use_configure	no

build.args		-f Makefile.ref
post-build {
	system "ranlib ${worksrcpath}//Darwin_DBG.OBJ/libjs.a"
}

destroot {
	xinstall -m 755 -d ${destroot}${prefix}/include/${name}
	xinstall -m 755 ${worksrcpath}/Darwin_DBG.OBJ/js ${destroot}${prefix}/bin
	xinstall -m 644 -W ${worksrcpath} jsapi.h Darwin_DBG.OBJ/jsautocfg.h \
		${destroot}${prefix}/include/${name}
	xinstall -m 644 ${worksrcpath}/Darwin_DBG.OBJ/libjs.a ${destroot}${prefix}/lib
}
