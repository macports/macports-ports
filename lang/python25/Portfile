# $Id$

PortSystem 1.0

name			python25
version			2.5.1
categories		lang
platforms		darwin
maintainers		mww@macports.org

description		An interpreted, object-oriented programming language
long_description	Python is an interpreted, interactive, object-oriented \
			programming language.

homepage		http://www.python.org/
master_sites	${homepage}/ftp/python/${version}/ \
			ftp://ftp.python.org/pub/python/${version}/ \
			ftp://ftp.fastorama.com/mirrors/ftp.python.org/pub/python/${version}/ \
			ftp://ftp.python.jp/pub/python/${version}/

distname		Python-${version}
use_bzip2		yes
checksums		sha1 993a66bd2dabb0c4f33ca98372576315ef113df6 \
				rmd160 af0e8ed93bbc07015c338ae19bbee8811da21c1c

patchfiles		patch-setup.py

configure.args	--enable-shared \
			--mandir=${prefix}/share/man \
			--bindir=${prefix}/bin \
			--libdir=${prefix}/lib \
			--without-readline \
			--enable-ipv6 \
			--disable-tk \
			--disable-framework

test.run	   yes
test.target	   test

livecheck.check	regex
livecheck.url	http://www.python.org/download/releases/
livecheck.regex	Python (2.5?\[0-9\]+)

destroot.target	install maninstall
post-destroot {
	system "cd ${destroot}${prefix}/bin && mv idle idle2.5 && mv pydoc pydoc2.5 && mv python-config python-config2.5 && mv smtpd.py smtpd2.5.py && rm python"
	system "cd ${destroot}${prefix}/share/man/man1 && mv python.1 python2.5.1"
}

platform darwin 8 {
	configure.env		CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 \
				CXX=/usr/bin/g++-4.0
	configure.args-append 	--with-cxx=/usr/bin/g++-4.0
}

platform darwin 9 {
    configure.post_args-append  OPT="-D__DARWIN_UNIX03"
}

variant universal {
    configure.args-append   --enable-universalsdk
}

# for w/o quicktime sdk, etc. (be prepared for framework build, though)
platform puredarwin {
#	configure.args-delete	--enable-framework=${prefix}/Library/Frameworks
	configure.args-append	--disable-toolbox-glue --disable-framework
	destroot.target			install maninstall
}
