# $Id: Portfile,v 1.2 2006/08/19 12:31:42 mww Exp $

PortSystem 1.0

name			python25
version			2.5
categories		lang
platforms		darwin
maintainers		mww@opendarwin.org
description		An interpreted, object-oriented programming language
long_description	Python is an interpreted, interactive, object-oriented \
					programming language. This is a BETA version.

homepage		http://www.python.org/
master_sites	http://www.python.org/ftp/python/2.5/ \
				ftp://ftp.python.org/pub/python/2.5/
distname		Python-${version}
checksums		sha1 98ce9346cc4a7ef4621ecdcfc3957d595d97a078

use_bzip2		yes

configure.args	--enable-shared \
				--mandir=${prefix}/share/man \
				--bindir=${prefix}/bin \
				--libdir=${prefix}/lib \
				--without-readline \
				--enable-ipv6 \
				--disable-tk

test.run		yes
test.target		test

destroot.target	install maninstall
post-destroot {
	system "cd ${destroot}${prefix}/bin && mv idle idle2.5 && mv pydoc pydoc2.5 && mv python-config python-config2.5 && mv smtpd.py smtpd2.5.py && rm python"
	system "cd ${destroot}${prefix}/share/man/man1 && mv python.1 python2.5.1"
}

platform puredarwin {
	configure.args-append	--disable-toolbox-glue --disable-framework
}

platform darwin 8 {
	configure.env CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
	configure.args-append --with-cxx=/usr/bin/g++-4.0
}

