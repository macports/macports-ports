diff -ur gcl-2.7.1.orig/h/notcomp.h gcl-2.7.1/h/notcomp.h
--- gcl-2.7.1.orig/h/notcomp.h	2025-02-14 23:37:40.000000000 +1100
+++ gcl-2.7.1/h/notcomp.h	2025-04-15 10:00:14.000000000 +1000
@@ -305,7 +305,12 @@
       sigprocmask(SIG_SETMASK,&old,NULL);				\
       r;})
 
+/* memory allocated by alloca may not survive vfork on macOS */
+#ifdef __APPLE__
+#define psystem(x) prof_block(system(x))
+#else
 #define psystem(x) prof_block(vsystem(x))
+#endif
 #define pfork() prof_block(fork())
 #define pvfork() prof_block(vfork())
 
Only in gcl-2.7.1/h: notcomp.h.orig
diff -ur gcl-2.7.1.orig/o/main.c gcl-2.7.1/o/main.c
--- gcl-2.7.1.orig/o/main.c	2025-04-11 04:21:26.000000000 +1000
+++ gcl-2.7.1/o/main.c	2025-04-15 10:00:14.000000000 +1000
@@ -629,7 +629,11 @@
   if (gc) {
 
     saving_system=TRUE;
+
+/* on macOS it leads to ERROR "Caught fatal error [memory may be damaged]" */
+#ifndef __APPLE__
     GBC(t_other);
+#endif
     saving_system=FALSE;
 
     minimize_image();
Only in gcl-2.7.1/o: main.c.orig
