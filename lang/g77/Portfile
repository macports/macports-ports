# $Id: Portfile,v 1.8 2003/03/03 06:57:41 mij Exp $

PortSystem 1.0

name            g77
version         3.1-20020420
description     gnu fortran 77 comiler
platforms       darwin
categories      lang
maintainers     michaelm@opendarwin.org
master_sites    http://distfiles.opendarwin.org/ \
                  http://darwinports.gene-hacker.net/files/ \
                  http://west.dl.sourceforge.net/sourceforge/fink/

distname        gcc-3.1-20020420-1151
worksrcdir      gcc3
checksums       md5 62f378e83bc60942cbf664d17994eafe
patchfiles      patch-configure.in
pre-configure   { system "cd ${workpath} && mkdir -p darwin"}
configure.dir   ${workpath}/darwin
configure.cmd   ../gcc3/configure
configure.args  --enable-languages=f77 --infodir='${prefix}/share/info'
build.dir       ${workpath}/darwin
build.target    bootstrap-lean
install.target  install prefix=${destroot}${prefix}


post-install   { system "cd ${destroot}${prefix}/bin && /bin/rm -f gcc gccbug cpp gcov powerpc-apple*"
                   system "ln -s ${destroot}${prefix}/lib/gcc-lib/powerpc-apple-darwin6.0/3.1/include/g2c.h ${destroot}${prefix}/include/g2c.h"
                   system "/bin/rm -rf ${destroot}${prefix}/share/locale ${destroot}${prefix}/man"
                   system "/bin/rm -f ${destroot}${prefix}/lib/charset.alias"
                   system "/bin/rm -f ${destroot}${prefix}/share/info/gcc* ${destroot}${prefix}/share/info/cpp*"
               }

