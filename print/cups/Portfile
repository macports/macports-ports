# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0

github.setup        OpenPrinting cups 2.4.1 v
github.tarball_from releases
distname            ${github.project}-${github.version}-source
revision            0
categories          print
license             Apache-2
maintainers         nomaintainer
description         CUPS is the current standards-based, open source printing system developed by \
                    OpenPrinting for Unix-like operating systems and uses IPP Everywhere™ to support \
                    printing to local and network printers.
long_description    OpenPrinting CUPS is the most current version of CUPS, a standards-based, \
                    open source printing system for Unix-like operating systems. CUPS supports \
                    printing to AirPrint™ and IPP Everywhere™ printers, \
                    Network and local (USB) printers with Printer Applications, and \
                    Network and local (USB) printers with (legacy) PPD-based printer drivers. \
                    CUPS provides the System V ("lp") and Berkeley ("lpr") command-line interfaces, \
                    a configurable web interface, a C API, and common print filters, drivers, and backends \
                    for printing. The cups-filters project provides additional filters and drivers.
homepage            https://openprinting.github.io/cups/

checksums           rmd160  dc46fb36b89d0d635e911816b258f26b0b88d960 \
                    sha256  c7339f75f8d4f2dec50c673341a45fc06b6885bb6d4366d6bf59a4e6c10ae178 \
                    size    8113914

depends_lib         port:zlib \
                    port:avahi \
                    port:libusb
depends_build       port:gmake \
                    port:pkgconfig

configure.cflags-append     -I${prefix}/include
configure.cppflags-append   -I${prefix}/include
configure.cxxflags-append   -I${prefix}/include
configure.ldflags-append    -L${prefix}/lib
configure.env-append    DSOFLAGS=-L${prefix}/directory
configure.args      --enable-libusb \
                    --bindir=/bin \
                    --sbindir=/sbin \
                    --libexecdir=/libexec \
                    --sysconfdir=/share/print/cups/etc \
                    --sharedstatedir=/share/print/cups/com \
                    --localstatedir=/share/print/cups/var \
                    --runstatedir=/share/print/cups/run \
                    --libdir=/lib \
                    --includedir=/include \
                    --oldincludedir=/share/print/cups/oldinclude \
                    --datarootdir=/share/print/cups \
                    --datadir=/share/print/cups \
                    --infodir=/share/print/cups/info \
                    --localedir=/share/print/cups/locale \
                    --mandir=/share/man \
                    --docdir=/share/doc/cups \
                    --htmldir=/share/doc/cups \
                    --dvidir=/share/doc/cups \
                    --pdfdir=/share/doc/cups \
                    --psdir=/share/doc/cups

build.type          gnu
build.target        all
build.args          BUILDROOT=${prefix}

pre-destroot {
    xinstall -m 755 -d ${destroot}${prefix}/cups
}

destroot.destdir    BUILDROOT=${destroot}${prefix}
