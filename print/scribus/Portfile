# $Id$

PortSystem      1.0
PortGroup 		cmake 1.0
PortGroup		qt4 1.0

name            scribus
version         1.3.9
categories      print
maintainers     nomaintainer
description     X11-based WYSIWYG desktop publishing application
long_description \
                Scribus is an open source desktop publishing program. It provides  true \
                WYSIWYG  editing,  excellent PDF export facilities, and a wide range of \
                other input and output options.
platforms       darwin
homepage        http://www.scribus.net/
master_sites    sourceforge:scribus
use_bzip2       yes
checksums       md5     a54dbf2e10cd88d683d0d34565d29378 \
                sha1    86bc4db2d8fbb91fe94f8535327991e9128c5862 \
                rmd160  63e1d3f7f723843e9d1c787e1405b57a15f08fcc

depends_build   path:bin/perl:perl5 \
                path:bin/pkg-config:pkgconfig
depends_lib     port:fontconfig \
				bin:gs:ghostscript \
                path:lib/pkgconfig/cairo.pc:cairo \
                port:boost \
                port:expat \
                port:libart_lgpl \
                port:libiconv \
                port:lcms \
                port:libxml2 \
                port:tiff \
                port:zlib

set	PyFRM		${frameworks_dir}/Python.framework/Versions

configure.args-append "-DWITH_PODOFO=NO"

variant python26 description Add python 2.6 interface {

	depends_lib-append		port:python26
	configure.args-append \
			"-DPYTHON_LIBRARY=${prefix}/lib/libpython2.6.dylib"
	configure.args-append	\
			"-DPYTHON_INCLUDE_DIR=${PyFRM}/2.6/include/python2.6"
}

variant python27 description Add python 2.7 interface {

	depends_lib-append		port:python27
	configure.args-append \
			"-DPYTHON_LIBRARY=${prefix}/lib/libpython2.7.dylib"
	configure.args-append \
			"-DPYTHON_INCLUDE_DIR=${PyFRM}/2.7/include/python2.7"
}

variant podofo description uses podofo {
	depends_lib-append		port:podofo
	configure.args-delete "-DWITH_PODOFO=NO"
	configure.args-append "-DWITH_PODOFO=YES"
}

configure.args-append		"-DCMAKE_INSTALL_PREFIX=${applications_dir}"

build.env           HOME=${worksrcpath}
use_parallel_build  yes

#destroot.target    install-strip

livecheck.type  regex
livecheck.url   ${homepage}
livecheck.regex Scribus v(\[0-9.\]+)
