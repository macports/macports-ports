# $Id$

PortSystem 1.0
name            gutenprint
version         5.0.1
categories      print
maintainers     yves@macports.org
homepage        http://gimp-print.sourceforge.net/
platforms       darwin

description     Gimp Print Plugin
long_description \
    Gutenprint plugin for the Gimp.

master_sites    sourceforge:gimp-print
use_bzip2       yes
checksums       md5 4ec66d57c1014b503d6bea16b1c31d81

depends_lib     port:gimp2

configure.args  --disable-escputil \
                --disable-samples \
                --disable-test \
                --without-cups \
                --without-readline \
                --with-gimp2-as-gutenprint

post-configure {
    foreach i {iconv intl} {
        reinplace "s|${prefix}/lib/lib${i}.dylib|-l${i}|g" \
            ${worksrcpath}/src/main/Makefile
    }
}

post-install {
    ui_msg "
            This port only installs the Gutenprint plugin for the Gimp.
            You can get the complete Gutenprint drivers and utilities from
            http://gimp-print.sourceforge.net
            "
}

variant gimp_dev {
    depends_lib-delete  port:gimp2
    depends_lib-append  port:gimp-dev
    configure.env \
        GIMPTOOL2_CHECK=${prefix}/gimp-2.3/bin/gimptool-2.0 \
        PKG_CONFIG_PATH=${prefix}/gimp-2.3/lib/pkgconfig
}
