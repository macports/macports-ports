# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           makefile 1.0
PortGroup           github 1.0
PortGroup           muniversal 1.1

github.setup        pts pts-tiny-7z-sfx 9.22+pts8 v
github.tarball_from archive
revision            0
categories          archivers
maintainers         {i0ntempest @i0ntempest} openmaintainer
license             GPL-2

description         size-optimized tiny .7z extractor and SFX
long_description    ${name} is a tiny 7-Zip (.7z archive) extractor and self-extractor\
                    (SFX) written in standard C

checksums           rmd160  8d8d0903a02af3cbd583591f7e7b01a5d19dcf97 \
                    sha256  06054a8deed517ee3cab03653e1894252b4c2ce710d5543d36f90221b8bef042 \
                    size    1404694

post-patch {
    reinplace "s|CFLAGS = -s|CFLAGS =|g" Makefile
    reinplace "s|tiny7zx.dynamic|tiny7zx|g" Makefile
    reinplace "s|lseek64(|lseek(|g" 7zStream.c
}

destroot {
    xinstall -m 0755 ${worksrcpath}/tiny7zx ${destroot}${prefix}/bin
}
