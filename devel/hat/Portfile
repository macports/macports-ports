# $Id: Portfile,v 1.2 2004/12/03 03:14:33 gwright Exp $

PortSystem 1.0
name		hat
version		2.03
categories	devel
maintainers	gwright@opendarwin.org
platforms	darwin

description	hat is the Haskell Tracer
long_description	\
		Hat is a source-level tracer for Haskell 98, the	\
		standard lazy functional programming language. Hat is	\
		a tool that gives the user access to otherwise		\
		invisible information about a computation.		\
									\
		Hat is portable between compilers: it works with both	\
		ghc and nhc98. It also supports various language	\
		extensions, such as the FFI, multi-parameter type	\
		classes, functional dependencies, and hierarchical	\
		module namespaces.

homepage	http://www.cs.york.ac.uk/fp/hat/
master_sites	ftp://ftp.cs.york.ac.uk/pub/haskell/hat/

fetch.type	cvs
cvs.root	:pserver:anoncvs@glass.cse.ogi.edu:/cvs
cvs.password	cvs
cvs.module	${name}

depends_build	bin:ghc:ghc \
		bin:hmake:hmake

depends_lib	lib:libglib.1:glib1

depends_run	bin:xterm:XFree86

#user_notes	Despite being compatible with both nhc98 and ghc, the \
#		port depends on the more featureful ghc.
#
#		If the message "resize: command not found" appears,
#		you need to restart hat-* command in an xterm
#		(a real X11 xterm, not an OS X terminal application).
#

post-fetch	{ file rename  ${workpath}/${name} ${workpath}/${name}-${version} }

post-destroot	{ file delete ${destroot}/${prefix}/bin/harch }

post-install	{ set ghcversion [ exec ghc --version | sed "s|^.*version ||" ]
		  system "ranlib ${prefix}/lib/ghc-${ghcversion}/libHShat.a"
		}

