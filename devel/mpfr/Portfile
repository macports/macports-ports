# $Id$

PortSystem 1.0

# Although mpfr builds without a custom universal variant,
# it is not the same as builing the archs differently
# due to the variable HAVE_LDOUBLE_IEEE_EXT_LITTLE.
PortGroup  muniversal 1.0

name                mpfr
set base_version    3.0.0
#set patch_level     1
#version             ${base_version}-p${patch_level}
version             ${base_version}
categories          devel math
platforms           darwin
maintainers         vinc17

description     C library for multiple-precision floating-point computations
long_description \
    MPFR is a portable C library for arbitrary-precision binary \
    floating-point computation with correct rounding, based on the GMP \
    multiple-precision library. The computation is both efficient and \
    has a well-defined semantics. It copies the good ideas from the \
    ANSI/IEEE-754 standard for fixed-precision floating-point arithmetic.

distname            ${name}-${base_version}
homepage            http://www.mpfr.org/
master_sites        http://www.mpfr.org/${distname}/

use_bzip2           yes

checksums \
#    patch01 \
#        md5     31669aface4713f433160e5d2eeaa51e \
#        sha1    9c8a8325848b4331e5c032abee1c765ad2e56de2 \
#        rmd160  e612c1f8013860bbe53354022700855fdbc804f2 \
    [suffix ${distname}] \
        md5     f45bac3584922c8004a10060ab1a8f9f \
        sha1    8ae8bc72ac26a0f17ad9f57c520264c056c64770 \
        rmd160  6862412d09e1da3e1f4b023b8cfdee4d440d903e

use_parallel_build  yes

depends_lib     port:gmp

dist_subdir     ${name}/${base_version}

#patch_sites     ${master_sites}
#patch.args      -p1

#for {set i 1} {${i} <= ${patch_level}} {incr i} {
#    patchfiles-append patch[format %02d ${i}]
#}

test.run        yes
test.target     check

livecheck.url    http://www.mpfr.org/mpfr-current/
livecheck.regex  "mpfr-(\\d+(?:\\.\\d+)*)${extract.suffix}"
