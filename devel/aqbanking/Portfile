# $Id$

PortSystem        1.0

name              aqbanking
version           3.7.2
# this is specific to this port and *version* for downloading it
set release       17

categories        devel net finance
maintainers       nomaintainer
platforms         darwin

description       a generic online banking interface
long_description  aqbanking is a generic online banking interface mainly \
		  supporting Home Banking Computer Interface, a standard \
		  used for German checking accounts, but also suitable \
		  for OFX as used in several other countries. \
		  Note that the YellowNet backend (for Suisse Postfinance) \
		  is not available for OS X (upstream only has a Linux binary).

homepage          http://www.aquamaniac.de/sites/aqbanking/index.php
master_sites      http://www.aquamaniac.de/sites/download/download.php?package=03&release=${release}&file=01&dummy=aqbanking-${version}.tar.gz
distfiles         aqbanking-${version}.tar.gz
worksrcdir        aqbanking-${version}

checksums         md5    5b0aef92808dcb48c375b8958e1c4808 \
                  sha1   f9e29e3f1e5ccebc112094812bb48f1a7f2ef83b \
                  rmd160 e064237d473cd22c0d393a73a4b12b3a57e8f2f7
                  # unverified -- upstream does not publish signatures!
                                    
depends_lib	  port:gwenhywfar \
		  port:qt3 \
		  port:ktoblzcheck \
		  port:libglade2 \
		  port:libofx \
                  port:gmp
depends_build	  port:libtool

configure.cppflags-append	"-L${prefix}/lib"
configure.cflags-append	"-L${prefix}/lib"
configure.ldflags-append "-Wl,-dylib_file,/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib:/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib"
configure.env		  QTDIR=${prefix}/lib/qt3
configure.args	  --with-qt-dir=${prefix}/lib/qt3 \
                  --disable-dependency-tracking \
		  --with-frontends="cbanking g2banking qbanking" \
		  --with-backends="aqhbci aqofxconnect aqnone" \
		  --enable-libofx \
		  --disable-chipcard-client \
		  --disable-chipcard-client-test

variant disable_ofx description "Disable OFX support" {
	depends_lib-delete	port:libofx
	configure.args-delete	--with-backends="aqhbci aqofxconnect aqnone"
	configure.args-delete	--enable-libofx
	configure.args-append	--with-backends="aqhbci aqnone" \
				--disable-libofx
}

variant enable_geldkarte conflicts disable_ofx description "Enable geldkarte" {
	depends_lib-append	port:libchipcard
	configure.args-delete	--disable-chipcard-client
	configure.args-delete	--disable-chipcard-client-test
	configure.args-append	--with-backends="aqhbci aqofxconnect aqgeldkarte aqnone" \
				--enable-chipcard-client \
				--enable-chipcard-client-test
}

variant python description "Enable ctypes support. This is only needed if you are using Python 2.4 or earlier. Not needed if Python 2.5 or later is installed." {
	depends_build-append	port:py-ctypes
}
