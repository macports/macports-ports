# $Id: Portfile,v 1.2 2006/08/08 21:44:48 mas Exp $

PortSystem        1.0
name              aqbanking
version           2.2.0
revision	  1
categories        devel net
maintainers       mas@seligma.com
description       a generic online banking interface
long_description  aqbanking is a generic online banking interface mainly \
		  supporting Home Banking Computer Interface, a standard \
		  used for German checking accounts, but also suitable \
		  for OFX as used in several other countries.
homepage          http://www.aqbanking.de/
master_sites      sourceforge
checksums	  md5 0908d3de2b7bfa256a626ce8ab7c5e80
depends_lib	  port:gwenhywfar \
		  port:qt3 \
		  port:ktoblzcheck \
		  port:libglade2
depends_build	  port:libtool \
		  port:automake

patchfiles	  qt3.patch aqbanking-2.2.0-qbcfg.patch
pre-configure {
	system "cd ${worksrcpath} && aclocal -I m4"
	system "cd ${worksrcpath} && autoconf"
}

configure.env	  CPPFLAGS="-L${prefix}/lib -I${prefix}/include" \
		  CFLAGS="-L${prefix}/lib -I${prefix}/include" \
		  LDFLAGS=-L${prefix}/lib \
		  QTDIR=/opt/local/lib/qt3
configure.args	  --disable-kde3 \
		  --disable-dependency-tracking \
		  --with-frontends="cbanking g2banking qbanking" \
		  --with-backends="aqhbci aqdtaus aqnone" \
		  --disable-libofx \
		  --disable-chipcard-client \
		  --disable-chipcard-client-test

variant ofx conflicts geldkarte {
	depends_lib-append	port:libofx
	configure.args-delete	--disable-libofx
	configure.args-append	--with-backends="aqhbci aqdtaus aqofxconnect" \
				--enable-libofx
}

variant geldkarte conflicts ofx {
	depends_lib-append	port:libchipcard
	configure.args-delete	--disable-chipcard-client
	configure.args-delete	--disable-chipcard-client-test
	configure.args-append	--with-backends="aqhbci aqdtaus aqgeldkarte" \
				--enable-chipcard-client \
				--enable-chipcard-client-test
}

variant python {
	depends_build-append	port:py-ctypes
}
