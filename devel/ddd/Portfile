# $Id: Portfile,v 1.6 2004/01/18 04:54:46 toby Exp $

PortSystem 1.0
name		ddd
version		3.3.1
categories	devel
maintainers	jkh@opendarwin.org
description	Data Display Debugger
long_description DDD is a graphical front-end for GDB and other command-line debuggers.
homepage	http://www.gnu.org/software/ddd/
platforms	darwin
master_sites	gnu
checksums	md5 38589618d7cd02a03d062bb116bbf1d2
depends_lib	lib:libXm.3:openMotif
patchfiles	patch-combo patch-logplayer.C

# Use darwin variant.  Other OSes with gcc > 3.2 will need to come up with
# their own hack since this code doesn't compile with gcc 3.3.
variant darwin {
	configure.env CC=gcc3 CXX=c++3 CFLAGS=-no-cpp-precomp
}

post-configure {
	system "for i in `grep -rl '^#pragma implementation' ${worksrcpath}` ; do sed -e 's:^#pragma implementation:// #pragma implementation:' < \$i > \$i.new && mv \$i.new \$i; done"
	system "for i in `grep -rl '^#pragma interface' ${worksrcpath}` ; do sed -e 's:^#pragma interface:// #pragma interface:' < \$i > \$i.new && mv \$i.new \$i; done"
}
