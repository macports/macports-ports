# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0

github.setup        jflex-de jflex 1.9.1 v
github.tarball_from archive
revision            0
categories          devel
platforms           any
license             GPL
maintainers         nomaintainer
supported_archs     noarch

description         JFlex - The Fast Scanner Generator for Java

long_description    JFlex is a lexical analyzer generator (also known as \
                    scanner generator) for Java(tm), written in Java(tm).

homepage            https://jflex.de/

checksums           rmd160  9eb238424e74c16b1cdc971978e5214d5bcabea9 \
                    sha256  9ea152c2d9feb33b51eee2a48002bad3cebfc10d0fbe4eee4097c0da3777f4d1 \
                    size    12420761

depends_build       bin:mvn3:maven3

use_configure       no

set maven_local_repository ${worksrcpath}/.m2/repository
pre-build {
    file mkdir ${maven_local_repository}
}

build.cmd           mvn3
build.target        package
build.env-append    GRADLE_USER_HOME=${worksrcpath}/${name}
build.pre_args      -Pfastbuild -pl .,cup-maven-plugin,jflex install \
                    -Dmaven.repo.local=${maven_local_repository}

destroot {
    file copy ${worksrcpath}/jflex/bin/jflex \
        ${destroot}${prefix}/bin/jflex
    file copy ${worksrcpath}/jflex/lib/jflex-full-${version}.jar \
        ${destroot}${prefix}/lib/jflex-full-${version}.jar
}
