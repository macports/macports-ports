# $Id: Portfile,v 1.8 2003/03/03 06:18:05 mij Exp $

PortSystem 				1.0
name					jakarta-ant
version					1.5.1
revision				0
categories				java jakarta
maintainers				sean@fuzzymagic.com
description				Java opensource build system
long_description			Ant is a Java based build tool. In theory it is kind of like \
					make without make's wrinkles. Ant uses XML build files that defines \
					a set of targets. Each target has dependencies (other targets) and \
					contains a set of tasks to perform.
homepage                http://jakarta.apache.org/ant/

platforms				darwin freebsd
master_sites			http://www.apache.org/dist/ant/source/
distname 				${name}-${version}-src
worksrcdir 				${name}-${version}
checksums				md5 a9d1d1cb1c042ef2fffc21f31d96d4a9
set antdir              java/${name}
set instdir		 		${prefix}/${antdir}
set chmodarg			-Dchmod.fail=false
build.cmd 				./build.sh
build.args 				${chmodarg} -Ddist.name=${name}
build.target		 	dist
configure { }

install {
	set path	${destroot}${prefix}/java/

	system "install -d ${path}"
	system "install -d ${destroot}${prefix}/bin"
	system "cd ${worksrcpath}; cp -R ${name} ${path}"
	system "rm ${path}${name}/bin/*.bat"
    system "chmod -R ugo+r ${path}${name}" 
	system "ln -fs ${path}${name}/bin/ant ${destroot}${prefix}/bin/ant"
}

variant darwin {
    build.env				JAVA_HOME=/Library/Java/Home		
    extract.post_args		| gnutar -x 
}
