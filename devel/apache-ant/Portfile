# $Id: Portfile,v 1.9 2003/04/10 16:40:10 fkr Exp $

PortSystem 		1.0
name			apache-ant
version			1.5.3
categories		devel	
maintainers		sean@fuzzymagic.com
description		Java opensource build system
long_description	Ant is a Java based build tool. In theory it is kind of like \
			make without make's wrinkles. Ant uses XML build files that defines \
			a set of targets. Each target has dependencies (other targets) and \
			contains a set of tasks to perform.
homepage                http://jakarta.apache.org/ant/

platforms		darwin freebsd
master_sites		http://www.apache.org/dist/ant/source/
distname 		${name}-${version}-src
worksrcdir 		${name}-${version}
checksums		md5 38fff50776a39a7c42516cf464889656
set antdir              java/${name}
set instdir		${prefix}/${antdir}
set chmodarg		-Dchmod.fail=false
build.cmd 		./build.sh
build.args 		${chmodarg} -Ddist.name=${name}
build.target		dist
configure { }

install {
	set path	${destroot}${prefix}/java/

	system "install -d ${path}"
	system "install -d ${destroot}${prefix}/bin"
	system "cd ${worksrcpath}; cp -R ${name} ${path}"
	system "rm ${path}${name}/bin/*.bat"
    	system "chmod -R ugo+r ${path}${name}" 
	system "ln -fs ${path}${name}/bin/ant ${destroot}${prefix}/bin/ant"
}

variant darwin {
    build.env				JAVA_HOME=/Library/Java/Home		
    extract.post_args		| gnutar -x 
}
