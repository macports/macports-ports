# $Id$

PortSystem          1.0
name                qca
version             1.0
categories          devel crypto security
maintainers         rowue@macports.org
description         Qt Cryptographic Architecture
long_description \
    This library provides an easy API for the following features: SSL/TLS, \
    X509, SASL, RSA, Hashing (SHA1, MD5), Ciphers (BlowFish, 3DES, AES), \
    Functionality is supplied via plugins.

platforms           darwin

homepage            http://delta.affinix.com/qca/
master_sites        ${homepage}
use_bzip2           yes

checksums           md5 ee44022eb0e5b8b5df64c62630f6e6b6

depends_lib         port:qt3-mac

configure.args      --qtdir=${prefix}

post-build {
    system "install_name_tool -id ${prefix}/lib/libqca.1.dylib \
        ${worksrcpath}/libqca.1.dylib"
}

destroot {
    xinstall -m 755 -d ${destroot}${prefix}/lib ${destroot}${prefix}/include \
        ${destroot}${prefix}/share/doc/${name} \
        ${destroot}${prefix}/share/examples/${name}
    xinstall -m 644 -W ${worksrcpath} libqca.1.0.0.dylib \
        ${destroot}${prefix}/lib
    system "ln -sf libqca.1.0.0.dylib ${destroot}${prefix}/lib/libqca.dylib"
    system "ln -sf libqca.1.0.0.dylib ${destroot}${prefix}/lib/libqca.1.dylib"
    system "ln -sf libqca.1.0.0.dylib \
        ${destroot}${prefix}/lib/libqca.1.0.dylib"
    xinstall -m 644 -W ${worksrcpath}/src qca.h ${destroot}${prefix}/include
    xinstall -m 644 -W ${worksrcpath} COPYING INSTALL README TODO \
        ${destroot}${prefix}/share/doc/${name}
    eval file copy [glob ${worksrcpath}/examples/*] \
        ${destroot}${prefix}/share/examples/${name}
}

