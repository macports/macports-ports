# -*- coding: utf-8; mode: tcl; tab-width: 4; truncate-lines: t; indent-tabs-mode: nil; c-basic-offset: 4 -*-
# $Id$

PortSystem			1.0

name                gnat-booch95
version             20090216
revision            1
platforms           darwin
categories          lang
maintainers         macports.org:krischik
description         The Ada 95 Booch Components
long_description	The Ada 95 Booch Components

homepage			http://booch95.sourceforge.net
master_sites	    sourceforge:booch95

distfiles			bc-${version}.7z 
worksrcdir			bc-${version}

checksums           md5     2c5af5267c8f4a3b237f0338d4b9a337 \
                    sha1    095d7590ff92fbef93ca5703de6802cb4793ba13 \
                    rmd160  7475bb5fcc40b0ae447386f2e3469244b6a74439

use_bzip2			yes
use_parallel_build  yes
use_configure	    no

depends_lib         port:gnat-gcc
depends_build		port:p7zip

extract {
    system "
	pushd ${workpath};
	    7za x ${distpath}/${distfile};
	popd;
    "
}

build {
    system "
	pushd ${workpath}/${worksrcdir}/GNAT;
	    gnumake release;
	    gnumake debug;
	popd;
    "
}

destroot {
	xinstall -m 775	-d ${destroot}/${prefix}/lib/booch
	xinstall -m 775 -d ${destroot}/${prefix}/include/booch/src
	xinstall -m 775 -d ${destroot}/${prefix}/include/booch/GNAT
	xinstall -m 775 -d ${destroot}/${prefix}/include/booch/GNAT/Darwin-i686-Release
	xinstall -m 775 -d ${destroot}/${prefix}/include/booch/GNAT/Darwin-i686-Release/obj
	xinstall -m 775 -d ${destroot}/${prefix}/include/booch/GNAT/Darwin-i686-Release/lib
	xinstall -m 775 -d ${destroot}/${prefix}/include/booch/GNAT/Darwin-i686-Debug
	xinstall -m 775 -d ${destroot}/${prefix}/include/booch/GNAT/Darwin-i686-Debug/obj
	xinstall -m 775 -d ${destroot}/${prefix}/include/booch/GNAT/Darwin-i686-Debug/lib

	eval xinstall -m 664 [glob ${workpath}/${worksrcdir}/GNAT/Darwin-i686-Release/lib/*]	${destroot}/${prefix}/lib/booch
	eval xinstall -m 664 [glob ${workpath}/${worksrcdir}/src/*]								${destroot}/${prefix}/include/booch/src
	eval xinstall -m 664 [glob ${workpath}/${worksrcdir}/GNAT/Makefile]						${destroot}/${prefix}/include/booch/GNAT
	eval xinstall -m 664 [glob ${workpath}/${worksrcdir}/GNAT/booch_95.gpr]					${destroot}/${prefix}/include/booch/GNAT
	eval xinstall -m 664 [glob ${workpath}/${worksrcdir}/GNAT/Darwin-i686-Release/obj/*]	${destroot}/${prefix}/include/booch/GNAT/Darwin-i686-Release/obj
	eval xinstall -m 664 [glob ${workpath}/${worksrcdir}/GNAT/Darwin-i686-Release/lib/*]	${destroot}/${prefix}/include/booch/GNAT/Darwin-i686-Release/lib
	eval xinstall -m 664 [glob ${workpath}/${worksrcdir}/GNAT/Darwin-i686-Debug/obj/*]		${destroot}/${prefix}/include/booch/GNAT/Darwin-i686-Debug/obj
	eval xinstall -m 664 [glob ${workpath}/${worksrcdir}/GNAT/Darwin-i686-Debug/lib/*]		${destroot}/${prefix}/include/booch/GNAT/Darwin-i686-Debug/lib
}

# vim: set nowrap tabstop=4 shiftwidth=4 softtabstop=4 noexpandtab :
# vim: set textwidth=0 filetype=tcl foldmethod=marker nospell :
