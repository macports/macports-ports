PortSystem 1.0
name            m4
version         1.4.9
categories      devel
maintainers     blair@orcaware.com openmaintainer@macports.org
platforms       darwin
description     GNU macro processor 
long_description \
    GNU `m4' is an implementation of the traditional Unix macro         \
    processor.  It is mostly SVR4 compatible, although it has some      \
    extensions (for example, handling more than 9 positional parameters \
    to macros). `m4' also has built-in functions for including files,   \
    running shell commands, doing arithmetic, etc. Autoconf needs GNU   \
    `m4' for generating `configure' scripts, but not for running them.
homepage        http://www.gnu.org/software/m4/
master_sites    gnu
use_bzip2       yes
checksums       md5 bcfaf47194491a7a8b8d3c2811570b93 \
                sha1 28b8493688ceb752ee5a96ea8fc3a335cf44beb6 \
                rmd160 5a9b3d5a607f36c02aa818d5ded5b151f2b182e0
configure.args  --infodir=${prefix}/share/info \
                --program-prefix=g
post-destroot {
    cd ${destroot}${prefix}/share/info/
    file rename m4.info gm4.info
    delete ${destroot}${prefix}/lib/charset.alias
    if {[variant_isset with_default_names]} {
        foreach d {bin share/info share/man/man1} {
            cd ${destroot}${prefix}/$d
            foreach a [glob g*] {
                regexp g(.+) $a dummy b
                file link -hard $b g$b
            }
        }
    }
}

test.run        yes
test.target     check

variant with_default_names {}

livecheck.check regex
livecheck.url   http://ftp.gnu.org/gnu/${name}/?M=D
livecheck.regex ${name}-(\\d+\\.\\d+\\.\\d+)${extract.suffix}
