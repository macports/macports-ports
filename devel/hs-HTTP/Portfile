# $Id: Portfile 32770 2008-01-13 10:44:28Z ryandesign@macports.org $

PortSystem 1.0

name		hs-HTTP
set canonicalname	HTTP
version		3001.0.4
categories	devel haskell
maintainers	nomaintainer
platforms	darwin

description	Haskell client side HTTP library
long_description	\
		Haskell's HTTP package contains updated versions of	\
		Warrick Gray's excellent Haskell HTTP and Browser	\
		modules.

set hackage	http://hackage.haskell.org
homepage	http://www.haskell.org/http
master_sites	${hackage}/packages/archive/${canonicalname}/${version}
distname	${canonicalname}-${version}

checksums	md5     2cab180e319a4d7db25832cfa57cfbc5		\
		sha1    b08a2440b31e89fb75191593d98fe4c12c6cc0b0	\
		rmd160  322bd3d7e77d78737812652a1dcd44d687f85306

depends_build	port:ghc

configure	{ system "cd ${worksrcpath} && runhaskell Setup configure --ghc --prefix=${prefix}"
		}

build		{ system "cd ${worksrcpath} && runhaskell Setup build"
		}

destroot	{ system "cd ${worksrcpath} && runhaskell Setup copy --copy-prefix=${destroot}${prefix}"
                  system "cd ${worksrcpath} && runhaskell Setup register   --gen-script"
                  system "cd ${worksrcpath} && runhaskell Setup unregister --gen-script"

                  file mkdir ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/register.sh \
                            ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/unregister.sh \
                            ${destroot}${prefix}/libexec/${name}
                 }

post-activate	{ system "${prefix}/libexec/${name}/register.sh" }

#pre-deactivate	{ system "${prefix}/libexec/${name}/unregister.sh" }

