# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           gitlab 1.0
PortGroup           meson 1.0

gitlab.instance     https://git.pwmt.org
gitlab.setup        pwmt girara 0.4.3
revision            0
checksums           rmd160  e556260edbc76947816465260389d3791a87974d \
                    sha256  b53c2d6a96f9482252fc26844762d08c975b9677f0a33b2d584081d318800530 \
                    size    59765

categories          devel gnome
license             zlib
maintainers         {gmail.com:starkhalo @harciga} \
                    openmaintainer

description         Cross-platform widget toolkit based on GTK+

long_description \
    girara is a library that implements a user interface that focuses on    \
    simplicity and minimalism. Currently based on GTK+, a cross-platform    \
    widget toolkit, it proves an interface that focueses on three main com- \
    ponents: A so-called view widget that represents the actual application \
    (e.g. a website (browser), an image (image viewer) or the document      \
    (document viewer)), an input bar that is used to execute commands of    \
    the application and the status bar which provides the user with current \
    information.

depends_build-append \
                    port:gettext \
                    path:bin/pkg-config:pkgconfig

depends_lib         port:gettext-runtime \
                    path:lib/pkgconfig/glib-2.0.pc:glib2 \
                    path:lib/pkgconfig/gtk+-3.0.pc:gtk3 \
                    port:json-glib

compiler.c_standard 2017

configure.args-append \
                    -Ddocs=disabled

platform darwin     {
# Before 10.7 there's no getline() in stdio.h
# http://stackoverflow.com/a/1117158/205907
    if {${os.major} < 11} {
# Using CVS project implementation
# http://www.opensource.apple.com/source/cvs/cvs-47/cvs/lib/getline.c?txt
# http://www.opensource.apple.com/source/cvs/cvs-47/cvs/lib/getline.h?txt
# http://www.opensource.apple.com/source/cvs/cvs-47/cvs/lib/getdelim.c?txt
# http://www.opensource.apple.com/source/cvs/cvs-47/cvs/lib/getdelim.h?txt
        patchfiles-append   patch-getline.diff
    }
}
