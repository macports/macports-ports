# $Id$

PortSystem    1.0
PortGroup     python26 1.0

name          bzr-gtk
version       0.97.0
revision      1
set branch    [join [lrange [split ${version} .] 0 1] .]
categories    devel python
platforms     darwin
maintainers   raimue

description   Various GTK+ frontends for bzr
long_description  A bzr plugin that contains various GTK+ frontends to \
    different bzr commands.

homepage      http://bazaar-vcs.org/bzr-gtk
master_sites  http://launchpad.net/bzr-gtk/trunk/${version}/+download/

checksums     md5     b35d3d86c6e89e0a8d4039d948aa14fc \
              sha1    21498b12a4cc6f5c51e81131da11d7e5a45158a4 \
              rmd160  c87a690f9dd8b81907ca1d902b66a51fb2b0044b

depends_lib-append  port:bzr \
                    port:py26-gtk

universal_variant no

post-destroot {
    fs-traverse f "${destroot}${python.prefix}/bin ${destroot}${python.prefix}/share" {
        set pfile [string range $f [string length ${destroot}${python.prefix}] end]
        if {[file isdirectory $f]} {
            xinstall -d -m 0755 ${destroot}${prefix}${pfile}
        } else {
            ln -s ${python.prefix}${pfile} ${destroot}${prefix}${pfile}
        }
    }
}

livecheck.check regex
livecheck.url   ${homepage}
livecheck.regex {bzr-gtk-(\d+(?:\.\d+)*).tar.gz}
