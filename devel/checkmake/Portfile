# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           golang 1.0

go.setup            github.com/mrtazz/checkmake 0.3.2 v
revision            0
categories          devel
license             MIT
platforms           {darwin >= 21}
maintainers         {@TheRealKeto gmail.com:therealketo} openmaintainer

description         experimental tool for linting and checking Makefiles
long_description    ${name} is a {*}${description}. It may not do what you \
                    want it to.

checksums           ${distname}${extract.suffix} \
                        rmd160  bfeba662b6e33593225cab5112f0c69cf56acc75 \
                        sha256  450412ba6500ef7c4c8a0150a5e1a3d2e76591ce9f37609bcbd5508298ad9bef \
                        size    37580

patch.pre_args-replace  -p0 -p1
patchfiles          no-builder-name-email.diff

depends_build-append \
                    port:pandoc

# Vendored libraries cause failure, fetch them at build time
go.offline_build    no

build.cmd           make
build.target        all
build.args          BUILDER="MacPorts" \
                    VERSION="${version}"

destroot {
    xinstall -d ${destroot}${prefix}/share/man/man1
    xinstall -m 0755 ${worksrcpath}/${name} ${destroot}${prefix}/bin/
    xinstall -m 0644 \
        ${worksrcpath}/${name}.1 \
        ${destroot}${prefix}/share/man/man1/
}
