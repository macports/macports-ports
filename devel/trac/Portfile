# $Id$

PortSystem 1.0
PortGroup python 1.0

name			trac
version			0.10.4
categories		devel python
platforms		darwin
maintainers		dluke@geeklair.net
description		Wiki and issue tracking system.
long_description	Trac is an enhanced wiki and issue tracking system for \
			software development projects. Trac uses a minimalistic approach to \
			web-based software project management.

homepage	http://projects.edgewall.com/trac/
master_sites	http://ftp.edgewall.com/pub/trac/
distname	trac-${version}
checksums	md5 52a3a21ad9faafc3b59cbeb87d5a69d2

depends_lib	port:subversion-pythonbindings port:clearsilver \
		port:py-sqlite bin:${prefix}/bin/python:python24 \
		port:sqlite3

use_configure	no
build.cmd	${prefix}/bin/python setup.py
build.target	build

destroot.cmd	${prefix}/bin/python setup.py
destroot.destdir	--prefix=${prefix} --root=${destroot}

post-install {	ui_msg "See http://projects.edgewall.com/trac/wiki/TracInstall for information on setting up a new trac environment."
		}

variant postgres	{	depends_lib-delete port:sqlite3 port:py-sqlite
				depends_lib-append port:py-pgsql \
					port:py-egenix-mx-base
			}

variant mysql		{	depends_lib-delete port:sqlite3 port:py-sqlite
				depends_lib-append port:py-mysql

				ui_msg "Warning: MySQL support is currently experimental. That means it works for some people, but several issues remain, in particular regarding the use of unicode and the key length in the repository cache."
				ui_msg "See http://trac.edgewall.org/wiki/MySqlDb for more detailed information."
			}

post-destroot	{	file copy ${worksrcpath}/contrib ${destroot}${prefix}/share/trac/contrib
		}
