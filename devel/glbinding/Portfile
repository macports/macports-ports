# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           cmake 1.0
PortGroup           cxx11 1.0
PortGroup           github 1.0

github.setup        cginternals glbinding 2.1.1 v
categories          devel
platforms           darwin
maintainers         gmail.com:ken.cunningham.webuse openmaintainer
license             MIT

description         glbinding is an MIT licensed, cross-platform C++ binding for the OpenGL API
long_description    glbinding leverages modern C++11 features like enum classes, lambdas, and \
                    variadic templates, instead of relying on macros. All OpenGL symbols are \
                    real functions and variables. It provides type-safe parameters, per feature \
                    API header, lazy function resolution, multi-context and multi-thread support, \
                    global and local function callbacks, meta information about the generated OpenGL \
                    binding and the OpenGL runtime, as well as tools and examples for quick-starting \
                    your projects. Based on the OpenGL API specification (gl.xml) glbinding is \
                    generated using python scripts and templates that can be easily adapted to fit custom needs.

checksums           rmd160  1c95c08d50d0e14c890d890fbfb1d0c612c16562 \
                    sha256  2ce7d20d92703a855ce2ccf1f349d6721c0d9d8aab9da42aa303f0831290f77c
                    
pre-fetch {
    if {${os.platform} eq "darwin" && ${os.major} < 13} {
        ui_error "Presently requires OS X 10.9 or later (requires Thread-Local Storage)"
        return -code error "incompatible Mac operating system version"
    }
}

depends_build-append port:py27-pystache \
                     port:glfw

configure.args-append -DPYTHON_EXECUTABLE:FILEPATH=${prefix}/bin/python2.7
cmake.out_of_source yes
patchfiles-append patch-glbinding-cmake-installdirs.diff

variant docs description "install documentation" {
    configure.args-append -DOPTION_BUILD_DOCS:BOOL=ON
    depends_build-append port:doxygen
}

variant examples description "install examples" {
    configure.args-append -DOPTION_BUILD_EXAMPLES:BOOL=ON
    depends_build-append port:glew \
                         port:cpplocate
}
