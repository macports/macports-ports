# $Id: Portfile 20275 2006-11-01 16:31:59Z blair@macports.org $

PortSystem 1.0
name		hs-zlib
set shortname	zlib
version		0.2
categories	devel
maintainers	gwright@opendarwin.org
platforms	darwin

description	The Haskell Zlib Binding
long_description	\
		Haskell bindings to the Zlib library for compression \
                and decompression in gzip and zlib format.  The library \
		acts directly on ByteString values.

homepage	http://www.haskell.org/~duncan/zlib
master_sites	${homepage}
distname	${shortname}

set worksrcdir	${shortname}

fetch		{ cd ${workpath}
		  system "darcs get --partial ${homepage}"
		}

extract		{ }

checksum	{ }


depends_build	port:ghc		\
		port:darcs

depends_lib	port:zlib

configure	{ cd ${worksrcpath}
		  reinplace "s|base.*fps|base|" zlib.cabal
		  system "runghc Setup configure --ghc --prefix=${prefix}"
		}

build		{ cd ${worksrcpath}
		  system "runghc Setup build"
		}

destroot	{ cd ${worksrcpath}
		  system "runghc Setup copy --copy-prefix=${destroot}${prefix}"
                }

post-activate   { cd ${worksrcpath}
		  catch {system "runghc Setup unregister"}
		  system "runghc Setup register"
                }


 
