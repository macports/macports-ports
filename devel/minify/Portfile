# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           golang   1.0

go.setup            github.com/tdewolff/minify 2.24.5 v
revision            0

description         Go minifier for web formats.

long_description    \
    Minify is a minifier CLI written in Go. It can minify HTML5, CSS3, JS, JSON, SVG and XML.

categories          devel
installs_libs       no
license             MIT
maintainers         {@ZapDotZip gmail.com:zapdotzip} openmaintainer

checksums           ${distname}${extract.suffix} \
                        rmd160  5d772b0cf1f68138a15787678a6a147b64f027a7 \
                        sha256  4f384f6d7fd9509026f582b3a1e4afb30c1d8855efbc607a15a9943d9a73e362 \
                        size    7755462

go.vendors          gopkg.in/yaml.v3 \
                        lock    v3.0.1 \
                        rmd160  e85ac1368fb7f9ef945b7fd7bd608a1f0d261c12 \
                        sha256  f3ea6be3f405ec25f8799773355aba54f8831d11f5315a01155bdc69b92eca7b \
                        size    91208 \
                    gopkg.in/check.v1 \
                        lock    20d25e280405 \
                        rmd160  412aa0d109919182ff84259e9b5bbc9f24d78117 \
                        sha256  233f8faf427ce6701ac3427f85c28bc6b6ae7cdc97a303a52873c69999223325 \
                        size    30360 \
                    golang.org/x/sys \
                        lock    v0.30.0 \
                        rmd160  4cd711df5da2e159b6efbb7fa42ae0a3a3f6eb53 \
                        sha256  76cfe40018bfa5418c1d19d47d8353c3375594013e2b2feea49f06018d2a3102 \
                        size    1523466 \
                    github.com/tdewolff/test \
                        lock    v1.0.11 \
                        rmd160  4cbe095642b04e477eeddbe435c4083190baafc0 \
                        sha256  71b183acdc8ac70986afd458b90bb9a612ff5de385713675ee1e826fa313a1ac \
                        size    3427 \
                    github.com/tdewolff/parse \
                        lock    0efcf90bef1a \
                        rmd160  efc88d6db05851170b2e23c10cdacf45fb703665 \
                        sha256  c498e49147bfcdf9b6b4e7caa60d4f5be356e66055b451c7b15945588170b331 \
                        size    112533 \
                    github.com/tdewolff/argp \
                        lock    079abae893fb \
                        rmd160  31e75ff18a6ce40b577217af9c95cad4c377af27 \
                        sha256  9a4ed1dfd1b0bff28f504053460295830af289ecda3b6ceb6e2185b6041ae962 \
                        size    19016 \
                    github.com/pelletier/go-toml \
                        lock    v1.9.5 \
                        rmd160  82b54e63618f66f791ce83a86ec04b85b24daf96 \
                        sha256  335d53529bfead717c2c44454e05a2396918bba311e3262b8bcb295b7c8772fd \
                        size    106961 \
                    github.com/mattn/go-sqlite3 \
                        lock    v1.14.22 \
                        rmd160  51cca4f09f23a404613e3eb48b77a44f4d98814e \
                        sha256  02c8bc2780ff6f0b845e01efe0cfa006d8f85e48a06cd6c8566c21c3b88a644e \
                        size    2602371 \
                    github.com/lib/pq \
                        lock    v1.10.9 \
                        rmd160  beb0e233773f49d8d08ee991abf23bc8febf69d0 \
                        sha256  08610bf0370b202bee369b7303c3085e02c7f6fdfd42a3f58e8f033088151eea \
                        size    114528 \
                    github.com/jmoiron/sqlx \
                        lock    v1.4.0 \
                        rmd160  31cbbd492d0ff6b9910a91eb03ffac4c7a095206 \
                        sha256  13391150ebd301bf2c3f97424273943499ec8d362c0fe7316430c255b6de198f \
                        size    54560 \
                    github.com/go-sql-driver/mysql \
                        lock    v1.8.1 \
                        rmd160  f32a15ddd5c0a9e628bf1d6fa236f0865b1f1697 \
                        sha256  a3d9fcb9479ffb100441dee59ebcefeb6306f6dd3549f7c429b91c5e9399a80d \
                        size    105661 \
                    github.com/fsnotify/fsnotify \
                        lock    v1.8.0 \
                        rmd160  01a60765fa66f34bdc2f01709845aefd4477e0cf \
                        sha256  f3223ec17e4d339182ca284b8d03e6d3ba3ebb9703b35da6ffd2b7cfd6619cc5 \
                        size    72316 \
                    github.com/djherbis/atime \
                        lock    v1.1.0 \
                        rmd160  895c7d4dd8841c7dde34e2842715d75022fdce08 \
                        sha256  65d7b3933a59b2dc7ff25ee141e66680dd2a6142bdd84048b0430955296ef08d \
                        size    3142 \
                    filippo.io/edwards25519 \
                        repo    github.com/FiloSottile/edwards25519 \
                        lock    v1.1.0 \
                        rmd160  32e76862168e566190f9be95e5a88dcb10b3a6a2 \
                        sha256  a68a54423370e136bf03e4217d2fba807b4d041f873f6ebbcfc8ad4ba9925f5d \
                        size    47132

build.pre_args-append \
    -ldflags \"-s -w -X 'main.Version=${version}' \" -trimpath

build.args          -o ${worksrcpath}/cmd/${name}/${name} ./cmd/minify


destroot {
    xinstall -m 0755 ${worksrcpath}/cmd/${name}/${name} ${destroot}${prefix}/bin/
    xinstall -d -m 0755 ${destroot}${prefix}/etc/bash_completion.d
    copy ${worksrcpath}/cmd/${name}/bash_completion ${destroot}${prefix}/etc/bash_completion.d/${name}
}
