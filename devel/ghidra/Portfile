# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           app 1.0
PortGroup           github 1.0

github.setup        NationalSecurityAgency ghidra 10.1
homepage            https://ghidra-sre.org/
github.tarball_from releases
git.branch          Ghidra_${version}_build
master_sites-append ${github.homepage}/releases/download/${git.branch} ${homepage}
use_zip             yes
distname            ${name}_${version}_PUBLIC_20211210
checksums           rmd160  067b14d79a0b7c852b303781a57a8dca74d6077b \
                    sha256  99139c4a63a81135b3b63fe9997a012a6394a766c2c7f2ac5115ab53912d2a6c \
                    size    348995964
revision            0

categories          devel
maintainers         {1e0.co.uk:dev @hexagonal-sun} openmaintainer
description         A software reverse engineering (SRE) suite of tools developed by NSA's \
                    Research Directorate in support of the Cybersecurity mission
long_description    ${description}
license             Apache
platforms           darwin

depends_lib-append  port:openjdk11-zulu
use_configure       no
universal_variant   no

build {}

set javadest        "${prefix}/share/java/${name}-${version}"
destroot {
    file mkdir "${destroot}${javadest}"
    file copy "${worksrcpath}/Extensions" "${destroot}${javadest}/"
    file copy "${worksrcpath}/GPL" "${destroot}${javadest}/"
    file copy "${worksrcpath}/Ghidra" "${destroot}${javadest}/"
    file copy "${worksrcpath}/LICENSE" "${destroot}${javadest}/"
    file copy "${worksrcpath}/docs" "${destroot}${javadest}/"
    file copy "${worksrcpath}/ghidraRun" "${destroot}${javadest}/"
    file copy "${worksrcpath}/licenses" "${destroot}${javadest}/"
    file copy "${worksrcpath}/server" "${destroot}${javadest}/"
    file copy "${worksrcpath}/support" "${destroot}${javadest}/"
}

# app settings
app.create yes
app.name GHIDRA
app.executable "${javadest}/ghidraRun"
app.icon "support/ghidra.ico"
app.retina yes
