# $Id$

PortSystem		1.0
PortGroup		xcode 1.0

name			libsdl_gfx-framework
set my_name		SDL_gfx
version			2.0.16
categories		devel graphics
platforms		macosx
maintainers		nox openmaintainer
description		graphics primitives SDL extension

long_description	The SDL_gfx library evolved out of the \
			SDL_gfxPrimitives code which provided basic drawing \
			routines such as lines, circles or polygons and \
			SDL_rotozoom which implemented a interpolating \
			rotozoomer for SDL surfaces. The current components of \
			the SDL_gfx library are: Graphic Primitives, \
			Rotozoomer, Framerate control, MMX image filters. \
			It is backwards compatible to the above mentioned \
			code. It is written in plain C and can be used in C++ \
			code.

homepage		http://www.ferzkopp.net/~aschiffler/Software/SDL_gfx-2.0/
master_sites		${homepage}
distname		${my_name}-${version}
dist_subdir             libsdl_gfx
checksums		md5 22dc2d9d916197829f9342c490d2d02b \
				sha1 c0277d25daf4b680876ef04a893f64e90d9ce03d \
				rmd160 1ee1b19f5699b5f3661a9ba461bc44a1e4f135da

depends_lib		port:libsdl-framework

worksrcdir		${distname}/PB

universal_variant no

xcode.target			SDL_gfx
xcode.destroot.type		framework
xcode.destroot.settings SKIP_INSTALL=NO

post-extract {
	system "tar -xzvf \"${workpath}/${distname}/Other Builds/OSX-PB.tgz\" -C ${workpath}/${distname}"
}

post-patch {
	reinplace "s|\$(SYSTEM_LIBRARY_DIR)/Frameworks|/Library/Frameworks|g" \
		${worksrcpath}/SDL_gfx.pbproj/project.pbxproj
	reinplace "s|\$(HOME)/Library/Frameworks|/Library/Frameworks|g" \
		${worksrcpath}/SDL_gfx.pbproj/project.pbxproj
	reinplace "s|/Users/ttongue/Library/Frameworks|/Library/Frameworks|g" \
		${worksrcpath}/SDL_gfx.pbproj/project.pbxproj
	reinplace "s|/Users/ttongue/Desktop/Code/PB/test/SDL_gfx-2.0.3|..|g" \
		${worksrcpath}/SDL_gfx.pbproj/project.pbxproj
}

post-destroot {
	set framework_dir /Library/Frameworks
	xinstall -m 0755 -d ${destroot}${framework_dir}
	system "cp -vR ${worksrcpath}/build/Deployment/SDL_gfx.framework ${destroot}${framework_dir}"
}
