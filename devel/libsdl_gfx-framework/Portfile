# $Id$

PortSystem      1.0
PortGroup       xcode 1.0

name            libsdl_gfx-framework
set my_name     SDL_gfx
version         2.0.16
categories      devel graphics
platforms       macosx
maintainers     nox openmaintainer
description     graphics primitives SDL extension

long_description \
    The SDL_gfx library evolved out of the SDL_gfxPrimitives code which provided basic drawing \
    routines such as lines, circles or polygons and SDL_rotozoom which implemented a interpolating \
    rotozoomer for SDL surfaces. The current components of the SDL_gfx library are: Graphic \
    Primitives, Rotozoomer, Framerate control, MMX image filters. It is backwards compatible to \
    the above mentioned code. It is written in plain C and can be used in C++ code.

homepage        http://www.ferzkopp.net/~aschiffler/Software/SDL_gfx-2.0/
master_sites    ${homepage}
distname        ${my_name}-${version}
dist_subdir     libsdl_gfx

depends_lib		port:libsdl-framework

checksums       md5 22dc2d9d916197829f9342c490d2d02b \
                sha1 c0277d25daf4b680876ef04a893f64e90d9ce03d \
                rmd160 1ee1b19f5699b5f3661a9ba461bc44a1e4f135da

xcode.target        ${my_name}
xcode.destroot.type framework

universal_variant   no
# Dummy configure to enable universal variant.
#use_configure	yes
#configure		{}

post-extract {
    system "cd ${worksrcpath} && unzip \"Other Builds/OSX-PB-XCode.zip\""
    system "cd ${worksrcpath} && \
        tar -xzvf \"Other Builds/OSX-PB.tgz\"; mv PB/English.lproj ."
}

post-patch {
    reinplace -E "/SKIP_INSTALL/d" ${worksrcpath}/SDL_gfx.pbproj/project.pbxproj
}

# Waiting on #12429.
#variant universal {
#	xcode.build.settings-append	"ARCHS=\"ppc i386\""
#	xcode.destroot.settings		${xcode.build.settings}
#}

livecheck.check regex
livecheck.url   http://www.ferzkopp.net/joomla/content/view/19/14/
livecheck.regex "${my_name}-(\\d+\\.\\d+(?:\\.\\d+)+)"
