--- src/tbb/tools_api/ittnotify_config.h.orig	2021-12-17 21:40:54.000000000 +0800
+++ src/tbb/tools_api/ittnotify_config.h	2022-05-04 14:37:07.000000000 +0800
@@ -151,6 +151,10 @@
 #  define ITT_ARCH_ARM  4
 #endif /* ITT_ARCH_ARM */
 
+#ifndef ITT_ARCH_PPC
+#  define ITT_ARCH_PPC  3
+#endif /* ITT_ARCH_PPC */
+
 #ifndef ITT_ARCH_PPC64
 #  define ITT_ARCH_PPC64  5
 #endif /* ITT_ARCH_PPC64 */
@@ -170,7 +174,9 @@
 #    define ITT_ARCH ITT_ARCH_ARM
 #  elif defined __aarch64__
 #    define ITT_ARCH ITT_ARCH_ARM64
-#  elif defined __powerpc64__
+#  elif defined __powerpc__ || defined __ppc__
+#    define ITT_ARCH ITT_ARCH_PPC
+#  elif defined __powerpc64__ || defined __ppc64__
 #    define ITT_ARCH ITT_ARCH_PPC64
 #  endif
 #endif


--- src/tbb/tools_api/ittnotify_static.c.orig	2021-12-17 21:40:54.000000000 +0800
+++ src/tbb/tools_api/ittnotify_static.c	2022-05-04 14:27:49.000000000 +0800
@@ -116,7 +116,7 @@
 #define ANDROID_ITTNOTIFY_DEFAULT_PATH_MASK(x)  "/data/data/com.intel.vtune/perfrun/lib" \
                                                 #x "/runtime/libittnotify.so"
 
-#if ITT_ARCH==ITT_ARCH_IA32 || ITT_ARCH==ITT_ARCH_ARM
+#if ITT_ARCH==ITT_ARCH_IA32 || ITT_ARCH==ITT_ARCH_ARM || ITT_ARCH==ITT_ARCH_PPC
 #define ANDROID_ITTNOTIFY_DEFAULT_PATH  ANDROID_ITTNOTIFY_DEFAULT_PATH_MASK(32)
 #else
 #define ANDROID_ITTNOTIFY_DEFAULT_PATH  ANDROID_ITTNOTIFY_DEFAULT_PATH_MASK(64)
@@ -126,7 +126,7 @@
 
 
 #ifndef LIB_VAR_NAME
-#if ITT_ARCH==ITT_ARCH_IA32 || ITT_ARCH==ITT_ARCH_ARM
+#if ITT_ARCH==ITT_ARCH_IA32 || ITT_ARCH==ITT_ARCH_ARM || ITT_ARCH==ITT_ARCH_PPC
 #define LIB_VAR_NAME INTEL_LIBITTNOTIFY32
 #else
 #define LIB_VAR_NAME INTEL_LIBITTNOTIFY64

