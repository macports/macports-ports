# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           golang 1.0

go.setup            github.com/mvdan/sh 3.0.0 v
name                shfmt
categories          devel
maintainers         {amake @amake} openmaintainer
license             BSD

description         Autoformat shell script source code

long_description    A shell script formatter supporting POSIX shell, Bash, and mksh.

go.package          mvdan.cc/sh

checksums           ${distname}${extract.suffix} \
                        rmd160  8fffd4e6f484abcea2ce93274a25cedcfa777b1b \
                        sha256  6e6f2b938fd62bd96f6ade51f3f00e4f9f44b5848a3258d91cfe2d030ce7166d \
                        size    182676

go.vendors          github.com/davecgh/go-spew \
                        lock    v1.1.0 \
                        rmd160  0303eae19a01f38fe314921fd965e4d09b9ef3ad \
                        sha256  810a597004388d68bb92d8aa612375419ba1080dd5fc2c66dd41b58f0ba4442c \
                        size    42348 \
                    github.com/kr/pretty \
                        lock    v0.1.0 \
                        rmd160  9aa7a5aad4c48840eecfd0f80186d1fb5ded0fd6 \
                        sha256  f6c3f89667c63e5b7f1fc6ee2c06b6a6bfdce88f3a965ccd395b64c6f95c9a47 \
                        size    8553 \
                    github.com/kr/text \
                        lock    v0.1.0 \
                        rmd160  0b3c78459e227170a3b80a0103d87a3eef77ed88 \
                        sha256  5ed970aad0da3cba3cffacdb4d154a162a8968655ee6d6f7b627e71b869efaf6 \
                        size    8691 \
                    github.com/pkg/diff \
                        lock    531926345625 \
                        rmd160  f236c679f97868c7dd4b4480be496cbc21708e11 \
                        sha256  bfcbcb7bcb73b77170a2e5d5bff428165782c1182775b7db1320dd6460eee940 \
                        size    11585 \
                    github.com/pmezard/go-difflib \
                        lock    v1.0.0 \
                        rmd160  fc879bfbdef9e3ff50844def58404e2b5a613ab8 \
                        sha256  7cd492737641847266115f3060489a67f63581e521a8ec51efbc280c33fc991f \
                        size    11409 \
                    github.com/rogpeppe/go-internal \
                        lock    v1.5.0 \
                        rmd160  0b8646a8d157509543c32cfbb11984051a7b1e6a \
                        sha256  7bc0a4bd2e917780c235429d6b7e36cb5202a6d34871b8e804e6dab0df529fe2 \
                        size    120345 \
                    github.com/sergi/go-diff \
                        lock    v1.0.0 \
                        rmd160  c5ac5f7253544101282f5477a71560d1fd6c3e58 \
                        sha256  147eecf13dff7c6715ada19e097d4c3b7d20b169b475861a98e41e27b891d062 \
                        size    41633 \
                    github.com/stretchr/objx \
                        lock    v0.1.0 \
                        rmd160  fa58b6a0f55fce44b3d4e246b07574f016a1dabf \
                        sha256  e80eb3ee16d44676befb5b8044459492f73e6f153ad3f28b13949c9f9cfaf558 \
                        size    109497 \
                    github.com/stretchr/testify \
                        lock    v1.4.0 \
                        rmd160  86bd663e13ea7266334c47689074df16252db5ff \
                        sha256  8ed95078bfd318ea477da509e6b16e6cf8d0d1b6b8d93b1f6097c6ba2a6df788 \
                        size    110114 \
                    golang.org/x/crypto \
                        lock    34f69633bfdc \
                        rmd160  5d15f3a84f57a31a53c54fd91d1e7dd119aeb4d1 \
                        sha256  10614339575bad21bbff27fbd48dd0a60fdeb21fbdc2997616f8502869a340c3 \
                        size    1708072 \
                    golang.org/x/sync \
                        lock    cd5d95a43a6e \
                        rmd160  8bef422550566dc5e53557a975560a4f0224e509 \
                        sha256  0b7b3e06ee571c92736ea8f11b6d2d075ca6e75008f16e8653be49c33e2876a3 \
                        size    16964 \
                    golang.org/x/sys \
                        lock    543471e840be \
                        rmd160  520ff85e88ca8982f90c6633679b6a88817a92dd \
                        sha256  bcdf2a11b7717b8024194eaef812801d6d88fd944a715676c155c373d073365d \
                        size    1494294 \
                    golang.org/x/xerrors \
                        lock    1b5146add898 \
                        rmd160  2cc4b800c18d0a62360e39184f2a99b1ebd49a95 \
                        sha256  6369e59584a604215ed9649649fe273e46295d3fb8d5a811f4028844c861faaa \
                        size    12201 \
                    gopkg.in/check.v1 \
                        lock    41f04d3bba15 \
                        rmd160  1e5543a8e6a3159296ee63e28cbde9931a04f6b3 \
                        sha256  c41575a73d10809f89b05ef9e783f2d53facdc6573697770d30efb05a9d2dc28 \
                        size    31612 \
                    gopkg.in/errgo.v2 \
                        lock    v2.1.0 \
                        rmd160  6629a8436aacbbf5e42c0211d591941bfd8ce34d \
                        sha256  c14c14eba0928e6dfa4f89449bdbe2b6feafc76116b60bdc1b51956abf55c6bf \
                        size    9938 \
                    gopkg.in/yaml.v2 \
                        lock    v2.2.2 \
                        rmd160  03aea7b7e847179b29044d5a928b9f8a889fe87b \
                        sha256  da1e31b7beb9a6907947caa794134bdc2501d1a3474568b61cc2562a398d3d87 \
                        size    70676 \
                    github.com/mvdan/editorconfig \
                        lock    890940e3f00e \
                        rmd160  e5500982602e74065e891b0466259d108004109e \
                        sha256  1db8d9eaa1b727c2e14332af3db5ffdc2692bf138448927a5feab843a75c3f7d \
                        size    9259

post-extract {
    # Author uses custom host name for his packages
    move ${gopath}/src/github.com/mvdan/editorconfig ${gopath}/src/mvdan.cc/editorconfig
}

# Disable "module mode" on modular project to get the compiler to look for
# locally downloaded dependencies
build.env-append    GO111MODULE=off
build.target        ${go.package}/cmd/shfmt

destroot {
    xinstall -m 0755 ${worksrcpath}/${name} ${destroot}${prefix}/bin
}

livecheck.regex     {archive/v([0-9.]+)\.tar\.gz}
