# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           golang 1.0

go.setup            github.com/mvdan/sh 3.1.2 v
name                shfmt
categories          devel
maintainers         {amake @amake} openmaintainer
license             BSD

description         Autoformat shell script source code

long_description    A shell script formatter supporting POSIX shell, Bash, and mksh.

go.package          mvdan.cc/sh

checksums           ${distname}${extract.suffix} \
                        rmd160  f69775138aad4058bbc31248b18eddca09ccabdc \
                        sha256  4d08a3f2122146b1b7e1ef69e03b3b724e9c6f3f38dfb8d0958b5ac9dc883aaf \
                        size    193429
go.vendors          github.com/creack/pty \
                        lock    v1.1.9 \
                        rmd160  313665ed173a88720a115fdd37e51db5ea4c76d7 \
                        sha256  42cf7d9354fb2449e7c81b11bf5701236a751926ce96cd027d4d931729220a62 \
                        size    8219 \
                    github.com/davecgh/go-spew \
                        lock    v1.1.0 \
                        rmd160  0303eae19a01f38fe314921fd965e4d09b9ef3ad \
                        sha256  810a597004388d68bb92d8aa612375419ba1080dd5fc2c66dd41b58f0ba4442c \
                        size    42348 \
                    github.com/google/renameio \
                        lock    v0.1.0 \
                        rmd160  ba2fe6be9202636dcf17dd2d1c495aceed231cc9 \
                        sha256  dd166ecfcacfff3e36567edab9ef94affe756932becbf382939c20646f504a83 \
                        size    9728 \
                    github.com/kr/pretty \
                        lock    v0.2.0 \
                        rmd160  45bbf0be7a3328e33186718ab12cb506c0f5a073 \
                        sha256  35fb1f8788552fc7df2120bc06dd34e00aa3284d23c250fc1f143eef51d08586 \
                        size    8762 \
                    github.com/kr/pty \
                        lock    v1.1.1 \
                        rmd160  67ff2355f17e1fe71e958bba46c7f138a7d5ae40 \
                        sha256  6124bf7646c16cc3d2f1287fe8a5dd3a1930f0333f6362e74006f65d88412a2d \
                        size    5684 \
                    github.com/kr/text \
                        lock    v0.2.0 \
                        rmd160  48558c7e8ff67d510f83c66883907e95f4783163 \
                        sha256  2f2e21ac8a9d523e88cbba4039441defc4a66bfaa78811c900a88fcf28729c4c \
                        size    8702 \
                    github.com/pkg/diff \
                        lock    531926345625 \
                        rmd160  f236c679f97868c7dd4b4480be496cbc21708e11 \
                        sha256  bfcbcb7bcb73b77170a2e5d5bff428165782c1182775b7db1320dd6460eee940 \
                        size    11585 \
                    github.com/pmezard/go-difflib \
                        lock    v1.0.0 \
                        rmd160  fc879bfbdef9e3ff50844def58404e2b5a613ab8 \
                        sha256  7cd492737641847266115f3060489a67f63581e521a8ec51efbc280c33fc991f \
                        size    11409 \
                    github.com/rogpeppe/go-internal \
                        lock    v1.5.2 \
                        rmd160  b548fabd47c81c9830845063dcead0fa9b179884 \
                        sha256  2cf697f2741088ba096df533769a29730bbef1379f68d0432e9bc0b1d548cffc \
                        size    121296 \
                    github.com/sergi/go-diff \
                        lock    v1.0.0 \
                        rmd160  c5ac5f7253544101282f5477a71560d1fd6c3e58 \
                        sha256  147eecf13dff7c6715ada19e097d4c3b7d20b169b475861a98e41e27b891d062 \
                        size    41633 \
                    github.com/stretchr/objx \
                        lock    v0.1.0 \
                        rmd160  fa58b6a0f55fce44b3d4e246b07574f016a1dabf \
                        sha256  e80eb3ee16d44676befb5b8044459492f73e6f153ad3f28b13949c9f9cfaf558 \
                        size    109497 \
                    github.com/stretchr/testify \
                        lock    v1.4.0 \
                        rmd160  86bd663e13ea7266334c47689074df16252db5ff \
                        sha256  8ed95078bfd318ea477da509e6b16e6cf8d0d1b6b8d93b1f6097c6ba2a6df788 \
                        size    110114 \
                    golang.org/x/sync \
                        lock    cd5d95a43a6e \
                        rmd160  8bef422550566dc5e53557a975560a4f0224e509 \
                        sha256  0b7b3e06ee571c92736ea8f11b6d2d075ca6e75008f16e8653be49c33e2876a3 \
                        size    16964 \
                    golang.org/x/sys \
                        lock    9197077df867 \
                        rmd160  cc99d0f553effc36dab8502f866e32e1113292b5 \
                        sha256  ff55a5112457857a609c740b30011906135414446f8b02396c7faa613f37a0d2 \
                        size    1538559 \
                    golang.org/x/term \
                        lock    ad39bd3f0407 \
                        rmd160  71b379fd8428cf4204f2ef83244ff77a26986988 \
                        sha256  2614c636c1ff18bf771909fc742f9c2ac7da90a5e591ecdd82f227477c781998 \
                        size    3898 \
                    golang.org/x/xerrors \
                        lock    9bdfabe68543 \
                        rmd160  eee9929ac1c0380402c45b388077c5c505f13311 \
                        sha256  dc1be1d7efb43643507e87352ae7161883c48cb5116a20a1739ab93ab558bccf \
                        size    13661 \
                    gopkg.in/check.v1 \
                        lock    788fd7840127 \
                        rmd160  b63165c8909a27edc15dda210df66a1b49efb49e \
                        sha256  7e5547c6471cc48da89a7c87f965b20ca5311f43fc4d883ca62f9fccf7551630 \
                        size    31597 \
                    gopkg.in/check.v1 \
                        lock    41f04d3bba15 \
                        rmd160  1e5543a8e6a3159296ee63e28cbde9931a04f6b3 \
                        sha256  c41575a73d10809f89b05ef9e783f2d53facdc6573697770d30efb05a9d2dc28 \
                        size    31612 \
                    gopkg.in/errgo.v2 \
                        lock    v2.1.0 \
                        rmd160  6629a8436aacbbf5e42c0211d591941bfd8ce34d \
                        sha256  c14c14eba0928e6dfa4f89449bdbe2b6feafc76116b60bdc1b51956abf55c6bf \
                        size    9938 \
                    gopkg.in/yaml.v2 \
                        lock    v2.2.2 \
                        rmd160  03aea7b7e847179b29044d5a928b9f8a889fe87b \
                        sha256  da1e31b7beb9a6907947caa794134bdc2501d1a3474568b61cc2562a398d3d87 \
                        size    70676 \
                    github.com/mvdan/editorconfig \
                        lock    e40951bde157 \
                        rmd160  1262f81708a7f5f626fa77318897780a3104373a \
                        sha256  ff6d5f23da7cfd2d9afaa6f139365cd6d2a52f56ffc4a44e727bc9096c959744 \
                        size    9311

post-extract {
    # Author uses custom host name for his packages
    move ${gopath}/src/github.com/mvdan/editorconfig ${gopath}/src/mvdan.cc/editorconfig
}

# Disable "module mode" on modular project to get the compiler to look for
# locally downloaded dependencies
build.env-append    GO111MODULE=off
build.pre_args      -ldflags '-X main.version=${version}'
build.post_args     ${go.package}/cmd/shfmt

destroot {
    xinstall -m 0755 ${worksrcpath}/${name} ${destroot}${prefix}/bin
}

livecheck.regex     {archive/v([0-9.]+)\.tar\.gz}
