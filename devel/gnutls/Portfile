# $Id: Portfile,v 1.17 2006/05/12 07:53:08 mww Exp $

PortSystem 1.0
name		gnutls
version		1.2.11
categories	devel
maintainers	mij@opendarwin.org
description	GNU Transport Layer Security Library
homepage	http://www.gnutls.org/
platforms	darwin

long_description GnuTLS is a portable ANSI C based library which \
		 implements the TLS 1.0 and SSL 3.0 protocols. The library \
		 does not include any patented algorithms and is available \
		 under the GNU Lesser GPL license.

master_sites	ftp://ftp.gnutls.org/pub/crypto/${name}/ \
		ftp://ftp.gnupg.org/gcrypt/${name}/ \
		ftp://ftp.gnutls.org/pub/${name}/ \
		ftp://ftp.gnupg.org/gcrypt/alpha/${name}/attic/

checksums	sha1 4d5167091c72f994ed97e1406ae886f3c2757d49

use_bzip2	yes

depends_lib	port:libgcrypt port:libtasn1 port:opencdk

configure.env	LDFLAGS="-L${prefix}/lib" CPPFLAGS="-I${prefix}/include -D_asn1_find_node=asn1_find_node"
configure.args	--mandir=${prefix}/share/man --infodir=${prefix}/share/info \
			--with-libtasn1-prefix=${prefix} --with-libreadline-prefix=${prefix}

platform darwin 8 { build.env-append MACOSX_DEPLOYMENT_TARGET=10.4
		    configure.env-append MACOSX_DEPLOYMENT_TARGET=10.4 \
			CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0 }
