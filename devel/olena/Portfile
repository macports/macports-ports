# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:s

PortSystem              1.0
PortGroup               qt4   1.0
PortGroup               cxx11 1.1

name                    olena
version                 2.0
revision                2
categories              devel framework graphics science
platforms               darwin
license                 GPL-2
maintainers             {mcalhoun @MarcusCalhoun-Lopez} openmaintainer
description             Software platform for efficient and generic image processing
long_description        It is composed of a Generic and efficient C++ image \
		                processing library, a framework for Document Image \
		                Analysis and Python bindings.
homepage                https://www.lrde.epita.fr/wiki/Olena
master_sites            http://www.lrde.epita.fr/dload/olena/

checksums               md5     b5c28d5f9e184bbefb50757115fa6551 \
                        sha1    d3a829fa56bff4edbca58af0c9a39c9569820c60 \
                        rmd160  276abd7a2af6e7627aa1ab91df0ea7fd11a713ef

patchfiles-append       patch-gdcm_libs.diff

depends_build-append    port:swig \
                        port:swig-python

depends_lib-append      port:boost \
                        port:cfitsio \
                        port:fftw-3 \
                        port:gdcm2 \
                        port:GraphicsMagick \
                        port:poppler \
                        port:python27 \
                        port:tesseract \
                        port:tiff

depends_run-append      port:fop

configure.args-append   --enable-swilena \
                        --enable-scribo \
                        --enable-apps \
                        --enable-tools

# use GraphicsMagick instead of ImageMagick
configure.args-append   --with-imagemagickxx=no

configure.env-append    PYTHON=${prefix}/bin/python2.7

# required by tesseract
configure.cxxflags-append -std=c++11

# code violates aliasing rules
configure.cxxflags-append -fno-strict-aliasing

livecheck.url           https://www.lrde.epita.fr/dload/olena
livecheck.regex         (\[0-9.\]+)/
