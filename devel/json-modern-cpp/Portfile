# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:filetype=tcl:et:sw=4:ts=4:sts=4

PortSystem             1.0
PortGroup              github 1.0
PortGroup              cmake 1.1

name                   json-modern-cpp
platforms              darwin macosx
supported_archs        noarch
categories             devel
license                MIT
maintainers            {@ra1nb0w irh.it:rainbow} openmaintainer

description            JSON for Modern C++
long_description       ${description}

github.setup           nlohmann json 3.7.2 v
checksums              rmd160  fda813f674ae8aba2a3a1ebd4118f1529bba4fa7 \
                       sha256  b22dcc77988665cfe9516383cc33d2d1bf64483130240f5475aa553a7e2146d6 \
                       size    119013338
revision               0

configure.ccache       no
compiler.cxx_standard  2011
configure.args-append  -DJSON_BuildTests=OFF

pre-test {
    configure.args-replace \
        -DJSON_BuildTests=OFF -DJSON_BuildTests=ON
    portconfigure::configure_main
    portbuild::build_main
}

test.run yes
