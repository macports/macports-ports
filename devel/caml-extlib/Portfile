PortSystem          1.0

name                caml-extlib
version             1.5
categories          devel
maintainers         kevin@sb.org
description         Extended Standard Library for OCaml
long_description    A User-supported Extended Standard Library for OCaml
homepage            http://ocaml-lib.sourceforge.net/
platforms           darwin
master_sites        sourceforge:ocaml-lib

checksums           md5 17808ae18d6b6e40637f0df8561583e8 \
                    sha1 04d52f922fbecd3e6a693ef2e50af21adb53c1a1
distfiles           extlib-${version}.tar.gz
worksrcdir          extlib-${version}

patchfiles          patch-install.ml

depends_lib         bin:camlp4:ocaml bin:ocamlfind:caml-findlib

use_configure       no

build {}

destroot.cmd        "ocaml"
destroot.pre_args   install.ml
destroot.args       -b -n -doc
destroot.post_args

pre-destroot {
        set extlib_destdir  ${destroot}[exec ${prefix}/bin/ocamlfind printconf destdir]
        file mkdir $extlib_destdir
        reinplace s|##PREFIX##|${prefix}| ${worksrcpath}/install.ml
        reinplace s|##DESTDIR##|${extlib_destdir}| ${worksrcpath}/install.ml
}
