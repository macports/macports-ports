# $Id$

PortSystem 1.0

name             vxl
version          1.11.0
categories       devel
maintainers      toby
description      C++ libraries for computer vision
long_description \
	VXL (the Vision-something-Libraries) is a collection of C++ libraries \
	designed for computer vision research and implementation. It was \
	created from TargetJr and the IUE with the aim of making a light, \
	fast and consistent system. VXL is written in ANSI/ISO C++ and is \
	designed to be portable over many platforms.
homepage         http://vxl.sourceforge.net/
platforms        darwin

master_sites     sourceforge
use_zip          yes
checksums        md5    e2d3f0dbc98241607ee5d4a121d1253b \
                 sha1   7fd772bfad640f9672307eacdbf0a5e3ff150ffb \
                 rmd160 35812c0fcfdda27c77ee9044e65e9e8dcccfffc0

patchfiles       patch-contrib☃brl☃bpro☃bprb☃Templates☃bprb_parameters+unsigned_int-.cxx \
                 patch-contrib☃brl☃bseg☃bvxm☃bvxm_memory_chunk.cxx \
                 patch-v3p☃mpeg2☃libmpeg2☃idct_altivec.c \
                 patch-v3p☃mpeg2☃libmpeg2☃motion_comp_altivec.c

depends_build    port:cmake

configure.cmd      ${prefix}/bin/cmake
configure.pre_args -DCMAKE_INSTALL_PREFIX=${prefix}
configure.args     -DBUILD_SHARED_LIBS=YES \
                   -DCMAKE_INSTALL_NAME_DIR=${prefix}/lib/${name} \
                   ${worksrcpath}

# shuffle directories around to turn ${prefix}/lib into ${prefix}/lib/${name}
post-destroot {
	file rename ${destroot}${prefix}/lib ${destroot}${prefix}/tmp
	file mkdir ${destroot}${prefix}/lib
	file rename ${destroot}${prefix}/tmp ${destroot}${prefix}/lib/${name}
}

# llvm-gcc-4.2 segfaults
platform darwin 10 {
	configure.compiler gcc-4.2
}
