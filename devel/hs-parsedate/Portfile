# $Id$

PortSystem 1.0
name		hs-parsedate
version		2006.11.10
distname	parsedate-${version}
categories	devel
maintainers	nomaintainer
description	The parsedate library for Haskell
long_description	\
		This library provides a function for parsing dates and \
		times given a date format string.

homepage	http://www.cs.chalmers.se/~bringert/darcs/parsedate/doc/
master_sites	http://hackage.haskell.org/packages/archive/parsedate/${version}
checksums	md5 371c62793961add3e3aa46e0a40b5675

depends_build	port:ghc

configure {
	cd ${worksrcpath}
	system "runghc Setup.hs configure --prefix=${prefix}"
}

build {
	cd ${worksrcpath}
	system "runghc Setup.hs build"
}

destroot {
	cd ${worksrcpath}
	system "runghc Setup.hs copy --copy-prefix=${destroot}${prefix}"
	system "runghc Setup.hs register   --gen-script"
	system "runghc Setup.hs unregister --gen-script"

	file mkdir ${destroot}${prefix}/libexec/${name}
	file copy ${worksrcpath}/register.sh \
		  ${destroot}${prefix}/libexec/${name}
	file copy ${worksrcpath}/unregister.sh \
		  ${destroot}${prefix}/libexec/${name}
}

post-activate   { system "${prefix}/libexec/${name}/register.sh" }

#pre-deactivate { system "${prefix}/libexec/${name}/unregister.sh" }

