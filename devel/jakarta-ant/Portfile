PortSystem 				1.0
name					jakarta-ant
version					1.5.1
revision				0
categories				java jakarta
maintainers				sean@fuzzymagic.com
description				Java opensource build system
long_description			Ant is a Java based build tool. In theory it is kind of like \
					make without make's wrinkles. Ant uses XML build files that defines \
					a set of targets. Each target has dependencies (other targets) and \
					contains a set of tasks to perform.

platforms				darwin freebsd
master_sites			http://jakarta.apache.org/builds/jakarta-ant/release/v1.5.1/src/
distname 				${name}-${version}-src
worksrcdir 				${name}-${version}
checksums				md5 a9d1d1cb1c042ef2fffc21f31d96d4a9
set antdir              java/${name}
set instdir		 		${prefix}/${antdir}
set chmodarg			-Dchmod.fail=false
build.cmd 				./build.sh
build.args 				${chmodarg} -Ddist.name=${name}
build.target.all	 	dist
include 				contents


variant darwin {
    build.env				JAVA_HOME=/Library/Java/Home		
    extract.post_args		| gnutar -x 
}

configure { }

install {
    system "mkdir -p ${prefix}/java"
	system "cd ${worksrcpath}; cp -R ${name} ${prefix}/java"
	system "rm ${prefix}/java/${name}/bin/*.bat"
    system "chmod -R ugo+r ${prefix}/java/${name}" 
	system "ln -s ${prefix}/java/${name}/bin/ant ${prefix}/bin/"
}

