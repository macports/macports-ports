# $Id$

PortSystem          1.0

name                ocaml-batteries
conflicts           ocaml-batteries-devel
version             1.4.3
revision            1
categories          devel ml
maintainers         erickt openmaintainer
license             LGPL-2.1
description         A new O'Caml standard library
long_description    OCaml Batteries included (or simply Batteries) is a \
                    community-driven effort to standardize on an consistent, \
                    documented, and comprehensive development platform for the \
                    OCaml programming language.
homepage            http://batteries.forge.ocamlcore.org/
master_sites        https://forge.ocamlcore.org/frs/download.php/884/
platforms           darwin

distname            batteries-${version}

checksums           sha1    0b4d91b5d3268d2fc65708fadadb63cc12b9bdf8 \
                    rmd160  2c82d9e24ef338cf56954d9e48262297f8d0ddcc

depends_lib         port:ocaml \
                    port:ocaml-findlib \
                    port:ocaml-type-conv \
                    port:ocaml-sexplib \
                    port:ocaml-bin-prot \
                    port:ocaml-camomile \
                    port:ocaml-zip \
                    port:ocaml-ocamlnet \
                    port:ocaml-ounit

use_configure       no
use_parallel_build  no

set ocamlfind_destdir ${destroot}${prefix}/lib/ocaml/site-lib

build.target        all doc qtest

destroot.target     install install-doc
destroot.destdir    DESTDIR=${ocamlfind_destdir} DOCROOT=${destroot}${prefix}/share/doc/${name}

pre-destroot {
    file mkdir $ocamlfind_destdir
}

livecheck.type      regex
livecheck.regex     "batteries-(.*?).tar.gz"

