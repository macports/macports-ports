# $Id: Portfile,v 1.22 2005/05/09 18:40:09 jmpp Exp $

PortSystem 1.0
name		irssi
version		0.8.9
revision	1
categories	irc
maintainers	toby@opendarwin.org
description	modular IRC client
long_description	\
	Irssi is a modular IRC client that currently has only text mode user \
	interface, but 80-90% of the code isn't text mode specific, so other \
	UIs could be created pretty easily. Also, Irssi isn't really even \
	IRC specific anymore, there's already a working SILC module \
	available. Support for other protocols like ICQ could be created \
	some day too.
homepage	http://irssi.org/
platforms	darwin
master_sites	${homepage}files/
checksums	md5 6610ee0e27922f447e40828cf7dee507
use_bzip2	yes
depends_lib 	lib:libglib2:glib2
patchfiles		patch-src__common.h
configure.env	CPPFLAGS=-no-cpp-precomp
configure.args  \
	--without-socks --without-bot --without-proxy \
	--with-modules --disable-ipv6 --disable-ssl \
	--with-perl=no --with-glib-prefix=${prefix} \
	--mandir=${prefix}/share/man

platform darwin 6 {
	depends_lib-append lib:libdl:dlcompat
}

variant ipv6 {
	configure.args-delete --disable-ipv6
	configure.args-append --enable-ipv6
}
variant ssl {
	depends_lib-append      lib:libssl.0.9:openssl
	configure.args-delete --disable-ssl
	configure.args-append --enable-ssl
}
variant perl {
	configure.args-delete --with-perl=no
	configure.args-append \
		--with-perl=yes --with-perl-lib=${prefix}/lib/perl5/darwin 
}
