# $Id$
PortSystem 1.0
name		scrollkeeper
version		0.3.14
revision	3
description	An Open Document Cataloging Project.
long_description	\
	ScrollKeeper is a cataloging system for documentation on open systems. \
	It manages documentation metadata (as specified by the Open Source \
	Metadata Framework (OMF) and provides a simple API to allow help \
	browsers to find, sort, and search the document catalog.  It will also \
	be able to communicate with catalog servers on the Net to search for \
	documents which are not on the local system.
maintainers	rhwood@macports.org openmaintainer@macports.org
categories	textproc gnome
platforms	darwin 
homepage	http://scrollkeeper.sourceforge.net/
master_sites    gnome:sources/scrollkeeper/0.3
checksums	md5 b175e582a6cec3e50a9de73a5bb7455a
depends_lib	\
	lib:libX11.6:XFree86 \
	port:libxslt \
	port:libxml2 \
	port:gettext \
	port:expat \
	port:fontconfig \
	port:docbook-xml-scrollkeeper \
	port:docbook-xsl \
	port:docbook-xml \
	port:docbook-xml-412

depends_build	\
	bin:pkg-config:pkgconfig \
	bin:intltool-extract:intltool
	
use_bzip2 	yes

configure.args	\
	--mandir=${prefix}/share/man \
	--with-xml-catalog=${prefix}/share/xml/docbook-xml/4.2/docbook.cat \
	--with-xml-catalog=${prefix}/etc/xml/catalog

configure.env	\
	CPPFLAGS="-L${prefix}/lib -I${prefix}/include" \
	CFLAGS="-no-cpp-precomp -flat_namespace -undefined suppress" \
	LDFLAGS="-lintl -L${prefix}/lib"

post-destroot	{
	file delete "${destroot}/${prefix}/lib/scrollkeeper/"
        file delete "${destroot}/${prefix}/var/lib/scrollkeeper/"
	file delete "${destroot}/${prefix}/var/log/scrollkeeper.log"
}

post-activate	{
	system "touch ${prefix}/var/log/scrollkeeper.log"
	system "scrollkeeper-update"
}
