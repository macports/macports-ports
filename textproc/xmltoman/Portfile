# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0
PortGroup               makefile 1.0

name                    xmltoman
version                 0.4
revision                0
categories              textproc
license                 GPL-2
maintainers             {@i0ntempest me.com:szf1234} openmaintainer
description             Small scripts to convert xml to man pages in groff format or html
long_description        xmltoman and xmlmantohtml are two small scripts to convert xml to man pages in groff\
                        format or html. It features the usual man page items such a \"description\", \"options\",\
                        \"see also\" etc.

homepage                https://sourceforge.net/projects/xmltoman/
platforms               darwin
master_sites            sourceforge:xmltoman
checksums               rmd160  ce61c5184d5ba0a9db63bff2d4635eb644825383 \
                        sha256  948794a316aaecd13add60e17e476beae86644d066cb60171fc6b779f2df14b0 \
                        size    15250
depends_build           port:coreutils
depends_lib             port:perl5
patchfiles-append       patch-Makefile.diff
use_configure           no
universal_variant       no
makefile.override-append \
                        PREFIX
pre-build {
    reinplace "s|@PREFIX@|${prefix}|g" ${worksrcpath}/Makefile
    reinplace "s|/usr/bin/perl|${prefix}/bin/perl|" ${worksrcpath}/xmltoman ${worksrcpath}/xmlmantohtml
    reinplace "s|/usr/share|${prefix}/share|g" ${worksrcpath}/xml/xmltoman.1.xml ${worksrcpath}/xml/xmlmantohtml.1.xml
}

post-destroot {
    xinstall -m 640 ${worksrcpath}/xmltoman.1 ${destroot}${prefix}/share/man/man1
    xinstall -m 640 ${worksrcpath}/xmlmantohtml.1 ${destroot}${prefix}/share/man/man1
}

livecheck.regex         xmltoman-(\[0-9\\.\]+)\\.tar.gz
