# $Id: $

PortSystem 1.0

name			naturaldocs
version			1.5
categories		textproc devel
maintainers		landonf openmaintainer
description		Documentation system for several programming languages
long_description \
    Natural Docs is an open-source documentation generator for multiple \
    programming languages.  You document your code in a natural syntax \
    that reads like plain English.  Natural Docs then scans your code \
    and builds high-quality HTML documentation from it.

platforms		darwin

homepage		http://www.naturaldocs.org/
master_sites    sourceforge:${name}/Stable%20Releases/${version}
distname        NaturalDocs-${version}
use_zip         yes
extract.dir     ${worksrcpath}

checksums       md5     0c6fc5b424e672350c9ae510cabdeca5 \
                sha1    e506e2759f7436467d4b8dcb7b37300401d07008 \
                rmd160  3c571a080090d02e90e84013c864608376a7fd7e

depends_build   bin:perl:perl5 bin:flex:flex bin:bison:bison bin:ginstall:coreutils

pre-extract {
    # The zip file extracts the files without a containing directory, so we create it here.
    file mkdir ${worksrcpath}
}

post-patch {
    reinplace s|/usr/bin/perl|${prefix}/bin/perl|g ${worksrcpath}/NaturalDocs
    system "chmod +x \"${worksrcpath}/NaturalDocs\""
}

configure {}
build {}

destroot {
    file copy ${worksrcpath} ${destroot}/${prefix}/lib/
    ln -sf ${prefix}/lib/NaturalDocs-${version}/NaturalDocs ${destroot}/${prefix}/bin/
}
