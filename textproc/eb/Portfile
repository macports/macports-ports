PortSystem      1.0

name            eb
version         4.4.3-20130920
categories      textproc japanese
maintainers     nomaintainer
description     C library for accessing CD-ROM books of EB, EBG, EBXA and EPWING formats, with UTF-8 support
long_description \
                ${description}
platforms       darwin
license         BSD
homepage        http://green.ribbon.to/~ikazuhiro/dic/ebu.html
master_sites    http://green.ribbon.to/~ikazuhiro/dic/files/:main \
                http://svn.sourceforge.jp/svnroot/macports-jp/distfiles/eb/appendix/:appendix \
                ftp://ftp.sra.co.jp/pub/misc/eb/appendix/:appendix
distname        ${name}u-${version}
distfiles       ${distname}${extract.suffix}:main \
                cencro-1.0.tar.gz:appendix \
                chujiten-2.3.tar.gz:appendix \
                chujiten2-2.0.tar.gz:appendix \
                chujiten6-2.3.tar.gz:appendix \
                colloc-2.0.tar.gz:appendix \
                crownfj-2.0.tar.gz:appendix \
                crownfj2-1.0.tar.gz:appendix \
                crowngj-1.0.tar.gz:appendix \
                daihyakka-1.0.tar.gz:appendix \
                daijirin-2.0.tar.gz:appendix \
                dd75-2.0.tar.gz:appendix \
                gendai2000-1.0.tar.gz:appendix \
                genius-1.0.tar.gz:appendix \
                genius2-1.1.tar.gz:appendix \
                global-2.0.tar.gz:appendix \
                heritage-2.2.tar.gz:appendix \
                hyogen-1.0.tar.gz:appendix \
                izumi-2.0.tar.gz:appendix \
                jitenban-2.4.tar.gz:appendix \
                jitenban97-2.1.tar.gz:appendix \
                kanjigen-2.0.tar.gz:appendix \
                kanjigen2-2.0.tar.gz:appendix \
                kojien-2.3.tar.gz:appendix \
                kojien2-2.0.tar.gz:appendix \
                kojien4-2.2.tar.gz:appendix \
                oxford-2.0.tar.gz:appendix \
                plus-2.0.tar.gz:appendix \
                readers-2.2.tar.gz:appendix \
                readers2-2.0.tar.gz:appendix \
                ruigigo-1.0.tar.gz:appendix \
                superdic98-1.0.tar.gz:appendix 
checksums       ${distname}${extract.suffix}    rmd160 43ca7b984d4005fbbdfb4e24d4bcb988b50f840c \
                cencro-1.0.tar.gz               rmd160 b1b105d5c79e119efd1ae305c96913aa8c0781d1 \
                chujiten-2.3.tar.gz             rmd160 000040a16b28b1254aab2dbbdf2a829836b8c230 \
                chujiten2-2.0.tar.gz            rmd160 d97b98e96b3aad69a46c0473ce48907cb9351019 \
                chujiten6-2.3.tar.gz            rmd160 b6b8700e31664ad9fb237b2455207cc2ec05744e \
                colloc-2.0.tar.gz               rmd160 066efa33043eb18344b67265dd74403de1c85888 \
                crownfj-2.0.tar.gz              rmd160 e66dd4387686d86c3e42266f65a10d7b75e048a8 \
                crownfj2-1.0.tar.gz             rmd160 b0063e1e827b802974890ac44587a531ef38cd5a \
                crowngj-1.0.tar.gz              rmd160 e0f29daff5cccc079df03da2a7a656b5f9235039 \
                daihyakka-1.0.tar.gz            rmd160 8789c7bd27065c15b9cdf81fcf1cd535d6a88c03 \
                daijirin-2.0.tar.gz             rmd160 ba01623d8e270a54964c76df6eb8816afc15d128 \
                dd75-2.0.tar.gz                 rmd160 ff4a5b7d40355ff2a41e507d578c6a35ba4639dd \
                gendai2000-1.0.tar.gz           rmd160 07f3f6e659f7d5583ca59189f0769bc35a5055ea \
                genius-1.0.tar.gz               rmd160 d739d9ad285c8913f9ceed9e58f722ef290f0b2d \
                genius2-1.1.tar.gz              rmd160 e417d56f93971fee1f08f6b02e50ff7b295aa0e5 \
                global-2.0.tar.gz               rmd160 e59883eb9638235ebe28873034c4f50604c416da \
                heritage-2.2.tar.gz             rmd160 aa9d04ab21e9aacabb6a67a4ea03103ffde75cec \
                hyogen-1.0.tar.gz               rmd160 408864ce35484597fedfdd0fe4488a8b00af455f \
                izumi-2.0.tar.gz                rmd160 fce08a458be714c437492eee77b4b69c1621ee41 \
                jitenban-2.4.tar.gz             rmd160 366efcf56bb02994446925c9403e5ba19232ac5b \
                jitenban97-2.1.tar.gz           rmd160 cfb0a97b9c91f5b574224e77fda518f082087230 \
                kanjigen-2.0.tar.gz             rmd160 c9400f1cc6fbe8d3e816ada53e00a95b3ceff83c \
                kanjigen2-2.0.tar.gz            rmd160 316cfb4c9df0f0c8761417a0b0eeea3cecff90aa \
                kojien-2.3.tar.gz               rmd160 5815e6692e89ff175712707ac2a77f98c058ac79 \
                kojien2-2.0.tar.gz              rmd160 3d8a865a90ae48ef0a2b9bdc95e7696ba2fa7412 \
                kojien4-2.2.tar.gz              rmd160 6a16602e2691e0aaed47c2777f581a2717e354c2 \
                oxford-2.0.tar.gz               rmd160 d2e8b61c425f3a97694f64b35c8518bea8673c7c \
                plus-2.0.tar.gz                 rmd160 8f96df721d8a4846d3bd76662f4b1b6ca70747b6 \
                readers-2.2.tar.gz              rmd160 81108046a5a4e2569de5a77fb9aec8c7795b7039 \
                readers2-2.0.tar.gz             rmd160 0a87d926fbcddfbe127b014d15d507809312c08e \
                ruigigo-1.0.tar.gz              rmd160 94252502c7dbec805e937cede60d0e9b7d46a3d0 \
                superdic98-1.0.tar.gz           rmd160 7b597ee6a67974f7eb74dfe551dd8888ca696403

depends_lib     port:gettext \
                port:libiconv \
                port:zlib
depends_build   port:perl5

extract.only    ${distname}${extract.suffix}

#use_parallel_build yes

#test.run        yes
#test.target     check

post-destroot {
    xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}u
    foreach f {AUTHORS COPYING ChangeLog* INSTALL NEWS README README.org} {
        xinstall -m 644 {*}[glob ${worksrcpath}/${f}] ${destroot}${prefix}/share/doc/${name}u
    }
    ln -s ../../${name}u/doc ${destroot}${prefix}/share/doc/${name}u/html

    xinstall -d -m 755 ${destroot}${prefix}/share/dict/appendix
    foreach f ${distfiles} {
        if ([regexp "^(\[^:\]+):appendix$" ${f} m n]) {
            system "gunzip -dc ${distpath}/${n} | tar -xf - -C ${destroot}${prefix}/share/dict/appendix"
        }
    }
}

post-activate {
    system "ranlib ${prefix}/lib/lib${name}u.a"
}

livecheck.type  regex
livecheck.regex ${name}u-(\[0-9.-\]+)\\.tar
