# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem      1.0

name            eb
version         4.5-20220808
categories      textproc japanese
maintainers     nomaintainer
description     C library for accessing CD-ROM books of EB, EBG, EBXA and EPWING formats, with UTF-8 support
long_description \
                ${description}
license         BSD
homepage        http://green.ribbon.to/~ikazuhiro/dic/ebu.html
master_sites    http://green.ribbon.to/~ikazuhiro/dic/files/:main \
                http://svn.sourceforge.jp/svnroot/macports-jp/distfiles/eb/appendix/:appendix \
                ftp://ftp.sra.co.jp/pub/misc/eb/appendix/:appendix
distname        ${name}u-${version}
distfiles       ${distname}${extract.suffix}:main \
                cencro-1.0.tar.gz:appendix \
                chujiten-2.3.tar.gz:appendix \
                chujiten2-2.0.tar.gz:appendix \
                chujiten6-2.3.tar.gz:appendix \
                colloc-2.0.tar.gz:appendix \
                crownfj-2.0.tar.gz:appendix \
                crownfj2-1.0.tar.gz:appendix \
                crowngj-1.0.tar.gz:appendix \
                daihyakka-1.0.tar.gz:appendix \
                daijirin-2.0.tar.gz:appendix \
                dd75-2.0.tar.gz:appendix \
                gendai2000-1.0.tar.gz:appendix \
                genius-1.0.tar.gz:appendix \
                genius2-1.1.tar.gz:appendix \
                global-2.0.tar.gz:appendix \
                heritage-2.2.tar.gz:appendix \
                hyogen-1.0.tar.gz:appendix \
                izumi-2.0.tar.gz:appendix \
                jitenban-2.4.tar.gz:appendix \
                jitenban97-2.1.tar.gz:appendix \
                kanjigen-2.0.tar.gz:appendix \
                kanjigen2-2.0.tar.gz:appendix \
                kojien-2.3.tar.gz:appendix \
                kojien2-2.0.tar.gz:appendix \
                kojien4-2.2.tar.gz:appendix \
                oxford-2.0.tar.gz:appendix \
                plus-2.0.tar.gz:appendix \
                readers-2.2.tar.gz:appendix \
                readers2-2.0.tar.gz:appendix \
                ruigigo-1.0.tar.gz:appendix \
                superdic98-1.0.tar.gz:appendix
checksums       ${distname}${extract.suffix} \
                rmd160  a9f1d3ba520babc234701fe1401b41cab9a50573 \
                sha256  374e90f8738d0ffc7a1e2f3d1c2be70626135f89aeb0656bc7ab0a0eb66f5b89 \
                size    715870 \
                cencro-1.0.tar.gz \
                rmd160  b1b105d5c79e119efd1ae305c96913aa8c0781d1 \
                sha256  02d7937f4cd0b3bebb23f9d5917a261d382b4f1004b3b49830c64762d58a02e5 \
                size    1666 \
                chujiten-2.3.tar.gz \
                rmd160  000040a16b28b1254aab2dbbdf2a829836b8c230 \
                sha256  07bb4ae37b8e3bfaa219dc243b70db5ccce1e30a574f43e53c083c36f69090ba \
                size    2133 \
                chujiten2-2.0.tar.gz \
                rmd160  d97b98e96b3aad69a46c0473ce48907cb9351019 \
                sha256  d70e50f2881f6a3f8992f00fec394ef86c218bbb97d7cc32ba4b80390dbf7849 \
                size    2629 \
                chujiten6-2.3.tar.gz \
                rmd160  b6b8700e31664ad9fb237b2455207cc2ec05744e \
                sha256  d1e9616fd903e9c7d91c0831095fff0656b2638add69d48a06ba7cab96c5cd1d \
                size    2868 \
                colloc-2.0.tar.gz \
                rmd160  066efa33043eb18344b67265dd74403de1c85888 \
                sha256  5d74cd1884e774d5bc2c4f96c798db9bf8d8651158d960042f89a3ea23011f14 \
                size    1313 \
                crownfj-2.0.tar.gz \
                rmd160  e66dd4387686d86c3e42266f65a10d7b75e048a8 \
                sha256  2f658e11cf3893a14b5a51af997fe56fbbf52e41bddca32c6d2a2108f4ac080e \
                size    4463 \
                crownfj2-1.0.tar.gz \
                rmd160  b0063e1e827b802974890ac44587a531ef38cd5a \
                sha256  2ff8ee0edd5e4683861122a0a06a353fb6299abf3770e6d6cea0d0267b547b5d \
                size    2164 \
                crowngj-1.0.tar.gz \
                rmd160  e0f29daff5cccc079df03da2a7a656b5f9235039 \
                sha256  f8985fe12195acc0035043b5bd8954825e7663cb588c926148d0f38a598925f3 \
                size    2155 \
                daihyakka-1.0.tar.gz \
                rmd160  8789c7bd27065c15b9cdf81fcf1cd535d6a88c03 \
                sha256  855ebd849ef31f372a90d157cb3c5913717f0e139c1903d40011107dd783c1bf \
                size    3748 \
                daijirin-2.0.tar.gz \
                rmd160  ba01623d8e270a54964c76df6eb8816afc15d128 \
                sha256  59e719629eec779b580ef901bacfee0ce70887083cb33e34982e7733c2a95b69 \
                size    2095 \
                dd75-2.0.tar.gz \
                rmd160  ff4a5b7d40355ff2a41e507d578c6a35ba4639dd \
                sha256  ea09002437f3ea046b15da853ee19098daf2c8995e781368d6508e4a7c318199 \
                size    4062 \
                gendai2000-1.0.tar.gz \
                rmd160  07f3f6e659f7d5583ca59189f0769bc35a5055ea \
                sha256  ade806888de8bf7f43df069f2dcca360a7806cbf089a03d476f0721c8cea6218 \
                size    1063 \
                genius-1.0.tar.gz \
                rmd160  d739d9ad285c8913f9ceed9e58f722ef290f0b2d \
                sha256  cf6d6e5f12d76525e6e615c9b350fc10e7f46c0c048cdcfd0af2de08d5afad58 \
                size    2241 \
                genius2-1.1.tar.gz \
                rmd160  e417d56f93971fee1f08f6b02e50ff7b295aa0e5 \
                sha256  f953c781251ee30cf61a0eeb12a70f876a7dec3321924911fb58641ca360aa60 \
                size    887 \
                global-2.0.tar.gz \
                rmd160  e59883eb9638235ebe28873034c4f50604c416da \
                sha256  756310bc9434e20e8a5f7043f4acf7085ef8c2c2048af5a2917053d03ecd6c42 \
                size    4034 \
                heritage-2.2.tar.gz \
                rmd160  aa9d04ab21e9aacabb6a67a4ea03103ffde75cec \
                sha256  67974914e27c6874d7520b4c7ce90c56da959631d7edd602a29e902b2ee86997 \
                size    3968 \
                hyogen-1.0.tar.gz \
                rmd160  408864ce35484597fedfdd0fe4488a8b00af455f \
                sha256  fe2e6fa528c0ba689051ed068182f9554f9c3cbe73972dca27f97c9a2a977ad8 \
                size    1309 \
                izumi-2.0.tar.gz \
                rmd160  fce08a458be714c437492eee77b4b69c1621ee41 \
                sha256  be358a301d4f4e51f0c97930baab80960ba84fc32ee3b06095d6b860bc43d0ce \
                size    984 \
                jitenban-2.4.tar.gz \
                rmd160  366efcf56bb02994446925c9403e5ba19232ac5b \
                sha256  d02941a6991400bf0dfdb0b075ca0827a30147691347294b674ab7bdbbbd3204 \
                size    7459 \
                jitenban97-2.1.tar.gz \
                rmd160  cfb0a97b9c91f5b574224e77fda518f082087230 \
                sha256  c2279b7de621d0a6a823163b5d4fad667cd1fe7852304d134f4ede0850bac22f \
                size    6866 \
                kanjigen-2.0.tar.gz \
                rmd160  c9400f1cc6fbe8d3e816ada53e00a95b3ceff83c \
                sha256  f687e4f0f0b3c16d6b0c32758ac75bf88a94e0c9b997025984fbe7d083d14987 \
                size    2046 \
                kanjigen2-2.0.tar.gz \
                rmd160  316cfb4c9df0f0c8761417a0b0eeea3cecff90aa \
                sha256  acc52b1ce7e889c475f167d38731593fdc657d83c154eec63bc408b3c2a772d3 \
                size    897 \
                kojien-2.3.tar.gz \
                rmd160  5815e6692e89ff175712707ac2a77f98c058ac79 \
                sha256  a24513660845d7b9aa8fc640f2e61a2df1852b035aa65588ff0b355a8c43926c \
                size    2008 \
                kojien2-2.0.tar.gz \
                rmd160  3d8a865a90ae48ef0a2b9bdc95e7696ba2fa7412 \
                sha256  892b6bd9091019992406af0dcc806d4c254ad1d4437b7222ae4e5f331e440259 \
                size    4526 \
                kojien4-2.2.tar.gz \
                rmd160  6a16602e2691e0aaed47c2777f581a2717e354c2 \
                sha256  ee1c694e2b9ad1fe09fe18b5f108721e985861e02c951097b5731bb88a609a67 \
                size    2272 \
                oxford-2.0.tar.gz \
                rmd160  d2e8b61c425f3a97694f64b35c8518bea8673c7c \
                sha256  43d6295d3be13d0e9dedff5322eb97913760363096135b1d1fe40762bf37f1cd \
                size    3849 \
                plus-2.0.tar.gz \
                rmd160  8f96df721d8a4846d3bd76662f4b1b6ca70747b6 \
                sha256  05ff8d75c8221b366050e179406bbd34973fa1cf7b020e5bd4499d3dd4feebfe \
                size    3632 \
                readers-2.2.tar.gz \
                rmd160  81108046a5a4e2569de5a77fb9aec8c7795b7039 \
                sha256  bafecaffcafe61f833e09b7be6a594b849035299b3e63b37ac3899d506b85eb8 \
                size    2194 \
                readers2-2.0.tar.gz \
                rmd160  0a87d926fbcddfbe127b014d15d507809312c08e \
                sha256  b1fb74d426529019120d2ed4a6ab6bf19d3d2284e16a9aa473b13438c1e574c6 \
                size    2698 \
                ruigigo-1.0.tar.gz \
                rmd160  94252502c7dbec805e937cede60d0e9b7d46a3d0 \
                sha256  269950213f0c02d6b3aac5f0a039bc0c104f468040a2bf61771dfaeb4659aeba \
                size    1326 \
                superdic98-1.0.tar.gz \
                rmd160  7b597ee6a67974f7eb74dfe551dd8888ca696403 \
                sha256  7ef10f9341c63fc28bf5ac16d9a8dd8eac712b19d3b6d4a2b43f0a9efbcf34b3 \
                size    5252

depends_lib-append \
                port:gettext \
                port:libiconv \
                port:zlib
depends_build-append \
                port:perl5

extract.only    ${distname}${extract.suffix}

#test.run        yes
#test.target     check

post-destroot {
    xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}u
    foreach f {AUTHORS COPYING ChangeLog* INSTALL NEWS README README.org} {
        xinstall -m 644 {*}[glob ${worksrcpath}/${f}] ${destroot}${prefix}/share/doc/${name}u
    }
    ln -s ../../${name}u/doc ${destroot}${prefix}/share/doc/${name}u/html

    xinstall -d -m 755 ${destroot}${prefix}/share/dict/appendix
    foreach f ${distfiles} {
        if {[regexp "^(\[^:\]+):appendix$" ${f} m n]} {
            system "gunzip -dc ${distpath}/${n} | tar -xf - -C ${destroot}${prefix}/share/dict/appendix"
        }
    }
}

post-activate {
    system "ranlib ${prefix}/lib/lib${name}u.a"
}

livecheck.type  regex
livecheck.regex ${name}u-(\[0-9.-\]+)\\.tar
