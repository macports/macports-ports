# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0
PortGroup           cargo 1.0

github.setup        BurntSushi ripgrep 0.8.1
categories          textproc
platforms           darwin
maintainers         {raimue @raimue} \
                    openmaintainer
license             MIT

description         fast command line search tool
long_description    ripgrep is a command line search tool that combines the \
                    usability of The Silver Searcher (an ack clone) with the \
                    raw speed of GNU grep.

cargo.crates \
    aho-corasick             0.6.4  d6531d44de723825aa81398a6415283229725a00fa30713812ab9323faa82fc4 \
    ansi_term               0.10.2  6b3568b48b7cefa6b8ce125f9bb4989e52fbcc29ebea88df04cc7c5f12f70455 \
    atty                     0.2.6  8352656fd42c30a0c3c89d26dea01e3b77c0ab2af18230835c15e2e13cd51859 \
    bitflags                 1.0.1  b3c30d3802dfb7281680d6285f2ccdaa8c2d8fee41f93805dba5c4cf50dc23cf \
    bytecount                0.3.1  882585cd7ec84e902472df34a5e01891202db3bf62614e1f0afe459c1afcf744 \
    cfg-if                   0.1.2  d4c819a1287eb618df47cc647173c5c4c66ba19d888a6e50d605672aed3140de \
    clap                    2.30.0  1c07b9257a00f3fc93b7f3c417fc15607ec7a56823bc2c37ec744e266387de5b \
    crossbeam                0.3.2  24ce9782d4d5c53674646a6a4c1863a21a8fc0cb649b3c94dfc16e45071dea19 \
    encoding_rs              0.7.2  98fd0f24d1fb71a4a6b9330c8ca04cbd4e7cc5d846b54ca74ff376bc7c9f798d \
    fnv                      1.0.6  2fad85553e09a6f881f739c29f0b00b0f01357c743266d478b68951ce23285f3 \
    fuchsia-zircon           0.3.3  2e9763c69ebaae630ba35f74888db465e49e259ba1bc0eda7d06f4a067615d82 \
    fuchsia-zircon-sys       0.3.3  3dcaa9ae7725d12cdb85b3ad99a434db70b468c09ded17e012d86b5c1010f7a7 \
    glob                    0.2.11  8be18de09a56b60ed0edf84bc9df007e30040691af7acd1c41874faac5895bfb \
    lazy_static              1.0.0  c8f31047daa365f19be14b47c29df4f7c3b581832407daabe6ae77397619237d \
    libc                    0.2.36  1e5d97d6708edaa407429faa671b942dc0f2727222fb6b6539bf1db936e4b121 \
    log                      0.4.1  89f010e843f2b1a31dbd316b3b8d443758bc634bed37aabade59c686d644e0a2 \
    memchr                   2.0.1  796fba70e76612589ed2ce7f45282f5af869e0fdd7cc6199fa1aa1f1d591ba9d \
    memmap                   0.6.2  e2ffa2c986de11a9df78620c01eeaaf27d94d3ff02bf81bfcca953102dd0c6ff \
    num_cpus                 1.8.0  c51a3322e4bca9d212ad9a158a02abc6934d005490c054a2778df73a70aa0a30 \
    rand                    0.3.22  15a732abf9d20f0ad8eeb6f909bf6868722d9a06e1e50802b6a70351f40b4eb1 \
    rand                     0.4.2  eba5f8cb59cc50ed56be8880a5c7b496bfd9bd26394e176bc67884094145c2c5 \
    redox_syscall           0.1.37  0d92eecebad22b767915e4d529f89f28ee96dbbf5a4810d2b844373f136417fd \
    redox_termios            0.1.1  7e891cfe48e9100a70a3b6eb652fef28920c117d366339687bd5576160db0f76 \
    regex                    0.2.6  5be5347bde0c48cfd8c3fdc0766cdfe9d8a755ef84d620d6794c778c91de8b2b \
    regex-syntax             0.4.2  8e931c58b93d86f080c734bfd2bce7dd0079ae2331235818133c8be7f422e20e \
    same-file                1.0.2  cfb6eded0b06a0b512c8ddbcf04089138c9b4362c2f696f3c3d76039d68f3637 \
    simd                     0.2.1  3dd0805c7363ab51a829a1511ad24b6ed0349feaa756c4bc2f977f9f496e6673 \
    strsim                   0.7.0  bb4f380125926a99e52bc279241539c018323fab05ad6368b56f93d9369ff550 \
    tempdir                  0.3.5  87974a6f5c1dfb344d733055601650059a3363de2a6104819293baff662132d6 \
    termion                  1.5.1  689a3bdfaab439fd92bc87df5c4c78417d3cbe537487274e9b0b2dce76e92096 \
    textwrap                 0.9.0  c0b59b6b4b44d867f1370ef1bd91bfb262bf07bf0ae65c202ea2fbc16153b693 \
    thread_local             0.3.5  279ef31c19ededf577bfd12dfae728040a21f635b06a24cd670ff510edd38963 \
    unicode-width            0.1.4  bf3a113775714a22dcb774d8ea3655c53a32debae63a063acc00a91cc586245f \
    unreachable              1.0.0  382810877fe448991dfc7f0dd6e3ae5d58088fd0ea5e35189655f84e6814fa56 \
    utf8-ranges              1.0.0  662fab6525a98beff2921d7f61a39e7d59e0b425ebc7d0d9e66d316e55124122 \
    void                     1.0.2  6a02e4885ed3bc0f2de90ea6dd45ebcbb66dacffe03547fadbb0eeae2770887d \
    walkdir                  2.1.4  63636bd0eb3d00ccb8b9036381b526efac53caf112b7783b730ab3f8e44da369 \
    winapi                   0.3.4  04e3bd221fcbe8a271359c04f21a76db7d0c6028862d1bb5512d85e1e2eb5bb3 \
    winapi-i686-pc-windows-gnu      0.4.0  ac3b87c63620426dd9b991e5ce0329eff545bccbbb34f3be09ff6fb6ab51b7b6 \
    winapi-x86_64-pc-windows-gnu    0.4.0  712e227841d057c1ee1cd2fb22fa7e5a5461ae8e48fa2ca79ec42cfc1931183f

checksums-append    ${distname}${extract.suffix} \
                    rmd160  d8c6c7c4baa00e5b5430606a2ed99c314dea904f \
                    sha256  454eedb33b2edeeb7b2b044aee42f28287c36ebff3ebbf08f852b95e6e2bc565 \
                    size    521208

depends_build-append \
                    port:asciidoc \
                    port:docbook-xsl-nons

destroot {
    xinstall -m 755 ${worksrcpath}/target/[cargo.rust_platform]/release/rg ${destroot}${prefix}/bin/
    ln -s rg ${destroot}${prefix}/bin/ripgrep

    set outpath ${worksrcpath}/target/[cargo.rust_platform]/release/build/ripgrep-c06d1a60bbe49ad3/out/
    xinstall -m 644 ${outpath}/rg.1 ${destroot}${prefix}/share/man/man1/
    xinstall -d -m 755 ${destroot}${prefix}/share/bash-completion/completions
    xinstall -m 644 ${outpath}/rg.bash ${destroot}${prefix}/share/bash-completion/completions/rg
    xinstall -d -m 755 ${destroot}${prefix}/share/fish/completions
    xinstall -m 644 ${outpath}/rg.fish ${destroot}${prefix}/share/fish/completions/
    xinstall -d -m 755 ${destroot}${prefix}/share/zsh/site-functions
    xinstall -m 644 ${worksrcpath}/complete/_rg ${destroot}${prefix}/share/zsh/site-functions/
}
