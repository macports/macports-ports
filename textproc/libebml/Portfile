# $Id$

PortSystem          1.0

name                libebml
version             1.0.0
categories          textproc
maintainers         nomaintainer
description         EBML (Extensible Binary Meta Language), sort of binary version of XML.
long_description    EBML (Extensible Binary Meta Language), a binary derivative of \
                    XML. EBML enables the Matroska Development Team to gain \
                    significant advantages in terms of future format \
                    extensibility, without breaking file support in old parsers.
homepage            http://www.matroska.org/
platforms           darwin
master_sites        http://dl.matroska.org/downloads/${name}/
use_bzip2           yes

checksums           md5     6d438f03d8928d83a2d120ed02705f03 \
                    sha1    8b79752ddb6cadab0346b43785432c554dbf220d \
                    rmd160  932552ae239007253f0526d8bb0d506776ca14df

post-extract {
    system "cd ${worksrcpath}/make && cp -R linux darwin"
}

use_configure       no

variant universal {}
if {[variant_isset universal]} {
    set archflags ${configure.universal_cxxflags}
} else {
    set archflags ${configure.cxx_archflags}
}

build.dir           ${worksrcpath}/make/darwin
build.args          prefix=${prefix} \
                    CXX=${configure.cxx} \
                    CXXFLAGS="${archflags}"

# We need -p for install because ld will ask for ranlib if the modification date changes.
destroot.args       INSTALL_OPTS_LIB='-m 644 -p'
destroot.destdir    prefix=${destroot}${prefix}

# livecheck.
livecheck.type      regex
livecheck.url       http://www.bunkus.org/videotools/mkvtoolnix/source.html
livecheck.regex     ${name} (\[0-9.\]+)
