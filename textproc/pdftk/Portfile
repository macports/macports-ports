# $Id$

PortSystem          1.0

name                pdftk
version             1.41
categories          textproc graphics pdf
maintainers         ryandesign@macports.org
platforms           darwin
homepage            http://www.pdfhacks.com/pdftk/
master_sites        ${homepage}
use_bzip2           yes
worksrcdir          ${distname}/${name}
use_configure       no

description \
	pdftk - PDF Toolkit, for various operations on PDF files

long_description \
	pdftk is a simple tool for doing everyday things with PDF documents: \
	Merge PDF Documents \
	Split PDF Pages into a New Document \
	Decrypt Input as Necessary (Password Required) \
	Encrypt Output as Desired \
	Fill PDF Forms with FDF Data and/or Flatten Forms \
	Apply a Background Watermark \
	Report on PDF Metrics such as Metadata, Bookmarks, and Page Labels \
	Update PDF Metadata \
	Attach Files to PDF Pages or the PDF Document \
	Unpack PDF Attachments \
	Burst a PDF Document into Single Pages \
	Uncompress and Re-Compress Page Streams \
	Repair Corrupted PDF (Where Possible)

checksums \
	md5 7214230b937dc996d209c05b7b7b3518 \
	sha1 e5eb83dd96dbda68072efe8f2637aad59f50dffc

depends_lib			port:gcc41

build.args			-f Makefile.MacOSX \
						TOOLPATH=${prefix}/bin/ \
						VERSUFF=-dp-4.1

destroot {
	xinstall -m 755 -d ${destroot}/${prefix}/share/doc/${name}
	xinstall -m 755 -W ${worksrcpath} pdftk ${destroot}/${prefix}/bin
	xinstall -m 644 -W ${worksrcpath}/.. pdftk.1.html pdftk.1.txt \
		${destroot}/${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath}/../debian pdftk.1 \
		${destroot}/${prefix}/share/man/man1
}

variant with_gcc34 {
	depends_lib-delete  port:gcc41
	depends_lib-append  port:gcc34
	build.args-delete   VERSUFF=-dp-4.1
	build.args-append   VERSUFF=-dp-3.4
}

variant with_gcj34 {
	depends_lib-delete  port:gcc41
	depends_lib-append  port:gcj34
	build.args-delete   TOOLPATH=${prefix}/bin/ VERSUFF=-dp-4.1
	build.args-append   TOOLPATH=${prefix}/gcj34-3.4.5/bin/
}
