--- config.mk.orig	2026-01-21 10:55:40
+++ config.mk	2026-01-21 10:58:52
@@ -2,7 +2,6 @@
 
 # paths (unset $PCPREFIX to not install a pkg-config-file)
 DESTDIR   =
-PREFIX    = /usr/local
 INCPREFIX = $(PREFIX)/include
 LIBPREFIX = $(PREFIX)/lib
 MANPREFIX = $(PREFIX)/share/man
@@ -14,22 +13,23 @@
 BINSUFFIX = 
 
 # flags
-CPPFLAGS = -D_ISOC99_SOURCE
-CFLAGS   = -std=c99 -Os -Wall -Wextra -Wpedantic -Wno-overlength-strings
-LDFLAGS  = -s
+CPPFLAGS = @CPPFLAGS@ -D_DEFAULT_SOURCE
+CFLAGS   = @ARCHFLAGS@ -std=c99 -Os -Wall -Wextra
+LDFLAGS  = @LDFLAGS@ -s
 
 BUILD_CPPFLAGS = $(CPPFLAGS)
 BUILD_CFLAGS   = $(CFLAGS)
 BUILD_LDFLAGS  = $(LDFLAGS)
 
 SHFLAGS   = -fPIC -ffreestanding
-SOFLAGS   = -shared -nostdlib -Wl,--soname=libgrapheme.so.$(VERSION_MAJOR).$(VERSION_MINOR)
-SOSYMLINK = true
+SOFLAGS   = -dynamiclib -install_name libgrapheme.$(VERSION_MAJOR).dylib -current_version $(VERSION_MAJOR).$(VERSION_MINOR).$(VERSION_PATCH) -compatibility_version $(VERSION_MAJOR).$(VERSION_MINOR).0
+SONAME    = libgrapheme.$(VERSION_MAJOR).dylib
+SOSYMLINK = false
 
 # tools (unset $LDCONFIG to not call ldconfig(1) after install/uninstall)
 CC       = cc
 BUILD_CC = $(CC)
 AR       = ar
 RANLIB   = ranlib
-LDCONFIG = ldconfig
+LDCONFIG = 
 SH       = sh
