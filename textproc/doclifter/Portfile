# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8::et:sw=4:ts=4:sts=4

PortSystem          1.0

name                doclifter
version             2.3
revision            2
categories          textproc
maintainers         nomaintainer
description         troff macro to DocBook translater
long_description    {*}${description} For example, \
                    it may be used to convert man pages to DocBook.
license             BSD
homepage            http://catb.org/~esr/doclifter
master_sites        ${homepage}
checksums           md5 db0573381ac1abec627b4bb5025087ea

patchfiles          patch-doclifter.diff

set py_ver          2.7
set py_ver_nodot    [string map {. {}} ${py_ver}]
depends_lib-append  port:python${py_ver_nodot}

use_configure       no

destroot {
    xinstall -m 755 -d ${destroot}${prefix}/bin
    xinstall -m 755 -d ${destroot}${prefix}/share/man/man1
    xinstall ${worksrcpath}/doclifter ${destroot}${prefix}/bin
    xinstall ${worksrcpath}/manlifter ${destroot}${prefix}/bin
    xinstall ${worksrcpath}/doclifter.1 ${destroot}${prefix}/share/man/man1
    xinstall ${worksrcpath}/manlifter.1 ${destroot}${prefix}/share/man/man1

    xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
    foreach doc {COPYING PATCHES README TODO} {
        xinstall -m 644 ${worksrcpath}/${doc} ${destroot}${prefix}/share/doc/${name}
    }
    reinplace "s|#!/usr/bin/env python|#!${prefix}/bin/python${py_ver}|" \
        ${destroot}${prefix}/bin/doclifter
    reinplace "s|#!/usr/bin/python|#!${prefix}/bin/python${py_ver}|" \
        ${destroot}${prefix}/bin/manlifter
}
