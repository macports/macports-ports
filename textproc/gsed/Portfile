# $Id$

PortSystem 1.0
name            gsed
version         4.1.5
distname        sed-${version}
categories      textproc
maintainers     marius@physics.aamu.edu
platforms       darwin
master_sites    gnu:sed
homepage        http://www.gnu.org/software/sed/
checksums       md5 7a1cbbbb3341287308e140bd4834c3ba

description     GNU version of the stream editor, sed
long_description \
    Sed (streams editor) isn't really a true text editor or text        \
    processor. Instead, it is used to filter text, i.e., it takes text  \
    input and performs some operation (or set of operations) on it and  \
    outputs the modified text. Sed is typically used for extracting part\
    of a file using pattern matching or substituting multiple occurances\
    of a string within a file.

patchfiles      patch-configure

configure.args  --infodir=${prefix}/share/info \
                --mandir=${prefix}/share/man \
                --program-prefix=gnu \
                --datadir=${prefix}/share/doc/${name}
depends_lib     port:gettext port:libiconv

post-destroot {
    cd ${destroot}${prefix}/share/info/
    foreach i [glob *.info*] {
        file rename ${i} gnu${i}
    }
    if {[variant_isset with_default_names]} {
        foreach d {bin share/info share/man/man1} {
            cd ${destroot}${prefix}/$d
            foreach a [glob gnu*] {
                regexp gnu(.+) $a dummy b
                file link -hard $b gnu$b
            }
        }
    }
}

test.run        yes
test.target     check

variant with_default_names {}
