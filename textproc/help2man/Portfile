# $Id$

PortSystem 1.0

name			help2man
version			1.37.1
revision        1
categories		textproc
platforms		darwin
maintainers		nomaintainer
description		automatically generate simple man pages

long_description	help2man is a tool for automatically generating simple \
			manual pages from program output.

homepage		http://www.gnu.org/software/help2man/
master_sites	gnu

checksums       md5     371b5cc74fe9c2ea3ee1ca23c19b19a8 \
                sha1    db81161620ec8adf547a7e5a5d252036ca0d3b58 \
                rmd160  781d9293fda549c152c7ff0ee929eda62acc8139

depends_lib		path:bin/perl:perl5 port:p5-locale-gettext \
				port:gettext port:libiconv

configure.perl	${prefix}/bin/perl

configure.args  --enable-nls

post-patch {
	if {[variant_isset universal]} {
		reinplace "s|-shared|-bundle ${configure.ldflags} ${configure.universal_ldflags}|" ${worksrcpath}/Makefile.in
	} else {
	    if {![info exists configure.ld_archflags]} {
	        set configure.ld_archflags ${configure.cc_archflags}
	    }
	    reinplace "s|-shared|-bundle ${configure.ldflags} ${configure.ld_archflags}|" ${worksrcpath}/Makefile.in
	}
}

post-destroot {
	set docdir ${prefix}/share/doc/${name}
	xinstall -d ${destroot}${docdir}
	xinstall -m 0644 -W ${worksrcpath} COPYING debian/changelog NEWS README THANKS \
		${destroot}${docdir}
}
