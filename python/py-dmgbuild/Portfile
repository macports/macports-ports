# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           python 1.0

name                py-dmgbuild
version             1.6.7

categories-append   devel
license             {MIT PSF}
platforms           {darwin any}
supported_archs     noarch
maintainers         nomaintainer
description         macOS command line utility to build disk images
long_description \
    dmgbuild is a command line tool to create macOS disk images (aka .dmg files). While it is possible to create disk images easily enough from the command line using the hdiutil program that ships with macOS, there is no easy way to configure the appearance of the resulting disk image when the user opens it.

homepage            https://dmgbuild.readthedocs.io/en/latest/

checksums           rmd160  0684c11e55a679e67da27fc5aea5c8cfad72f3f9 \
                    sha256  676b17acd448899f6d4a83b2184e0657480444ecb6ac9c4922889efad9e5dbfb \
                    size    36938

patchfiles-append   patch-pyproject.patch

python.versions     310 311 312 313 314

if {$subport ne $name} {
    depends_lib-append     port:py${python.version}-mac-alias \
                           port:py${python.version}-ds-store

    post-destroot {
        xinstall -m 755 -d ${destroot}${prefix}/share/doc/${subport} \
        ${destroot}${prefix}/share/examples/${subport}
        xinstall -m 644 -W ${worksrcpath} LICENSE README.rst \
        ${destroot}${prefix}/share/doc/${subport}
    }
}
