# $Id$

PortSystem          1.0
PortGroup           python26 1.0

name                py26-django
version             1.0.2
categories          python www
platforms           darwin
maintainers         arthurkoziel.com:arthur
homepage            http://www.djangoproject.com
description         Django is a high-level Python Web framework
long_description    Django is a high-level Python Web framework that \
                    encourages rapid development and clean, pragmatic \
                    design.

master_sites        http://media.djangoproject.com/releases/${version}/
distname            Django-${version}-final
checksums           md5     89353e3749668778f1370d2e444f3adc \
                    sha1    f2d9088f17aff47ea17e5767740cab67b2a73b6b \
                    rmd160  0cfea620df0831310da4ef51ef6ee4ef1b65974e

depends_lib-append  port:py26-setuptools

variant bash_completion description {Bash completion support} {
    depends_run-append  port:bash-completion

    post-destroot {
        xinstall -d ${destroot}${prefix}/etc/bash_completion.d
        xinstall -m 644 ${worksrcpath}/extras/django_bash_completion \
            ${destroot}${prefix}/etc/bash_completion.d/django-admin.py
    }
}

post-destroot   {
        xinstall -m 644 -W ${worksrcpath} AUTHORS INSTALL LICENSE README \
                ${destroot}${prefix}/share/doc/${name}
        
        ln -s ${python.prefix}/bin/django-admin.py ${destroot}${prefix}/bin/django-admin.py
        
        file copy ${worksrcpath}/docs ${destroot}${prefix}/share/doc/${name}/docs
        file copy ${worksrcpath}/examples ${destroot}${prefix}/share/doc/${name}/examples
}

livecheck.check     regex
livecheck.url       http://www.djangoproject.com/download/
livecheck.regex     "The latest official version is (1\.\[0-9\]+\.\[0-9\]+)"