# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem 1.0

#######################################################################################################
# PortGroup python26 1.0
#######################################################################################################
# Can be removed once MacPorts 1.7.0 is released
if {![info exists frameworks_dir]} {
    set frameworks_dir ${prefix}/Library/Frameworks
}

set python.bin	    ${prefix}/bin/python2.6
set python.lib	    ${frameworks_dir}/Python.framework/Versions/2.6/Python
set python.pkgd	    ${frameworks_dir}/Python.framework/Versions/2.6/lib/python2.6/site-packages
set python.bindir	${frameworks_dir}/Python.framework/Versions/2.6/bin
set python.include	${frameworks_dir}/Python.framework/Versions/2.6/include/python2.6

categories		python

dist_subdir		python

depends_lib		port:python26

use_configure	no

build.cmd		${python.bin} setup.py --no-user-cfg
build.target	build

destroot.cmd	           ${python.bin} setup.py --no-user-cfg
destroot.destdir	       --prefix=${frameworks_dir}/Python.framework/Versions/2.6 --root=${destroot}
configure.pkg_config_path  ${frameworks_dir}/Python.framework/Versions/2.6/lib/pkgconfig

set env(PATH) "${python.bindir}:$env(PATH)"

pre-destroot	{
	xinstall -d -m 755 ${destroot}${prefix}/share/doc/${name}/examples
}
#######################################################################################################

name			py26-zopeinterface
version			3.3.0
categories		python zope
platforms		darwin
maintainers		mcalhoun openmaintainer
description		Python interfaces for Zope
long_description	${description}

homepage        http://www.zope.org/Products/ZopeInterface
master_sites    ${homepage}/${version}
distname		zope.interface-${version}
checksums \
	  md5     93668855e37b4691c5c956665c33392c \
	  sha1    6a5cdb2c03c9dfbaec51b243a4eb8328909f7e30 \
	  rmd160  e44ad35c94e517130cb3dd951f9a637e9407cb1c

post-destroot {
    xinstall -m 644 -W ${worksrcpath} \
        CHANGES.txt  README.txt \
        ${destroot}${prefix}/share/doc/${name}
}

test.run  yes
test.cmd  ${python.bin} setup.py 

livecheck.check	regex
livecheck.url	${homepage}
livecheck.regex	zope.interface-(\\d+(?:\\.\\d+)*)${extract.suffix}
