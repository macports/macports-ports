# $Id$

PortSystem 1.0
PortGroup  python24 1.0

name                    py-numpy
version                 1.0.1
revision                0
categories              python
platforms               darwin
maintainers             erickt@macports.org
description             The core utilities for the scientific library scipy for Python
long_description        ${description}

homepage                http://numeric.scipy.org/
master_sites            sourceforge:numpy
distname                numpy-${version}

checksums               md5 13a29244cbe03e0d45e56d8d90ecb55d \
                        sha1 d6d20a32d2386ea32582d497d123211a98441c4e \
												rmd160 f3a0c55aa5add8c93f91eee1bb05ff555c0f2485

depends_lib-append      lib:fftw:fftw-3 

patchfiles              patch-gnu.py \
                        patch-system_info.py

build.pre_args config_fc --f90exec ${prefix}/bin/gfortran-dp-4.1 --fcompiler gnu95

variant darwin powerpc {
        depends_build-append port:gcc41

        post-patch {
                reinplace "s:MACPORTS_FORTRAN:gfortran-dp-4.1:g" ${worksrcpath}/numpy/distutils/fcompiler/gnu.py
                reinplace "s:MACPORTS_PREFIX:${prefix}:g"        ${worksrcpath}/numpy/distutils/system_info.py
                reinplace "s:MACPORTS_GCCPORT:gcc41:g"           ${worksrcpath}/numpy/distutils/system_info.py
        }
}

variant darwin i386 {
        depends_build-append port:gcc42

        post-patch {
                reinplace "s:MACPORTS_FORTRAN:gfortran-dp-4.2:g" ${worksrcpath}/numpy/distutils/fcompiler/gnu.py
                reinplace "s:MACPORTS_PREFIX:${prefix}:g"        ${worksrcpath}/numpy/distutils/system_info.py
                reinplace "s:MACPORTS_GCCPORT:gcc42:g"           ${worksrcpath}/numpy/distutils/system_info.py
        }
}
