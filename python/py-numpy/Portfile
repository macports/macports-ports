# $Id: Portfile,v 1.1 2006/03/07 18:30:43 mww Exp $

PortSystem 1.0
PortGroup  python24 1.0

name                    py-numpy
version                 1.0b5
revision                0
categories              python
platforms               darwin
maintainers             erickt@macports.org
description             The core utilities for the scientific library scipy for Python
long_description        ${description}

homepage                http://numeric.scipy.org/
master_sites            sourceforge:numpy
distname                numpy-${version}

checksums               md5 2451bc1751a9bc1c22452cd71f846982 \
                        sha1 001797105ba9924f50dc1115b5d5eaf1673e4d30 \
												rmd160 994baabc9df870dcdf5fbf62b1789e0d5fcb417b

depends_lib-append      lib:fftw:fftw-3 

patchfiles              patch-gnu.py \
                        patch-system_info.py

build.pre_args config_fc --f90exec ${prefix}/bin/gfortran-dp-4.1 --fcompiler gnu95

variant darwin powerpc {
        depends_build-append port:gcc41

        post-patch {
                reinplace "s:MACPORTS_FORTRAN:gfortran-dp-4.1:g" ${worksrcpath}/numpy/distutils/fcompiler/gnu.py
                reinplace "s:MACPORTS_PREFIX:${prefix}:g"        ${worksrcpath}/numpy/distutils/system_info.py
                reinplace "s:MACPORTS_GCCPORT:gcc41:g"           ${worksrcpath}/numpy/distutils/system_info.py
        }
}

variant darwin i386 {
        depends_build-append port:gcc42

        post-patch {
                reinplace "s:MACPORTS_FORTRAN:gfortran-dp-4.2:g" ${worksrcpath}/numpy/distutils/fcompiler/gnu.py
                reinplace "s:MACPORTS_PREFIX:${prefix}:g"        ${worksrcpath}/numpy/distutils/system_info.py
                reinplace "s:MACPORTS_GCCPORT:gcc42:g"           ${worksrcpath}/numpy/distutils/system_info.py
        }
}
