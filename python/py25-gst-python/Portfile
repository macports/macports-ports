# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem                  1.0

name                        py25-gst-python
set my_name                 gst-python
version                     0.10.17
categories                  python gnome audio
maintainers                 rmsfisher openmaintainer
description                 GStreamer python bindings
long_description            ${my_name} allows python programs built with the gnome toolkit to use gstreamer for multimedia input/output
homepage                    http://gstreamer.freedesktop.org/modules/gst-python.html
platforms                   darwin
master_sites                http://gstreamer.freedesktop.org/src/${my_name}/
distname                    ${my_name}-${version}
use_bzip2                   yes
checksums                   md5     3998753de6500ee8c18ce1456df43df6 \
                            sha1    b84ff5db07b6721e7cdb535f77ca39d3b59d1392 \
                            rmd160  872c1428e4b65bc2c72a0ead0f44d99b8e67d85e
depends_lib                 port:py25-gtk \
                            port:gst-plugins-base

#gst-python does not use setup.py, so python arguments are passed to configure
set python_prefix           ${frameworks_dir}/Python.framework/Versions/2.5
configure.pre_args-delete   --prefix=${prefix}
configure.pre_args-append   --prefix=${python_prefix}
configure.args-append       --includedir=${python_prefix}/include/python2.5
configure.pkg_config_path   ${python_prefix}/lib/pkgconfig
configure.python            ${prefix}/bin/python2.5

post-destroot {
    # Workaround for python25 framework bug (#16334)
	move ${destroot}${frameworks_dir}/Python.framework/Versions/2.5/lib/python2.5 \
		${destroot}${prefix}/lib/python2.5
	move ${destroot}${frameworks_dir}/Python.framework/Versions/2.5/share \
		${destroot}${prefix}/share
}

livecheck.url   http://gstreamer.freedesktop.org/src/${name}/
livecheck.regex "${name}-(\\d+(?:\\.\\d+)*)${extract.suffix}"
