# $Id$

PortSystem 1.0
PortGroup python 1.0

name			py-tkinter
version			2.4.6
categories		python graphics
license			PSF
platforms		darwin
maintainers		jwa mcalhoun erickt singingwolfboy fourdigits.nl:roel openmaintainer
description		Python bindings to the Tk widget set
long_description	${description}

homepage		http://docs.python.org/library/tkinter.html

python.versions     24 25 26 27 31 32

set extract_files "Modules/_tkinter.c Modules/tkappinit.c"
set module_name Tkinter
subport py24-tkinter {
    homepage    http://docs.python.org/release/2.4.4/lib/module-Tkinter.html
    checksums   md5 76083277f6c7e4d78992f36d7ad9018d \
                sha1 cb1972a554a458f6a26d3e047b359251865d7c96 \
                rmd160 0687989193dec2ac108142759281be7ddcf7f31e
    use_bzip2   yes
}
subport py25-tkinter {
    version     2.5.6
    homepage    http://docs.python.org/release/2.5.4/lib/module-Tkinter.html
    checksums   md5 5d45979c5f30fb2dd5f067c6b06b88e4 \
                sha1 29f6dd41bf09c5e04311b367cbb7604fa016e699 \
                rmd160 92f0a955971f187a7d50c6422168202ec551bf22
    use_bzip2   yes
}
subport py26-tkinter {
    version     2.6.7
    homepage    http://docs.python.org/release/${version}/library/tkinter.html
    checksums   md5 d40ef58ed88438a870bbeb0ac5d4217b \
                sha1 5d35eb746e85fb3deaff8518448137c9b9fb6daa \
                rmd160 513e84a7cb76ca876e3803bb03ed558bd0378063
    use_bzip2   yes
}
subport py27-tkinter {
    version     2.7.2
    homepage    http://docs.python.org/release/${version}/library/tkinter.html
    checksums   md5 ba7b2f11ffdbf195ee0d111b9455a5bd \
                sha1 417bdeea77abfaf1b9257fc6b4a04aaa209f4547 \
                rmd160 c3bf4f09b7c429a4d9f4cc251c795304cd5232c5
    # consider changing to xz with next release (in sync with python27)
    use_bzip2   yes
    append extract_files " Modules/tkinter.h"
}
subport py31-tkinter {
    version     3.1.4
    homepage    http://docs.python.org/release/${version}/library/tkinter.html
    checksums   md5 dcd128e69f8ee239182b54e33313aac7 \
                sha1 e5767a4fc92433816451de75c8721f2e1a81f6ea \
                rmd160 beb24a2a1227aa2bc036263b4c808daa72fa3e02
    use_xz      yes
    append extract_files " Modules/tkinter.h"
    set module_name tkinter
}
subport py32-tkinter {
    version     3.2.2
    homepage    http://docs.python.org/release/${version}/library/tkinter.html
    checksums   md5 9d763097a13a59ff53428c9e4d098a05 \
                sha1 3be9287068c9b4c3e5f46f03ccb0f365b56ed56d \
                rmd160 029d7ae5fbfaad6fc9ab3fea4ddd53943159976e
    # consider changing to xz with next release (in sync with python32)
    use_bzip2   yes
    append extract_files " Modules/tkinter.h"
    set module_name tkinter
}

master_sites	http://www.python.org/ftp/python/${version}/
distname		Python-${version}

if {$subport != $name} {
    depends_lib-append port:tk

    dist_subdir python${python.version}

    worksrcdir		${worksrcdir}/Modules

    foreach f $extract_files {
        lappend extract_files_full "${distname}/$f"
    }
    extract.post_args	"| tar -xf - $extract_files_full"
    post-extract {
        file copy	${filespath}/setup.py ${worksrcpath}
    }

    configure {
        reinplace "s|__PREFIX__|${prefix}|g" ${worksrcpath}/setup.py
        reinplace "s|__TK-VERSION__|8.5|g" ${worksrcpath}/setup.py
        reinplace "s|__MODULE_NAME__|${module_name}|g" ${worksrcpath}/setup.py
    }
    livecheck.type	regex
    livecheck.url	http://www.python.org/download/releases/
    livecheck.regex	Python (${python.branch}\\.\[0-9\]+)
} else {
    livecheck.type none
}
