# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           python 1.0

name                py-tensorflow
version             1.11.0
platforms           darwin
supported_archs     x86_64
license             Apache-2
maintainers         {emcrisostomo @emcrisostomo} openmaintainer

description         TensorFlow helps the tensors flow
long_description    ${description}

homepage            https://www.tensorflow.org/

if {${python.version} eq 27} {
    master_sites  https://files.pythonhosted.org/packages/c1/d4/623b04520c344bd4b861efe89c83cef1f2d0d24d6791704d15920a1abd4a
    checksums     rmd160  e4f85a516187b7219cb92891b27fc769bb158b6c \
                  sha256  12750d7b5950eb6afff9027099e114ee293cbac9fa0b407fa1405e0dea334be6 \
                  size    59353399
} elseif {${python.version} eq 35} {
    master_sites  https://files.pythonhosted.org/packages/af/f5/e4e633626e55afab3d77d0c7e2fe0cc7073a102263b16f8cbfea8c54b743
    checksums     rmd160  4787c449617b490ef42b7365aa275aa3eadde80d \
                  sha256  27e5c8204e89399b21b5e34a8b01c37c9adc0bde284b818d0dad1d31f0ebe4e7 \
                  size    59349901
} elseif {${python.version} eq 36} {
    master_sites  https://files.pythonhosted.org/packages/70/78/cd74769027b6249e45807637c1aa3ef212b9492349cca4b87e5de1a10548
    checksums     rmd160  aa2fd5916391c77d6f1012fffbe8b5d8db3981a1 \
                  sha256  b493edf82a840bc4539bc9303ed8ef7188475213e3057822513c892654208a9a \
                  size    59349911
}

distname            tensorflow-${version}-cp${python.version}-cp${python.version}m-macosx_10_11_x86_64

extract.suffix      .whl
extract.only

python.versions     27 35 36

if {${name} ne ${subport}} {

    depends_build-append \
        port:py${python.version}-pip

    depends_lib-append \
        port:py${python.version}-wheel \
        port:py${python.version}-tensorflow-tensorboard \
        port:py${python.version}-six \
        port:py${python.version}-protobuf3 \
        port:py${python.version}-numpy \
        port:py${python.version}-mock \
        port:py${python.version}-backports.weakref

    if {${python.version} < 34} {
        depends_lib-append \
            port:py${python.version}-enum34
    }

    build {
    }

    destroot.cmd        pip-${python.branch}
    destroot.args       \
        --no-cache-dir \
        --no-dependencies \
        --root ${destroot} \
        ${distpath}/${distfiles}
    destroot.post_args

    post-destroot {
        file delete ${destroot}${python.prefix}/bin/tensorboard
        file delete ${destroot}${prefix}/bin/tensorboard-${python.branch}
    }

    livecheck.type      none
}
