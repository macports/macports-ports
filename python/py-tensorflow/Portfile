# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           python 1.0

name                py-tensorflow
version             1.6.0
platforms           darwin
supported_archs     x86_64
license             Apache-2
maintainers         {@emcrisostomo gmail.com:enrico.m.crisostomo} openmaintainer

description         TensorFlow helps the tensors flow
long_description    ${description}

homepage            https://www.tensorflow.org/

if {${python.version} eq 27} {
    master_sites        https://pypi.python.org/packages/77/7b/ddf9d99ccd3b26e53aebeea7653524c118ba15af95fe2d6b282fe5b2c4af

    checksums           rmd160 5dd129ddb67ede1b22b6db4782137ee823937b0d \
                        sha256 d9c628c857ccd9213d75e0747fcad6ef4d6866a79d1a3987d87a5957c3f0f819 \
                        size   43550478
} elseif {${python.version} eq 35} {
    master_sites        https://pypi.python.org/packages/96/ce/6b68ae620c45a6721c9adecf8c62ecbf947f6b41677ed0da3739b7e3faff

    checksums           rmd160 9708dd29054fc882def6a6fcffbd99945070d336 \
                        sha256 eaa4af9eb161af500a5e3c65dcc434d63478801539f51cdd8c01572eda9dfa2d \
                        size   43669899
} elseif {${python.version} eq 36} {
    master_sites        https://pypi.python.org/packages/23/07/e7bf3270007e85b4eec20d64bd94fff54e1df4d799842694096a5d62d760

    checksums           rmd160 fdb8ee04bbe94f7ec9054a1d28b23fe1fab9b4b8 \
                        sha256 17981691a5711dd8b0479b293229f3a22d2f0503d04c2691a2ef66ee50903257 \
                        size   43162275
}

distname            tensorflow-${version}-cp${python.version}-cp${python.version}m-macosx_10_11_x86_64

extract.suffix      .whl

extract {
}

python.versions     27 35 36

if {${name} ne ${subport}} {

    depends_build-append \
        port:py${python.version}-pip

    depends_lib-append \
        port:py${python.version}-absl \
        port:py${python.version}-astor \
        port:py${python.version}-backports.weakref \
        port:py${python.version}-gast \
        port:py${python.version}-grpcio \
        port:py${python.version}-mock \
        port:py${python.version}-numpy \
        port:py${python.version}-protobuf3 \
        port:py${python.version}-six \
        port:py${python.version}-tensorboard \
        port:py${python.version}-termcolor \
        port:py${python.version}-wheel

    if {${python.version} < 34} {
        depends_lib-append \
            port:py${python.version}-enum34
    }

    build {
    }

    destroot.cmd        pip-${python.branch}
    destroot.args       \
        --no-cache-dir \
        --no-dependencies \
        --root ${destroot} \
        ${distpath}/${distfiles}
    destroot.post_args

    post-destroot {
        file delete ${destroot}${python.prefix}/bin/tensorboard
        file delete ${destroot}${prefix}/bin/tensorboard-${python.branch}
    }

    livecheck.type      none
}
