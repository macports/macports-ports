# $Id$

PortSystem              1.0
PortGroup               python25 1.0

name                    py25-scipy
version                 0.6.0
revision                5
categories              python
platforms               darwin
maintainers             ram openmaintainer
description             An opensource library of scientific tools for Python
long_description        ${description}

homepage                http://www.scipy.org/
master_sites            sourceforge:scipy
distname                scipy-${version}

checksums               md5 417adf3bfe03f4c23c9fb265018e545c \
                        sha1 65eff3e245f59b2af9adc70fad11daa40f0ba3e0 \
                        rmd160 391f2067f7dcc133e7e8622df93a2a0cd5ebbe5b

depends_lib-append      lib:gnuplot:gnuplot \
                        port:py25-numpy

worksrcdir              ${distname}

patchfiles              patch-changeset_r3387.diff

build.env               CCFLAGS="-I${prefix}/include -L${prefix}/lib"

variant g95 conflicts gcc42 description "Use g95 as fortran compiler" {
  depends_lib-append    port:g95
  set fc_options        "config_fc --fcompiler g95 --f77exec ${prefix}/bin/g95 --f90exec ${prefix}/bin/g95"
  build.cmd-append      ${fc_options}
  destroot.cmd-append   ${fc_options}
}

variant gcc42 conflicts g95 description "Use gfortran-mp-4.2 as fortran compiler" {
  depends_lib-append    port:gcc42
  set fc_options        "config_fc --fcompiler gnu95 --f77exec ${prefix}/bin/gfortran-mp-4.2 --f90exec ${prefix}/bin/gfortran-mp-4.2"
  build.cmd-append      ${fc_options}
  destroot.cmd-append   ${fc_options}
}

variant no_gnuplot description "Don't depend on GNUPlot" {
  depends_lib-delete    lib:gnuplot:gnuplot
}

if { ![variant_isset g95] && ![variant_isset gcc42] } {
  default_variants      +g95
}
