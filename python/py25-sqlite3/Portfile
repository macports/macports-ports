# $Id: Portfile 21460 2007-01-25 20:57:54Z mww@macports.org $

PortSystem 1.0
#PortGroup python25 1.0

name			py25-sqlite3
version			2.5
categories		python databases
platforms		darwin
maintainers		mww@macports.org
description		Python bindings to sqlite3
long_description	${description}

homepage		http://www.python.org/doc/current/lib/module-sqlite3.html
master_sites	http://www.python.org/ftp/python/${version}/
distname		Python-${version}
dist_subdir		python25
checksums		sha1 98ce9346cc4a7ef4621ecdcfc3957d595d97a078
use_bzip2		yes

worksrcdir		${worksrcdir}/Modules

extract.post_args	"| tar -xf - ${distname}/Modules/_sqlite"
post-extract {
	file copy	${filespath}/setup.py ${worksrcpath}
}

set libdir ${prefix}/lib/
set incdir ${prefix}/include/
#depends_lib-append	port:sqlite3
depends_lib		port:python25 port:sqlite3

configure	{
	cd ${worksrcpath}
	reinplace "s|__VERSION__|${version}|g" setup.py
	reinplace "s|__LIBDIR__|${libdir}|g" setup.py
	reinplace "s|__INCDIR__|${incdir}|g" setup.py
}

# remove these lines when python25 port group is available
build.cmd		${prefix}/bin/python2.5 setup.py
build.target	build
destroot.cmd	${build.cmd}
destroot.destdir	--prefix=${prefix} --root=${destroot}

