# $Id: Portfile,v 1.32 2003/03/03 06:28:59 mij Exp $

PortSystem 1.0
name			vim
set vim_patchlevel	343
version			6.1.$vim_patchlevel
categories		editors
maintainers		mij@opendarwin.org
description		Vi "workalike" with many additional features
homepage		http://www.vim.org/
platforms		darwin freebsd

long_description	Vim is a virtually compatible, extremely \
			enhanced version of the vi editor.

master_sites		ftp://nuxi.ucdavis.edu/pub/vim/unix/ \
			ftp://relay.nuxi.com/pub/vim/unix/ \
			ftp://ftp.vim.org/pub/vim/unix/  \
			ftp://ftp.is.co.za/applications/editors/vim/unix/  \
			ftp://ftp.prz.tu-berlin.de/pub/unix/editors/vim/unix/  \
			ftp://ftp.mirror.ac.uk/sites/ftp.vim.org/pub/vim/unix/
eval patch_sites	[strsed $master_sites g/unix/patches/]

dist_subdir		vim
worksrcdir		vim61
distname		$portname-[strsed $portversion {s/\.[0-9]*$//}]
use_bzip2		yes
configure.type		gnu
configure.args		--enable-gui=no --without-x
use_autoconf		yes
autoconf.dir		${workpath}/${worksrcdir}/src

set vim_badpatches	"002 016 019 023 035 044 049 050 066 073 076 083 086 088 093 100 119 147 148 149 151 154 151 154 155 156 163 166 173 184 188 190 198 202 221 223 228 230 235 238 240 243 245 253 259 285 287 290 291 292 295 300 301 303 304 311 313 315 320 322 332 333 334 335 336 340"

eval patchfiles		[split [exec /usr/bin/jot -s " " -w \
			[ strsed $portversion {s/\.[0-9]*$//}].%03d \
			$vim_patchlevel 1 $vim_patchlevel] " "]

foreach p ${vim_badpatches} {
	patchfiles-delete 6.1.${p}
}

variant x11 {
	configure.args --enable-gui=auto --with-x
}

include	checksums
