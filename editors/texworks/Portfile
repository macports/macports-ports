# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           cmake 1.1
PortGroup           github 1.0
PortGroup           qt5 1.0

# github.setup      TeXworks texworks 0.6.2 release-
github.setup        TeXworks texworks 70cafa3ba33e01084a6562df0303ed9bb9dab2b1
set git_date        20180512
version             0.6.2-git-${git_date}
platforms           darwin
categories          editors tex
maintainers         {mojca @mojca} openmaintainer
license             GPL-2

description         Editor for TeX documents
long_description    TeXworks is an environment for authoring TeX (LaTeX, ConTeXt, etc) documents, \
                    with a Unicode-based, TeX-aware editor, integrated PDF viewer, and a clean, \
                    simple interface accessible to casual and non-technical users.

checksums           rmd160  bc787c0cd8bbb7dadec3473a6135029bac5a4133 \
                    sha256  758f40f33f64160cd500ba9136d0e891122185d82b0d692d4540c45c3a804456 \
                    size    11174155

depends_build-append \
                    port:pkgconfig
depends_lib         port:fontconfig \
                    port:hunspell \
                    port:lua \
                    port:poppler \
                    port:poppler-qt5 \
                    port:texlive-bin \
                    port:zlib

# texlive-bin is needed for synctex (but maybe there is some workaround?)
# not sure why zlib is needed

configure.args-append \
                    -DWITH_LUA=ON \
                    -DWITH_MUPDF=OFF \
                    -DWITH_POPPLER=ON \
                    -DWITH_PYTHON=OFF \
                    -DQTPDF_VIEWER=OFF

# not properly tested yet
variant qtpdf description {Build with an experimental PDF viewer} {
    # and zlib
    depends_lib-append      port:freetype
    configure.args-replace  -DQTPDF_VIEWER=OFF -DQTPDF_VIEWER=ON
}

post-destroot {
    # alternatively set the DESTDIR straight to ${destroot}${applications_dir}
    move ${destroot}${prefix}/TeXworks.app ${destroot}${applications_dir}
}
