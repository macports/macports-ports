diff -urN ../../scintilla/gtk/makefile.orig ./../scintilla/gtk/makefile
--- ../../scintilla/gtk/makefile.orig	2010-10-27 17:15:45.000000000 -0400
+++ ../../scintilla/gtk/makefile	2011-01-27 17:14:07.000000000 -0500
@@ -30,7 +30,7 @@
 
 INCLUDEDIRS=-I ../include -I ../src -I ../lexlib
 #~ DEPRECATED=-DGDK_PIXBUF_DISABLE_DEPRECATED -DGDK_DISABLE_DEPRECATED -DGTK_DISABLE_DEPRECATED -DDISABLE_GDK_FONT
-CXXBASEFLAGS=-Wall -Wno-missing-braces -Wno-char-subscripts -Wno-long-long -pedantic -DGTK -DSCI_LEXER $(INCLUDEDIRS) $(DEPRECATED)
+CXXBASEFLAGS=-Wall -Wno-missing-braces -Wno-char-subscripts -Wno-long-long -pedantic -D__unix__ -DGTK -DSCI_LEXER $(INCLUDEDIRS) $(DEPRECATED)
 
 ifdef NOTHREADS
 THREADFLAGS=-DG_THREADS_IMPL_NONE
diff -urN scite/gtk/makefile.orig scite/gtk/makefile
--- makefile.orig	2010-10-27 17:16:07.000000000 -0400
+++ makefile	2011-01-27 17:23:27.000000000 -0500
@@ -42,7 +42,7 @@
 
 INCLUDEDIRS=-I ../../scintilla/include -I ../src
 #~ DEPRECATED=-DGDK_PIXBUF_DISABLE_DEPRECATED -DGDK_DISABLE_DEPRECATED -DGTK_DISABLE_DEPRECATED
-CXXBASEFLAGS=-W -Wall -Wno-char-subscripts -pedantic -DGTK -DSCI_LEXER -DPIXMAP_PATH=\"$(pixmapdir)\" -DSYSCONF_PATH=\"$(SYSCONF_PATH)\" $(INCLUDEDIRS) $(DEPRECATED)
+CXXBASEFLAGS=-W -Wall -Wno-char-subscripts -pedantic -D__unix__ -DGTK -DSCI_LEXER -DPIXMAP_PATH=\"$(pixmapdir)\" -DSYSCONF_PATH=\"$(SYSCONF_PATH)\" $(INCLUDEDIRS) $(DEPRECATED)
 
 ifdef DEBUG
 CXXTFLAGS=-DDEBUG -g $(CXXBASEFLAGS)
@@ -90,7 +90,7 @@
 FilePath.o SciTEBase.o SciTEBuffers.o SciTEIO.o StringList.o Exporters.o StringHelpers.o \
 PropSetFile.o MultiplexExtension.o DirectorExtension.o SciTEProps.o StyleWriter.o Utf8_16.o \
 	JobQueue.o GTKMutex.o IFaceTable.o $(COMPLIB) $(LUA_OBJS)
-	$(CC) `$(CONFIGTHREADS)` -rdynamic -Wl,--as-needed -Wl,--version-script lua.vers -DGTK $^ -o $@ $(CONFIGLIB) -ldl -lstdc++
+	$(CC) `$(CONFIGTHREADS)` -rdynamic -DGTK $^ -o $@ $(CONFIGLIB) -ldl -lstdc++
 
 # Automatically generate header dependencies with "make deps"
 include deps.mak
@@ -109,8 +109,10 @@
 	done
 
 ifdef gnomeprefix
-	$(INSTALL) -m 755 -D SciTE.desktop $(DESTDIR)$(datadir)/applications/SciTE.desktop
-	$(INSTALL) -m 644 -D Sci48M.png $(DESTDIR)$(pixmapdir)/Sci48M.png
+	$(INSTALL) -m 755 -d $(DESTDIR)$(datadir)/application
+	$(INSTALL) -m 644 SciTE.desktop $(DESTDIR)$(datadir)/applications
+	$(INSTALL) -m 644 -d $(DESTDIR)$(pixmapdir)
+	$(INSTALL) -m 644 Sci48M.png $(DESTDIR)$(pixmapdir)/Sci48M.png
 endif
 
 uninstall:
