# $Id: Portfile,v 1.1 2003/03/13 23:04:15 gwright Exp $

PortSystem 1.0
name		TeXmacs
version		1.0.1.5
distname	${distname}-src
categories	editors
maintainers	gwright@comcast.com
platforms	darwin
description	GNU TeXmacs: A Scientific Text Editor
long_description	\
		GNU TeXmacs is a free scientific text editor, \
		which was both inspired by TeX and GNU Emacs. \
		The editor allows you to write structured documents \
		via a wysiwyg (what-you-see-is-what-you-get) and \
		user friendly interface. New styles may be created by \
		the user. The program implements high-quality \
		typesetting algorithms and TeX fonts, which help you \
		to produce professionally looking documents.  \
								\
		The high typesetting quality still goes through for \
		automatically generated formulas, which makes TeXmacs \
		suitable as an interface for computer algebra systems. \
		TeXmacs also supports the Guile/Scheme extension language, \
		so that you may customize the interface and write your \
		own extensions to the editor. 

#user_notes	If texmacs can't find guile's modules, you will have to \
#		set GUILE_LOAD_PATH explicitly (usually /opt/local/share/guile/1.6). \
#		Also, don't forget to set DISPLAY to localhost:0.0 if \
#		launching TeXmacs from a non-X11 terminal.

homepage	http://www.texmacs.org/
master_sites	ftp://ftp.texmacs.org/pub/TeXmacs/targz/

checksums	md5 1e1228fbadbfea4ca52f6702bab797a1

depends_build	bin:guile-config:guile bin:latex:teTeX
depends_lib	lib:libX11.6:XFree86

# TeXmacs is ignorant of "make all", so we just "make" with no target:
build.target

post-install	{ system "mv ${destroot}${prefix}/bin/texmacs \
			     ${destroot}${prefix}/bin/texmacs.bin"
		  set script [open "${destroot}${prefix}/bin/texmacs" w 755]
		  puts $script "#!/bin/sh"
		  puts $script \
		  "export GUILE_LOAD_PATH=\$GUILE_LOAD_PATH:${prefix}/share/guile/1.6"
		  puts $script "${prefix}/bin/texmacs.bin $@"
		  close $script
		  system "chmod +x ${destroot}${prefix}/bin/texmacs"
		}

