# $Id: Portfile,v 1.5 2004/04/26 22:55:57 mww Exp $

PortSystem 1.0
name            spim
version         6.5
categories      emulators devel lang x11
maintainers     stewartsmith@mac.com
description     an assembly language MIPS R2000/R3000 simulator
homepage        http://www.cs.wisc.edu/~larus/spim.html
master_sites    http://www.cs.wisc.edu/~larus/SPIM/
distname        spim
checksums       md5 be9cf6ff2798e507736d05eb5c70914f
worksrcdir      spim-6.5
depends_lib     lib:libX11.6:XFree86
configure.cmd   ./Configure
post-configure  { reinplace "s|/usr/unsup|${prefix}|g" ${worksrcpath}/Makefile 
                  reinplace \
                        "s|^TRAP_DIR = \.|TRAP_DIR = ${prefix}/share/spim/|g" \
                        ${worksrcpath}/Makefile 
                  reinplace "s|/var/unsup|${prefix}|g" ${worksrcpath}/Makefile 
                }
build.target    spim xspim
build.args      BIN_DIR=${prefix}/bin MAN_DIR=${prefix}/share/man/ TRAP_DIR=${prefix}/share/spim/
pre-destroot     { xinstall -d ${destroot}${prefix}/share/spim }
destroot.target  install install.man
destroot.args	MAN_DIR=${prefix}/share/man
patchfiles	patch-Configure

long_description   SPIM S20 is a software simulator that runs assembly language programs for\
the MIPS R2000/R3000 RISC computers.  SPIM can read and immediately run\
files containing assembly language statements.  SPIM is a self-contained\
system for running these programs and contains a debugger and interface to\
the operating system.\
\
SPIM implements almost the entire MIPS assembler-extended instruction set\
for the R2000/R3000 (I've omitted some the complex floating point comparisons\
and details of the memory system page tables).  The MIPS architecture has\
evolved considerably since then (in particular the 64 bit extensions), which\
means that SPIM will not run programs compiled for recent MIPS or SGI\
processors.\

