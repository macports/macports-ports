# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           perl5 1.0

perl5.setup         MeCab 0.98
categories-append   textproc japanese
platforms           darwin
maintainers         gmail.com:rsky0711 hum openmaintainer
license             GPL-2 LGPL-2.1 BSD

description         a Perl module for MeCab
long_description    ${description}

homepage            http://mecab.sourceforge.net/
master_sites        sourceforge:mecab/mecab-perl/${perl5.moduleversion}
distname            mecab-perl-${perl5.moduleversion}
dist_subdir         mecab
checksums           rmd160  5e016a1db88674ce55d433ab57d5c9baf7e38e72 \
                    sha256  951997b31977df3ca2421baf2c5e77bb6207a19588cde9683900f063c4a3135a

if {${perl5.major} != ""} {
    depends_lib-append  path:bin/mecab-config:mecab-utf8

    platform darwin 8 {
        build.env       MACOSX_DEPLOYMENT_TARGET=10.4
    }

    post-patch {
        reinplace "s|\#!/usr/bin/perl|\#!${perl5.bin}|" \
            ${worksrcpath}/test.pl
    }

    post-destroot {
        set exdir ${destroot}${prefix}/share/doc/${subport}/examples
        xinstall -m 755 -d ${exdir}
        xinstall -m 755 ${worksrcpath}/test.pl ${exdir}
    }

    livecheck.type      none
} else {
    livecheck.type      regex
    livecheck.url       http://sourceforge.net/projects/mecab/files/mecab-perl
    livecheck.regex     mecab-perl\\/(\[0-9.\]+)
}
