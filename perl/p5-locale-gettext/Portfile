# $Id$

PortSystem      1.0
PortGroup       perl5 1.0
revision        2

perl5.setup     Locale-gettext 1.05
set my_name		gettext
distname        ${my_name}-${version}

homepage        http://search.cpan.org/dist/gettext/
maintainers     nomaintainer
platforms       darwin
description     Perl interface to GNU gettext

long_description    ${description}

checksums       md5 f3d3f474a1458f37174c410dfef61a46 \
                sha1 705f519ad61b4a8c522d8aaf98425e0bd21709f2 \
                rmd160 767adfce05b8fe77ddd7d3814951822746cf6e4b

depends_lib-append     port:gettext port:libiconv

if {[variant_isset universal]} {
    set CFLAGS "-I${prefix}/include ${configure.universal_cflags}"
} else {
    set CFLAGS "-I${prefix}/include ${configure.cc_archflags}"
}
set LDFLAGS    "-L${prefix}/lib"

patchfiles      patch-Makefile.PL
post-patch {
    reinplace "s|-lintl|${CFLAGS} ${LDFLAGS} -lintl|g" ${worksrcpath}/Makefile.PL
}

livecheck.type  regex
livecheck.url   ${homepage}
livecheck.regex ${my_name}-(\\d+(?:\\.\\d+)*)
