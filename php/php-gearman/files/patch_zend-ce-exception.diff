From 7b692ca6d0184e99e242fec7be0b261988ac1755 Mon Sep 17 00:00:00 2001
From: Remi Collet <remi@remirepo.net>
Date: Thu, 17 Jul 2025 14:41:59 +0200
Subject: [PATCH] use zend_ce_exception instead of zend_exception_get_default() for 8.5

---
 php_gearman.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/php_gearman.c b/php_gearman.c
index cf4d3a7..9d885cf 100644
--- a/php_gearman.c
+++ b/php_gearman.c
@@ -121,7 +121,7 @@ PHP_MINIT_FUNCTION(gearman) {
 
 	/* XXX exception class */
 	INIT_CLASS_ENTRY(ce, "GearmanException", class_GearmanException_methods)
-	gearman_exception_ce = zend_register_internal_class_ex(&ce, zend_exception_get_default());
+	gearman_exception_ce = zend_register_internal_class_ex(&ce, zend_ce_exception);
 	gearman_exception_ce->ce_flags |= ZEND_ACC_FINAL;
 	zend_declare_property_long(gearman_exception_ce, "code", sizeof("code")-1, 0, ZEND_ACC_PUBLIC);
 
