# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0
PortGroup               php 1.1

name                    php-maxminddb
license                 Apache-2
categories-append       devel
maintainers             {ryandesign @ryandesign} {mathiesen.info:macintosh BjarneDMat} openmaintainer

php.branches            7.2 7.3 7.4 8.0 8.1 8.2 8.3 8.4 8.5
php.pecl                yes

if {[vercmp ${php.branch} >= 7.2]} {
    version             1.13.1
    revision            0
    checksums           rmd160  48b2b344b0b6b6016eef90b5afa17925cb4184af \
                        sha256  362839e6a0a50f6253d46ae11b3cae80520582e2b5528423aed9644577a3a93d \
                        size    16471
}

description             PHP API for reading MaxMind DB files

long_description        This is the {*}${description}. MaxMind DB is a \
                        binary file format that stores data indexed by \
                        IP address subnets (IPv4 or IPv6).

if {${name} ne ${subport}} {
    depends_build-append \
                        path:bin/pkg-config:pkgconfig

    depends_lib-append  port:libmaxminddb

    php.build_dirs      ${worksrcpath}/ext

    configure.args      --with-maxminddb

    test.run            yes

    post-destroot {
        set docdir ${prefix}/share/doc/${subport}
        xinstall -d ${destroot}${docdir}
        xinstall -m 0644 -W ${worksrcpath} LICENSE README.md ${destroot}${docdir}
    }
}
