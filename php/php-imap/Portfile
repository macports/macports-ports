# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           php 1.1

name                php-imap
categories-append   mail
maintainers         {mathiesen.info:macintosh BjarneDMat} openmaintainer
license             PHP-3.01

# php81-imap and earlier subports are in the php Portfile.
php.branches        8.3 8.4
php.pecl            yes

description         a PHP interface to the IMAP protocol

long_description    ${description}

# according to 
#   https://pecl.php.net/package/imap
# imap for php81-php84 ought to be supported by this;
# but 1.0.0 fails to compile
if {[vercmp ${php.branch} >= 8.3]} {
    version         1.0.3
    revision        0
    checksums       rmd160  13677f1f6b649360eaaf603ba86d39af69e16835 \
                    sha256  0c2c0b1f94f299004be996b85a424e3d11ff65ac0a3c980db3213289a4a3faaf \
                    size    63476
} elseif {[vercmp ${php.branch} >= 8.1]} {
    version         1.0.0
    revision        0
    checksums       rmd160  250cc83d4b4125f233da6c160a4c1900837d988b \
                    sha256  cddf9e90380f01f27408137a62253254cff54f2f988de09350b5f107c8f44a39 \
                    size    63260
}
if {${name} ne ${subport}} {
    depends_build-append    port:cclient

    depends_lib-append      port:kerberos5 \
                            port:libcomerr

    configure.args-append   --with-imap=${prefix} \
                            --with-imap-ssl=${prefix} \
                            --with-kerberos=${prefix}
}
