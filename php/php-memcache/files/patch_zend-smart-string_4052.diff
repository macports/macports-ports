Original idea: Remi Collet <remi@remirepo.net>
Subject: [PATCH] Use Zend/zend_smart_string.h

https://github.com/websupport-sk/pecl-memcache/issues/119
--- php7/memcache_pool.h.orig	2025-10-14 19:02:33
+++ php7/memcache_pool.h	2025-10-14 19:08:42
@@ -42,7 +42,11 @@
 #include <string.h>
 
 #include "php.h"
+#if PHP_VERSION_ID >= 70200
+#include "Zend/zend_smart_string.h"
+#elif
+#include "ext/standard/php_smart_string.h"
+#endif
-#include "ext/standard/php_smart_string_public.h"
 #include "memcache_queue.h"
 
 /*
--- php7/memcache_pool.c.orig	2025-10-14 19:03:56
+++ php7/memcache_pool.c	2025-10-14 19:08:42
@@ -34,8 +34,6 @@
 #include "php_network.h"
 #include "ext/standard/crc32.h"
 #include "ext/standard/php_var.h"
-#include "ext/standard/php_string.h"
-#include "ext/standard/php_smart_string.h"
 #include "zend_smart_str.h"
 #include "memcache_pool.h"
 
--- php7/memcache_session.c.orig	2025-10-14 19:04:39
+++ php7/memcache_session.c	2025-10-14 19:08:42
@@ -29,7 +29,7 @@
 #include "php_variables.h"
 
 #include "SAPI.h"
+#include "memcache_pool.h"
-#include "ext/standard/php_smart_string.h"
 #include "ext/standard/url.h"
 #include "session/php_session.h"
 #ifdef PHP_WIN32
--- php7/memcache_ascii_protocol.c.orig	2025-10-14 19:03:33
+++ php7/memcache_ascii_protocol.c	2025-10-14 19:08:42
@@ -24,7 +24,6 @@
 #endif
 
 #include "memcache_pool.h"
-#include "ext/standard/php_smart_string.h"
 
 typedef struct mmc_ascii_request {
 	mmc_request_t	base;							/* enable cast to mmc_request_t */
--- php7/memcache_binary_protocol.c.orig	2025-10-14 19:03:41
+++ php7/memcache_binary_protocol.c	2025-10-14 19:08:42
@@ -34,7 +34,6 @@
 #include <netinet/in.h>
 #endif
 #include "memcache_pool.h"
-#include "ext/standard/php_smart_string.h"
 
 #ifdef htonll
 #undef htonll
