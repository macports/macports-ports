Original idea: Remi Collet <remi@remirepo.net>
Subject: [PATCH] Use Zend/zend_smart_string.h

https://github.com/websupport-sk/pecl-memcache/issues/119
--- src/memcache_pool.h.orig	2025-10-14 17:34:10
+++ src/memcache_pool.h	2025-10-14 17:37:39
@@ -42,7 +42,7 @@
 #include <string.h>
 
 #include "php.h"
-#include "ext/standard/php_smart_string_public.h"
+#include "Zend/zend_smart_string.h"
 #include "memcache_queue.h"
 
 /*
--- src/memcache_binary_protocol.c.orig	2025-10-14 17:46:52
+++ src/memcache_binary_protocol.c	2025-10-14 17:48:08
@@ -34,7 +34,6 @@
 #include <netinet/in.h>
 #endif
 #include "memcache_pool.h"
-#include "ext/standard/php_smart_string.h"
 
 #ifdef htonll
 #undef htonll
--- src/memcache_ascii_protocol.c.orig	2025-10-14 17:52:52
+++ src/memcache_ascii_protocol.c	2025-10-14 17:53:17
@@ -24,7 +24,6 @@
 #endif
 
 #include "memcache_pool.h"
-#include "ext/standard/php_smart_string.h"
 
 typedef struct mmc_ascii_request {
 	mmc_request_t	base;							/* enable cast to mmc_request_t */
--- src/memcache_pool.c.orig	2025-10-14 18:02:29
+++ src/memcache_pool.c	2025-10-14 18:05:30
@@ -34,8 +34,6 @@
 #include "php_network.h"
 #include "ext/standard/crc32.h"
 #include "ext/standard/php_var.h"
-#include "ext/standard/php_string.h"
-#include "ext/standard/php_smart_string.h"
 #include "zend_smart_str.h"
 #include "memcache_pool.h"
 
--- src/memcache_session.c.orig	2025-10-14 18:02:46
+++ src/memcache_session.c	2025-10-14 18:04:05
@@ -29,7 +29,7 @@
 #include "php_variables.h"
 
 #include "SAPI.h"
-#include "ext/standard/php_smart_string.h"
+#include "memcache_pool.h"
 #include "ext/standard/url.h"
 #include "ext/session/php_session.h"
 #ifdef PHP_WIN32
