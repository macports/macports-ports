--- ext-src/php_swoole.cc.orig
+++ ext-src/php_swoole.cc
@@ -274,11 +274,20 @@
 void php_swoole_register_shutdown_function(const char *function) {
     php_shutdown_function_entry shutdown_function_entry;
 #if PHP_VERSION_ID >= 80500
+    // PHP 8.5: Initialize fci_cache via zend_fcall_info_init
     zval function_name;
+    zend_fcall_info fci_tmp;
     memset(&shutdown_function_entry, 0, sizeof(php_shutdown_function_entry));
     ZVAL_STRING(&function_name, function);
     shutdown_function_entry.params = NULL;
     shutdown_function_entry.param_count = 0;
+
+    if (zend_fcall_info_init(&function_name, 0, &fci_tmp,
+                              &shutdown_function_entry.fci_cache, nullptr, nullptr) != SUCCESS) {
+        zval_ptr_dtor(&function_name);
+        return;
+    }
+
     register_user_shutdown_function(Z_STRVAL(function_name), Z_STRLEN(function_name), &shutdown_function_entry);
     zval_ptr_dtor(&function_name);
 #else
