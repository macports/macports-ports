--- ext-src/swoole_runtime.cc.orig
+++ ext-src/swoole_runtime.cc
@@ -190,12 +190,10 @@
             memcpy(new_list, old_list, ZEND_TYPE_LIST_SIZE(old_list->num_types));
             ZEND_TYPE_SET_PTR(new_arg_info[i].type, new_list);

-            zend_type *list_type;
-            ZEND_TYPE_LIST_FOREACH(new_list, list_type) {
-                zend_string *name = zend_string_dup(ZEND_TYPE_NAME(*list_type), true);
-                ZEND_TYPE_SET_PTR(*list_type, name);
+            for (uint32_t j = 0; j < new_list->num_types; j++) {
+                zend_string *name = zend_string_dup(ZEND_TYPE_NAME(new_list->types[j]), true);
+                ZEND_TYPE_SET_PTR(new_list->types[j], name);
             }
-            ZEND_TYPE_LIST_FOREACH_END();
         } else if (ZEND_TYPE_HAS_NAME(arg_info[i].type)) {
             zend_string *name = zend_string_dup(ZEND_TYPE_NAME(arg_info[i].type), true);
             ZEND_TYPE_SET_PTR(new_arg_info[i].type, name);
