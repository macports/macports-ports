# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:filetype=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem 1.0

name		mpeg2vidcodec
version		1.2
revision        1
categories	multimedia
maintainers	nomaintainer
description	MPEG-2 Video Encoder / Decoder
long_description	Contains an implementation of an ISO/IEC DIS \
			13818-2 codec.  It converts uncompressed video \
			frames into MPEG-1 and MPEG-2 video coded \
			bitstream sequences, and vice versa.
homepage	http://www.mpeg.org/MPEG/video/mssg-free-mpeg-software.html
master_sites	http://www.mpeg.org/pub_ftp/mpeg/mssg/ \
	        http://fresh.t-systems-sfr.com/unix/src/misc/
distname	mpeg2
distfiles	${name}_v12${extract.suffix}
checksums	md5 4a66565979be0818bd8a41d948943451
platforms	darwin

default_variants	+x11

variant x11 description {Enable X11 support} {
                  depends_lib	port:xorg-libs
		  build.args	USE_DISP=-DDISPLAY \
			  	USE_SHMEM=-DSH_MEM \
				LIBS="-lXext -lX11" \
				INCLUDEDIR=-I${x11prefix}/include \
				LIBRARYDIR=-L${x11prefix}/lib }

use_configure	no

destroot	{ system "install -m 0755 ${worksrcpath}/src/mpeg2dec/mpeg2decode ${destroot}${prefix}/bin/"
		  system "install -m 0755 ${worksrcpath}/src/mpeg2enc/mpeg2encode ${destroot}${prefix}/bin/"
		  file mkdir ${destroot}${prefix}/share/doc/${name}
		  file copy ${worksrcpath}/README \
			  ${worksrcpath}/doc/ARCHITECTURE \
			  ${worksrcpath}/doc/BUGS \
			  ${worksrcpath}/doc/m2d_old.doc \
			  ${worksrcpath}/doc/mpeg2enc.doc \
			  ${destroot}${prefix}/share/doc/${name}/ }

test.run	yes

livecheck.check moddate
livecheck.url   http://www.mpeg.org/pub_ftp/mpeg/mssg/${distfiles}
