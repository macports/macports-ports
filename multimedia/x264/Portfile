# $Id$

PortSystem 1.0

name		x264
version		20080724
revision	1
categories	multimedia
platforms	darwin
maintainers	acho@macports.org
description	x264 - a free h264/avc encoder
long_description x264 is a free library for encoding H264/AVC video streams. \
		The code is written by Laurent Aimar, Eric Petit(OS X), Min \
		Chen (vfw/nasm), Justin Clay(vfw), Måns Rullgård and Loren \
		Merritt from scratch. It is released under the terms of the \
		GPL license.
homepage	http://www.videolan.org/x264.html
master_sites	ftp://ftp.videolan.org/pub/videolan/x264/snapshots/
distname	${name}-snapshot-${version}-2245
checksums	sha1 8f3023d82d06b34a609e8c67ace8328e6c01aacb
use_bzip2	yes

depends_build	bin:svn:subversion port:yasm

configure.args \
		--enable-pthread --enable-pic


destroot.args	DIR_INSTALL=${destroot}${prefix}

build.target	default

variant noasm description {disable assembler optimization and remove yasm dep} {
	depends_build-delete	port:yasm
	configure.args-append	--disable-asm
}

variant G5 description {G5 specific optimizations} {
	configure.cflags-append "-mcpu=970 -mtune=970 -mpowerpc64 -mpowerpc-gpopt -fast -mabi=altivec -maltivec"
}
