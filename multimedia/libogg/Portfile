# $Id$

PortSystem      1.0

name            libogg
version         1.2.1
revision	1
categories      multimedia
platforms       darwin
use_parallel_build  yes
maintainers     rmstonecipher openmaintainer
description     Ogg Bitstream Library

long_description \
    Libogg is a library for manipulating ogg bitstreams. It handles both \
    making ogg bitstreams and getting packets from ogg bitstreams.

homepage        http://www.vorbis.com/
master_sites    http://downloads.xiph.org/releases/ogg/

checksums           md5     b998c2420721146df3b3d0e7776c97b9 \
                    sha1    7d8b49e6546f29e6ade7b5dd5d85c869e35b428a \
                    rmd160  50fd476d5ed7decb46626795c0e667c32404cc8c

patchfiles	patch-include-ogg-os_types.h.diff

post-configure {
    if {[variant_isset universal]} {
        reinplace "s|CC -dynamiclib|CC -dynamiclib ${configure.universal_ldflags}|g" \
            ${worksrcpath}/libtool
    }

    if {! [variant_isset doc]} {
        reinplace -E "/^install:/s/install-recursive//" \
            ${worksrcpath}/doc/Makefile
    }
}

post-destroot {
    set docdir ${prefix}/share/doc/${name}-${version}
    if {! [variant_isset doc]} {
        xinstall -d ${destroot}${docdir}
    }
    xinstall -m 0644 -W ${worksrcpath} AUTHORS CHANGES COPYING README ${destroot}${docdir}
}

variant doc description {Install extra documentation} {}

livecheck.url   ${master_sites}
livecheck.regex "${name}-(\\d+(?:\\.\\d+)*)${extract.suffix}"
