# $Id$

PortSystem      1.0

name            libogg
version         1.2.0
categories      multimedia
platforms       darwin
use_parallel_build  yes
maintainers     nox openmaintainer
description     Ogg Bitstream Library

long_description \
    Libogg is a library for manipulating ogg bitstreams. It handles both \
    making ogg bitstreams and getting packets from ogg bitstreams.

homepage        http://www.vorbis.com/
master_sites    http://downloads.xiph.org/releases/ogg/

checksums           md5     c95b73759acfc30712beef6ce4e88efa \
                    sha1    135fb812282e08833295c91e005bd0258fff9098 \
                    rmd160  35bbed1654b003a7b75dc9dca8e311ae73c03210

post-configure {
    if {[variant_isset universal]} {
        reinplace "s|CC -dynamiclib|CC -dynamiclib ${configure.universal_ldflags}|g" \
            ${worksrcpath}/libtool
    }

    if {! [variant_isset doc]} {
        reinplace -E "/^install:/s/install-recursive//" \
            ${worksrcpath}/doc/Makefile
    }
}

post-destroot {
    set docdir ${prefix}/share/doc/${name}-${version}
    if {! [variant_isset doc]} {
        xinstall -d ${destroot}${docdir}
    }
    xinstall -m 0644 -W ${worksrcpath} AUTHORS CHANGES COPYING README ${destroot}${docdir}
}

variant doc description {Install extra documentation} {}

livecheck.url   ${master_sites}
livecheck.regex "${name}-(\\d+(?:\\.\\d+)*)${extract.suffix}"
