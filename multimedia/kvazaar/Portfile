# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0

github.setup        ultravideo kvazaar 2.2.0 v
github.tarball_from releases
revision            0
categories          multimedia devel
license             BSD
maintainers         {outlook.com:mohd.akram @mohd-akram} openmaintainer

description         Open-source HEVC encoder

long_description    An open-source HEVC encoder licensed under 3-clause BSD.

depends_build       port:yasm

checksums           rmd160  36e351494fba5f81226e66820aafe948e2dc4b32 \
                    sha256  a3c35dc24f587145afacf537bdc43176b763be48cc05e1f597cce2c4e515689a \
                    size    1007269

# https://github.com/ultravideo/kvazaar/commit/fac849e7158589380941ad90e90b8c5495a86e12
patchfiles          0001-threads.h-fix-for-older-macOS-builds.patch

# With gcc-4.2 already configure fails.
compiler.blacklist-append \
                    *gcc-4.*

# All main tests pass; valgrind-based scripts may fail: https://github.com/ultravideo/kvazaar/issues/374
test.run            yes
test.target         check
