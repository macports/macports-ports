# $Id: Portfile,v 1.7 2004/12/23 09:19:13 blb Exp $

PortSystem			1.0
name				XviD
version				1.0.3
categories			multimedia devel
maintainers			blb@pobox.com
description			High performance and high quality MPEG-4 video library
long_description 	${description}

platforms			darwin sunos

homepage			http://www.xvid.org/
master_sites		http://files.xvid.org/downloads/
distname			xvidcore-${portversion}
use_bzip2			yes

checksums			md5 1487c4dd4449aedeb695807467e69054 \
					sha1 4b7de410e55c318cb68a829bb7e3619cbf40a1cf

worksrcdir			${distname}/build/generic

patchfiles			patch-build_generic_Makefile \
					patch-build_generic_configure

post-destroot {
	if {[variant_isset darwin]} {
		system "ln -s libxvidcore.4.dylib \
			${destroot}/${prefix}/lib/libxvidcore.dylib"
		system "ranlib ${destroot}/${prefix}/lib/libxvidcore.a"
	} else {
		system "ln -s libxvidcore.so.4.0 \
			${destroot}/${prefix}/lib/libxvidcore.so.4"
		system "ln -s libxvidcore.so.4.0 \
			${destroot}/${prefix}/lib/libxvidcore.so"
	}
}

# A simple placeholder, since it won't be set otherwise
variant darwin {
}

