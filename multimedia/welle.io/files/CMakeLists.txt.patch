--- files/CMakeLists.txt.orig	2019-10-13 15:45:12.000000000 +0200
+++ files/CMakeLists.txt	2019-10-13 21:36:49.000000000 +0200
@@ -5,6 +5,10 @@
 set(CMAKE_CXX_STANDARD_REQUIRED ON)
 set(CMAKE_CXX_STANDARD 14)
 
+option(WITH_APP_BUNDLE "Enable Application Bundle for macOS" ON)
+
+set(PROGNAME welle.io)
+
 add_definitions(-Wall)
 add_definitions(-g)
 add_definitions(-DDABLIN_AAC_FAAD2)
@@ -41,7 +45,17 @@
   endif()
 endif()
 
-include(GNUInstallDirs)
+if(APPLE AND WITH_APP_BUNDLE)
+    set(CMAKE_INSTALL_MANDIR "${PROGNAME}.app/Contents/Resources/man")
+    set(CLI_INSTALL_DIR "${PROGNAME}.app/Contents/MacOS")
+    set(PROXY_INSTALL_DIR "${PROGNAME}.app/Contents/MacOS")
+    set(BIN_INSTALL_DIR "${PROGNAME}.app/Contents/MacOS")
+    set(CMAKE_INSTALL_BINDIR "${PROGNAME}.app/Contents/MacOS")
+    set(PLUGIN_INSTALL_DIR "${PROGNAME}.app/Contents/PlugIns")
+    set(DATA_INSTALL_DIR "${PROGNAME}.app/Contents/Resources")
+else()
+    include(GNUInstallDirs)
+endif()
 
 if(BUILD_WELLE_IO)
     set(CMAKE_AUTOMOC ON)
@@ -260,6 +274,10 @@
                     ${CMAKE_CURRENT_BINARY_DIR}/index.js)
 endif()
 
+if(APPLE AND WITH_APP_BUNDLE)
+	install(FILES src/welle-gui/icon/icon.icns DESTINATION ${DATA_INSTALL_DIR})
+	install(FILES welle-io.plist DESTINATION ${PROGNAME}.app/Contents RENAME Info.plist)
+else()
 INSTALL (FILES ${PROJECT_SOURCE_DIR}/welle-io.desktop DESTINATION ${CMAKE_INSTALL_DATAROOTDIR}/applications)
 
 INSTALL (FILES ${PROJECT_SOURCE_DIR}/src/welle-gui/icon/16x16/welle-io.png DESTINATION ${CMAKE_INSTALL_DATAROOTDIR}/icons/hicolor/16x16/apps)
@@ -276,6 +294,8 @@
   DESTINATION ${CMAKE_INSTALL_DATAROOTDIR}/welle-io/html/
 )
 
+endif()
+
 configure_file(
     "${CMAKE_CURRENT_SOURCE_DIR}/cmake/cmake_uninstall.cmake.in"
     "${CMAKE_CURRENT_BINARY_DIR}/cmake_uninstall.cmake"
