# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=portfile:et:sw=4:ts=4:sts=4
# $Id$

PortSystem              1.0

name                    msp430mcu
version                 20110613
set lts_date            20110716

conflicts               ${name}-devel

maintainers             g5pw

categories              cross devel
description             Device capabilites database for MSP430 toolchain
long_description        ${description}

license                 GPL-3+
platforms               darwin

homepage                http://mspgcc.sourceforge.net/

master_sites            http://downloads.sourceforge.net/project/mspgcc/${name}/
patch_sites             http://downloads.sourceforge.net/project/mspgcc/Patches/LTS/${lts_date}/ \

patchfiles              ${name}-${version}-sf3379189.patch \
                        ${name}-${version}-sf3384550.patch \
                        ${name}-${version}-sf3400714.patch

use_bzip2               yes

checksums               ${name}-${version}-sf3379189.patch \
                        rmd160  2fe85c0d2c4a51a894ef0dca5a63b8e5510c7f41 \
                        sha256  002e6270f0946ae6b4384b7aded796e5bdc66a84c6b50dfba41cccd9527e8650 \
                        ${name}-${version}-sf3384550.patch \
                        rmd160  a75ba9fb8c181c3236b9a4015f166a7a1215f667 \
                        sha256  f86d961aacfdff966905e7747d974e479f3951a97bce75e7217bca151234bfc7 \
                        ${name}-${version}-sf3400714.patch \
                        rmd160  79cd2d40409f3100a7a131217d66d189dcf82cd4 \
                        sha256  050fd02eda01f4683b833c2646a5ad385e93f2d642f2a55d60bfda2c30b7bb76 \
                        ${name}-${version}${extract.suffix} \
                        rmd160  234c5bea0a345c78daba9b60445ff3393b7f572d \
                        sha256  954abc20d3997c8b6f63abcd7c683034b26435c537c0aa086c94e13d95e1b004

destroot.violate_mtree  yes

patch.args              -p1

use_configure           no

build {}

destroot {
    system "env MSP430MCU_ROOT=\"${worksrcpath}\" \
            ${worksrcpath}/scripts/install.sh ${destroot}${prefix}"
}

livecheck.type          regex
livecheck.url           http://sourceforge.net/projects/mspgcc/files/msp430mcu/
livecheck.regex         "${name}-((?!.*${name}.*|\\${extract.suffix}).*)\\${extract.suffix}"
