# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0

github.setup        mstorsjo llvm-mingw 20251216
github.tarball_from releases
platforms           {darwin any >= 15}
categories          cross
supported_archs     arm64 x86_64
license             NCSA
maintainers         {@Gcenx}

description         {An LLVM/Clang/LLD based mingw-64 toolchain}
long_description    ${description}

distname            ${github.project}-${version}-ucrt-macos-universal
use_xz              yes

checksums           sha256  38bb5e48ec3e0ce95fb901f4efff0bd6ffa966d1b32539a6510af816a959d160 \
                    rmd160  e8e68695812b30dcae40e3aeb46dc29d510449f3 \
                    size    119178172

use_configure       no
build {}

destroot {
    xinstall -d     ${destroot}${prefix}/libexec/llvm-mingw
    system -W ${workpath} "mv ${workpath}/${distname}/* ${destroot}${prefix}/libexec/llvm-mingw/"
}

if {[llength ${supported_archs}] > 1} {
    configure.universal_archs {*}${supported_archs}
    variant universal {}
}
