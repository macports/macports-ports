# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           python 1.0

name                gajim
version             1.4.7
set branch          [join [lrange [split ${version} .] 0 1] .]
revision            0

categories          net chat x11
supported_archs     noarch
license             GPL-3
maintainers         nomaintainer

description         A full featured and easy to use Jabber client.
long_description    The goal of Gajim is to provide a full featured \
                    and easy to use Jabber client. Gajim works nicely \
                    with GNOME, but does not require it to run.

homepage            https://www.gajim.org
master_sites        ${homepage}/downloads/${branch}/

checksums           rmd160  f64bc0b6a1555d549fc1ba6020fbf8c716a8e9df \
                    sha256  1a4807bf3a34b31048824e4fff762bd1e1622f464e73a426c09684dc293684f3 \
                    size    7184866

python.default_version 310

depends_build-append \
                    port:py${python.version}-setuptools \
                    port:gettext \
                    path:lib/pkgconfig/librsvg-2.0.pc:librsvg

depends_run-append  port:py${python.version}-css-parser \
                    port:py${python.version}-keyring \
                    port:py${python.version}-nbxmpp \
                    port:py${python.version}-packaging \
                    port:py${python.version}-Pillow \
                    port:py${python.version}-precis-i18n \
                    port:py${python.version}-openssl \
                    port:py${python.version}-cairo \
                    port:gtksourceview4 \
                    port:adwaita-icon-theme

depends_lib-append  path:lib/pkgconfig/gtk+-3.0.pc:gtk3 \
                    port:glib2 \
                    port:libsoup \
                    port:py${python.version}-gobject3

variant audiovideo {
    depends_run-append \
                    port:gstreamer1 \
                    port:gstreamer1-gst-libav \
                    port:gstreamer1-gst-plugins-base \
                    port:gstreamer1-gst-plugins-good \
                    port:gstreamer1-gst-plugins-ugly \
                    port:farstream \
                    port:py${python.version}-gst-python
}

variant geo {
    depends_run-append \
                    port:geoclue2
}

variant remote {
    depends_run-append \
                    port:dbus
}

variant zeroconf {
    depends_run-append \
                    port:avahi \
                    port:py${python.version}-pybonjour
}

variant secret {
    depends_run-append \
                    port:gnome-keyring \
                    port:libsecret
}
