# $Id: Portfile,v 1.6 2004/08/16 17:05:52 ssen Exp $

PortSystem 1.0
name			cvsup
version			16.1h
revision		1
categories		net devel
maintainers		landonf@opendarwin.org
description		General network file distribution system optimized for CVS
platforms		darwin
#depends_build		bin:cm3:cm3 path:${prefix}/lib/libz.a:zlib
depends_lib		bin:cm3:cm3
set cvsup-srcs		"/pub/FreeBSD/development/CVSup/sources/"
master_sites		ftp://ftp8.FreeBSD.org/${cvsup-srcs} \
			ftp://ftp3.FreeBSD.org/${cvsup-srcs} \
			ftp://ftp5.FreeBSD.org/${cvsup-srcs}
distname		cvsup-snap-${portversion}
checksums		md5 b100ace98a41aa9f3d3e75b0d3c245b0

# Mark destroot.target as .PHONY because HFS+ case insensitivity
# screws us over yet again.
patchfiles		patch-Makefile

configure		{}
post-patch		"reinplace s|/usr/local/lib|${prefix}/lib|g \
			${worksrcpath}/suplib/src/m3makefile"

# Disable static building until cm3 is fixed
#build.args		PREFIX=${prefix} M3=cm3 M3FLAGS=-DNOGUI\\ -DSTATIC
build.args		PREFIX=${prefix} M3=cm3 M3FLAGS=-DNOGUI

# Add ${prefix}/cm3/bin to our path
build.env		PATH=$env(PATH):${prefix}/cm3/bin
destroot.env		${build.env}
destroot.args		PREFIX=${destroot}/${prefix}/ M3=cm3 \
				MANDIR=${destroot}/${prefix}/share/man

