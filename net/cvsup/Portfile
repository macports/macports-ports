# $Id: Portfile,v 1.4 2003/08/05 09:29:20 jkh Exp $

PortSystem 1.0
name			cvsup
version			16.1g
revision		1
categories		net devel
maintainers		landonf@opendarwin.org
description		General network file distribution system optimized for CVS
platforms		darwin
depends_build		bin:cm3:cm3 path:${prefix}/lib/libz.a:zlib
set cvsup-srcs		"/pub/FreeBSD/development/CVSup/sources/"
master_sites		ftp://ftp8.FreeBSD.org/${cvsup-srcs} \
			ftp://ftp3.FreeBSD.org/${cvsup-srcs} \
			ftp://ftp5.FreeBSD.org/${cvsup-srcs}
distname		cvsup-snap-${portversion}
checksums		md5 253e773eb9d213f9bf3ce12acef184e8

# Mark destroot.target as .PHONY because HFS+ case insensitivity
# screws us over yet again.
patchfiles		patch-Makefile

configure		{}
post-patch		"reinplace s|/usr/local/lib|${prefix}/lib|g \
			${worksrcpath}/suplib/src/m3makefile"
build.args		PREFIX=${prefix} M3=cm3 M3FLAGS=-DNOGUI\\ -DSTATIC
destroot.args		PREFIX=${destroot}/${prefix}/ M3=cm3

# Add ${prefix}/cm3/bin to our path
set env(PATH) "$env(PATH):${prefix}/cm3/bin"
