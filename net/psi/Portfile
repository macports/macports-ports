# $Id$

PortSystem          1.0

name                psi
version             0.12
categories          net chat
maintainers         rowue@macports.org
description         jabber-based instant messaging client
long_description \
    Psi is a capable Jabber client aimed at experienced users.  Its design \
    goals are simplicity and stability.

platforms           darwin

homepage            http://psi.affinix.com/
master_sites        sourceforge
use_bzip2           yes

checksums           psi-0.12.tar.bz2 md5 47b654c944ef8766b860fe0645615d18 \
                    psi-0.12.tar.bz2 sha1 2927497a53d1eb00720718ec41cf61a911914922 \
                    psi-0.12.tar.bz2 rmd160 be5922ef84040113b257aaf99ac9bd350b69349c

depends_lib         lib:libz:zlib \
                    port:qt4-mac


configure.args      --qtdir=${prefix}

destroot {
    xinstall -m 755 -d ${destroot}/Applications/MacPorts
    file copy ${worksrcpath}/src/psi.app ${destroot}/Applications/MacPorts
    system "strip \
        ${destroot}/Applications/MacPorts/psi.app/Contents/MacOS/psi"
}

variant externalqca description {Use external qca} {

configure.args-append   --disable-bundled-qca
depends_lib-append      port:qca-ossl \
                        port:qca-gnupg \
                        port:qca
}


variant plugins description {Build with experimental Plugin Support} {

patch_sites-append  http://public.tfh-berlin.de/~s30935/files/
patchfiles          psi-plugin-patch-20080905.diff
checksums-append    psi-plugin-patch-20080905.diff md5 6cb31b898c9d6f5069625b6d7dc27fd1 \
                    psi-plugin-patch-20080905.diff sha1 fc1fc9986a4633af5fc1f54d795142790d4a1390 \
                    psi-plugin-patch-20080905.diff rmd160 21f74fddc7bc398179a0ac16700a7fa6263053ef
}
