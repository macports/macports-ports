# $Id: Portfile,v 1.27 2006/04/29 20:22:00 markd Exp $

PortSystem 1.0
name                lftp
version             3.3.5
revision		1
categories          net
maintainers         yeled@opendarwin.org
description         Sophisticated file transfer program
long_description    LFTP is a shell-like command line ftp client. \
                    It is reliable: can retry operations and does reget \
                    automatically. It can do several transfers simultaneously \
                    in background. You can start a transfer in background and \
                    continue browsing the ftp site or another one. This all is \
                    done in one process. Background jobs will be completed in \
                    nohup mode if you exit or close modem connection. Lftp has \
                    reput, mirror, reverse mirror among its features.
homepage            http://lftp.yar.ru/
platforms           darwin freebsd

master_sites        ftp://ftp.wiretapped.net/pub/mirrors/${name}/ \
		    ftp://ftp.wiretapped.net/pub/mirrors/${name}/old/ \
                    ftp://ftp.cs.tu-berlin.de/pub/net/ftp/${name}/ \
					http://ftp.yars.free.net/pub/source/${name}/
use_bzip2           yes
checksums           md5 5bacd284d10f578fcd4feeaefebca6f3

patchfiles		patch-commands.cc.diff

platform darwin8	{
		pre-configure {
				reinplace "s|poll_works=yes|poll_works=no|g" \
				${worksrcpath}/configure
		}
}

configure.args      --mandir=${prefix}/share/man \
                    --with-pic --disable-share --enable-static --without-openssl \
                    --with-included-readline --without-gnutls

post-destroot { xinstall -d ${destroot}${prefix}/share/doc/${name}
                xinstall -m 644 -v -W ${worksrcpath} \
                BUGS ChangeLog COPYING FAQ FEATURES NEWS \
                README README.debug-levels README.modules \
                THANKS TODO \
                ${destroot}${prefix}/share/doc/${name}
}

variant ssl {
	configure.args-append --with-openssl --without-gnutls
	configure.args-delete --without-openssl
}

variant tls {
	configure.args-append --with-openssl --without-gnutls
	configure.args-delete --without-openssl
}
