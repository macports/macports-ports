# $Id$

PortSystem 1.0
name		wireshark
version		1.2.9
revision	0
categories	net
maintainers	darkart.com:opendarwin.org
description	Graphical network analyzer and capture tool
homepage	http://wireshark.org/
platforms	darwin

long_description A network analyzer that lets you capture and \
		 interactively browse Ethernet frames. \
		 Packet data can be read from a file, or live from a local \
		 network interface.

master_sites	http://www.wireshark.org/download/src/			\
		http://www.wireshark.org/download/src/all-versions/

checksums           md5     a4240c36f1e668d85b703eacb7c0a95e \
                    sha1    6b31173a34c0050035516958e0b3ae83e83eac2c \
                    rmd160  d93be031cf01922dd1b23151f9a4c2581a99b1bf

use_bzip2	yes

depends_lib 		\
		port:bzip2 \
		port:c-ares \
		path:lib/pkgconfig/glib-2.0.pc:glib2 \
		port:gtk2 \
		port:openssl \
		port:libpcap \
		port:zlib \
		port:xorg-inputproto

configure.args	--enable-gtk2 \
		--without-libsmi \
		--disable-usr-local \
		--without-adns \
		--with-c-ares=${prefix} \
		--without-pcre \
		--disable-ipv6 \
		--with-pcap=${prefix} \
		--with-ssl=${prefix} \
		--with-zlib=${prefix} \
		--mandir=\\\${prefix}/share/man \
		--infodir=\\\${prefix}/share/info \
		--without-portaudio \
		--disable-warnings-as-errors

configure.ldflags-append "-Wl,-search_paths_first"

# port:libpcap is !universal_variant
universal_variant   no

variant adns description {use adns library for async. dns resolution instead of the default c-ares library} {
	configure.args-append	--with-adns=${prefix} \
							--without-c-ares
	configure.args-delete	--without-adns \
							--with-c-ares=${prefix}
	depends_lib-append	port:adns
}

variant gnutls {
	configure.args-append	--with-libgnutls-prefix=${prefix}
	depends_lib-append	port:gnutls
}

variant libgcrypt {
	configure.args-append	--with-libgcrypt-prefix=${prefix}
	depends_lib-append	port:libgcrypt
}

variant ipv6 {
	configure.args-append	--enable-ipv6
	configure.args-delete	--disable-ipv6
}

variant lua {
	configure.args-append	--with-lua=${prefix}
	depends_lib-append	port:lua
}

variant libsmi {
	configure.args-append	--with-libsmi=${prefix}
	configure.args-delete	--without-libsmi
	depends_lib-append	port:libsmi
}

variant pcre {
	configure.args-append	--with-pcre=${prefix}
	configure.args-delete	--without-pcre
	depends_lib-append	port:pcre
}

variant rtp description {add rtp support with portaudio} {
	configure.args-append   --with-portaudio=${prefix}
	configure.args-delete   --without-portaudio
	depends_lib-append      port:portaudio
}

variant no_ssl {
	configure.args-append --without-ssl
	depends_lib-delete	port:openssl
}

variant no_x11	{
	depends_lib-delete	port:gtk2
	configure.args-delete	--disable-gtk2
	configure.args-append	--disable-wireshark
}

#
##EOF
