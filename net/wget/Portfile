# $Id$

PortSystem              1.0

name                    wget
version                 1.11.3
categories              net www
maintainers             ryandesign
homepage                http://www.gnu.org/software/wget/
platforms               darwin freebsd
use_parallel_build      yes
master_sites            gnu

description \
    internet file retriever

long_description \
    GNU Wget is a free software package for retrieving files using HTTP, \
    HTTPS and FTP, the most widely-used Internet protocols. It is a \
    non-interactive commandline tool, so it may easily be called from \
    scripts, cron jobs, terminals without Xsupport, etc.

checksums \
    md5 a13e3a9beb2ba8fb2c5e57b39af1d6af \
    sha1 52e7ffb5226b89a8201db69d8c0a787ae14041fe \
    rmd160 83d6785d975a5dd950ad96526effc1c0fa3cb771

configure.args \
    --with-libssl-prefix=${prefix}

depends_lib \
    port:openssl \
    port:gettext

# As of 1.11.3, the tests are known to be incomplete or even broken. See
# ${worksrcpath}/tests/README for the current status of the test suite.
test.run                no

variant no_ssl description {Build without SSL support} {
    depends_lib-delete      port:openssl
    configure.args-append   --without-ssl
    configure.args-delete   --with-libssl-prefix=${prefix}
}

post-destroot {
    set docdir ${destroot}${prefix}/share/doc/${name}-${version}
    xinstall -d ${docdir}
    foreach docfile {AUTHORS COPYING NEWS README} {
        xinstall -W ${worksrcpath} ${docfile} ${docdir}/${docfile}.txt
    }
    xinstall -W ${worksrcpath} ChangeLog ${docdir}/ChangeLog-main.txt
    foreach changelog {doc src} {
        xinstall -W ${worksrcpath} ${changelog}/ChangeLog ${docdir}/ChangeLog-${changelog}.txt
    }
}
