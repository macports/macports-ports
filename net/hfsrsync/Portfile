# $Id: Portfile,v 1.6 2005/01/22 21:12:09 rshaw Exp $
PortSystem		1.0

name			hfsrsync
version			2.5.5
revision		1
categories		net
maintainers		rshaw@opendarwin.org
description		implementation of rsync with HFS+ support
long_description	hfsrsync is an implementation of rsync with HFS+ \
					support for support of HFS+ filesystems.
homepage		http://archive.macosxlabs.org/rsyncx/intro.html
master_sites	http://archive.macosxlabs.org/rsyncx/
distname		rsync-${version}.hfs
extract.suffix	.tgz
checksums		md5 f3a1d329c710d3c2f0183e77b3b8071e
platforms		darwin
configure.args	--with-rsync-path=hfsrsync \
				--disable-ipv6

variant ipv6 {
	configure.args-delete  --disable-ipv6
	configure.args-append  --enable-ipv6
}

post-build {
	cd ${worksrcpath}
	reinplace "s|/usr/bin/rsync|${prefix}/bin/hfsrsync|g" rsync.1
	reinplace "s|/usr/bin/rsync|${prefix}/bin/hfsrsync|g" rsyncd.conf.5
}

destroot {
	cd ${worksrcpath}
	xinstall -m 0755 -s rsync ${destroot}${prefix}/bin/hfsrsync
	xinstall -m 0644 rsync.1 ${destroot}${prefix}/share/man/man1/hfsrsync.1
	xinstall -m 0644 rsyncd.conf.5 ${destroot}${prefix}/share/man/man5/hfsrsyncd.conf.5
}

