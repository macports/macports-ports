# $Id: Portfile,v 1.15 2003/11/22 00:44:11 matt Exp $

PortSystem 1.0
name			pure-ftpd
version			1.0.16c
categories		net
platforms		darwin
maintainers		matt@opendarwin.org
homepage		http://www.pureftpd.org
description		A fast and standard-conformant FTP server

long_description	Pure-FTPd is a fast, production-quality, standard-conformant FTP server, \
			based upon Troll-FTPd. \
			Unlike other popular FTP servers, it's designed to be secure in default \
			configuration, has no known buffer overflow, it is really trivial to set \
			up and it is especially designed for modern kernels. \
			Features include chroot()ed and/or virtual chroot()ed home directories, \
			virtual domains, built-in 'ls', anti-warez system, bounded ports for \
			passive downloads, FXP protocol, bandwidth throttling, ratios, \
			LDAP / MySQL / PostgreSQL-based authentication, fortune files, Apache-like \
			log files, fast standalone mode, text / HTML / XML real-time status report, \
			virtual users, virtual quotas and more.

master_sites		ftp://ftp.pureftpd.org/pub/${name}/releases/
use_bzip2		yes
extract.suffix		.tar.bz2
extract.cmd		bzip2

checksums		md5 422ef27622882ffa773616ffaa20e06c

configure.args 		--with-everything \
			--with-virtualchroot \
			--with-paranoidmsg \
			--without-capabilities \
			--without-pam \
			--mandir=${prefix}/share/man \
			--infodir=${prefix}/share/info

destroot.destdir	prefix=${destroot}${prefix} \
			mandir=${destroot}${prefix}/share/man

post-destroot {		system "install -d -o root -m 755 '${destroot}${prefix}/share/doc/${name}' \
			&& install -c -o root -m 644 '${worksrcpath}/FAQ' '${worksrcpath}/HISTORY' \
			'${worksrcpath}/NEWS' '${worksrcpath}/README' '${worksrcpath}/README.Authentication-Modules' \
			'${worksrcpath}/README.Configuration-File' '${worksrcpath}/README.LDAP' '${worksrcpath}/README.MySQL' \
			'${worksrcpath}/README.PGSQL' '${worksrcpath}/README.TLS' '${worksrcpath}/README.Virtual-Users' \
			'${worksrcpath}/pureftpd-ldap.conf' '${worksrcpath}/pureftpd-mysql.conf' '${worksrcpath}/pureftpd-pgsql.conf' \
			'${destroot}${prefix}/share/doc/${name}'"
			}

post-install {		ui_msg "\nYou can now start PureFTPd in 2 ways,"
			ui_msg "either via xinetd or in standalone mode."
			ui_msg "Check pure-ftpd.8 manpage to see what are"
			ui_msg "the differences between these two ways.\n"
			ui_msg "If you choose the xinetd way, then a small"
			ui_msg "tweak to '/etc/xinetd.d/ftp' is needed.\n"
			}


variant tls {		depends_lib		lib:libssl.0.9:openssl
			configure.args-append	--with-tls
			}

variant french {	configure.args-append --with-language=french
			}

variant german {	configure.args-append --with-language=german
			}

variant spanish {	configure.args-append --with-language=spanish
			}

variant italian {	configure.args-append --with-language=italian
			}

variant polish {	configure.args-append --with-language=polish
			}

variant danish {	configure.args-append --with-language=danish
			}

variant romanian {	configure.args-append --with-language=romanian
			}

variant brazilian {	configure.args-append --with-language=brazilian
			}

variant slovak {	configure.args-append --with-language=slovak
			}

variant dutch {		configure.args-append --with-language=dutch
			}

variant korean {	configure.args-append --with-language=korean
			}

variant swedish {	configure.args-append --with-language=swedish
			}

variant norwegian {	configure.args-append --with-language=norwegian
			}

variant russian {	configure.args-append --with-language=russian
			}

variant czech {		configure.args-append --with-language=czech
			}

variant banner {	configure.args-append --without-banner
			}

variant traditional-chinese {   configure.args-append --with-language=traditional-chinese
                                }       

variant simplified-chinese {    configure.args-append --with-language=simplified-chinese
                                }
