# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           python 1.0

name                splat
version             1.0
revision            1
categories          net
license             BSD
platforms           darwin
maintainers         nomaintainer
description         Splat: Scalable Periodic LDAP Attribute Transmogrifier
long_description    Splat is a daemon designed to help keep information \
                    in an LDAP directory in sync with information \
                    outside of an LDAP directory. This information can \
                    be any set of attributes on any object in the LDAP \
                    directory.

homepage            https://github.com/threerings/splatd
master_sites        macports_distfiles

checksums           rmd160  db96b438b4d8f8dd5f1727afbf782b68ab3f43aa \
                    sha256  0cd91fb17fcc44fe10b2ba0a3a6f851b55045898a15b8b311b094e9963d204bb \
                    size    73575

supported_archs     noarch

python.default_version  27

depends_lib        port:py${python.version}-ldap \
                   port:py${python.version}-twisted \
                   port:py${python.version}-zconfig

startupitem.create yes
startupitem.name   Splat
startupitem.start  "${prefix}/sbin/splatd -f ${prefix}/etc/splat.conf -p /var/run/splatd.pid"
startupitem.stop   "kill `cat /var/run/splatd.pid`"

post-destroot {
    xinstall -m 644 ${worksrcpath}/splat.conf ${destroot}${prefix}/etc/splat.conf.sample
    file rename ${destroot}${prefix}/bin/splatd ${destroot}${prefix}/sbin/splatd
}
