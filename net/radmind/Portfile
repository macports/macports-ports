# $Id: Portfile,v 1.13 2004/08/17 23:05:43 rshaw Exp $
PortSystem 1.0

name			radmind
version			1.3.1
categories		net
maintainers		rshaw@opendarwin.org
description		Remotely administer the file systems of multiple unix machines
long_description	A suite of Unix command-line tools and a server \
					designed to remotely administer the file systems of \
					multiple Unix machines. At its core, radmind \
					operates as a tripwire. It is able to detect changes \
					to any managed filesystem object, e.g. files, \
					directories, links, etc.  However, radmind goes \
					further than just integrity checking: once a change \
					is detected, radmind can optionally reverse the \
					change.
platforms		darwin
homepage		http://rsug.itd.umich.edu/software/radmind/
master_sites	http://rsug.itd.umich.edu/software/radmind/files/
checksums		md5 c1a1c67bb9ec254db3432be2ee6d8dc5
extract.suffix	.tgz

depends_lib		lib:libssl.0.9:openssl

patchfiles		patch-Makefile.in

configure.args	--mandir='\${prefix}/share/man' \
				--with-radminddir='\${prefix}/var/radmind'

post-destroot	{
	cd ${destroot}${prefix}/var/radmind
	system "echo '# Client\t\tCommand File' >config"
	system "echo 'Place ca.pem/cert.pem files in this directory.' >cert/README"
	xinstall -v -d -m 0755 client
	system "echo 'Place command files in this directory.' >client/README"
	system "echo '# Empty default command file' >client/command.K"
	xinstall -v -d -m 0750 command
	system "touch command/.turd"
	xinstall -v -d -m 0750 file
	system "touch file/.turd"
	xinstall -v -d -m 0750 special
	system "touch special/.turd"
	xinstall -v -d -m 0750 tmp
	xinstall -v -d -m 0750 tmp/file
	system "touch tmp/file/.turd"
	xinstall -v -d -m 0750 tmp/transcript
	system "touch tmp/transcript/.turd"
	xinstall -v -d -m 0750 transcript
	system "touch transcript/.turd"
}

