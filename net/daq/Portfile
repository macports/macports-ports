# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0

name                daq
version             2.0.7
categories          net
license             GPL-2
maintainers         {jann @roederja} openmaintainer
description         A Data Acquisition library, for packet I/O
long_description    DAQ is an abstraction layer for PCAP. It is part of snort.
homepage            https://www.snort.org/
master_sites        ${homepage}downloads/snort/

platforms           macosx
depends_lib         port:pcre \
                    port:libdnet \
                    port:libpcap

checksums           rmd160  c915d34c0ba6c7deb469d6969bc1e077a27cf576 \
                    sha256  bdc4e5a24d1ea492c39ee213a63c55466a2e8114b6a9abed609927ae13a7705e \
                    size    520287

pre-configure {
    delete ${worksrcpath}/configure
}

# Fix intermittent parallel build failure (Moved from the patch file)
# https://trac.macports.org/ticket/45159
post-configure {
    reinplace "s|sf_scanner.c: \$(srcdir)/scanner.l|sf_scanner.c: \$(srcdir)/scanner.l \${builddir}/tokdefs.h|" ${worksrcpath}/sfbpf/Makefile
}

use_autoreconf      yes
autoreconf.args     -fvi

livecheck.type      regex
livecheck.url       ${homepage}downloads
livecheck.regex     >${name}-(\[0-9.\]+)${extract.suffix}<
