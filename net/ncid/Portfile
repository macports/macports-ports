# $Id$

PortSystem          1.0

name                ncid
version             0.70
categories          net
maintainers         ryandesign
homepage            http://ncid.sourceforge.net/
master_sites        sourceforge
platforms           darwin
worksrcdir          ${name}
use_configure       no
build.target        mac
destroot.target     mac-install
destroot.destdir    prefix=${destroot}${prefix}
universal_variant   no

description \
	Network Caller ID system

long_description \
	NCID is Caller ID (CID) distributed over a network to a variety of \
	devices and computers. It consists of a server that obtains the \
	Caller ID information and various clients that receive the \
	information from the server and act on it in various ways. \
	The NCID package consists of a server called ncidd, a universal \
	client called ncid and a CID client called ncidsip. \
	The server obtains the Caller ID information from a modem, a CID \
	device or one or more CID clients, and then sends the information \
	to each connected client.

checksums \
	md5 e179fbac6ab04ed3015fdf4e1c2a33f6 \
    sha1 287ebd8181f94be6a252edb10bf8b3593ac50d60 \
    rmd160 3da3269e9c8dd1da1c9ddf3b1e7be180230979a9

patchfiles \
	patch-Makefile.diff \
	patch-manpages.diff

post-patch {
	reinplace "s|@PREFIX@|${prefix}|g" \
		${worksrcpath}/Makefile \
		${worksrcpath}/man/ncid.1 \
		${worksrcpath}/man/ncidd.8 \
		${worksrcpath}/man/ncidmodules.1 \
		${worksrcpath}/man/ncidrotate.1 \
		${worksrcpath}/man/ncidsip.8 \
		${worksrcpath}/man/sip2ncid.8 \
		${worksrcpath}/man/yac2ncid.1
}

# TODO: add a startup item / LaunchDaemon plist for the server process.

# TODO: install the conf files only as templates; see e.g. apache2 port.
