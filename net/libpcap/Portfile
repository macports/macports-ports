# $Id: Portfile,v 1.19 2005/04/11 12:03:38 toby Exp $

PortSystem 1.0
name		libpcap
version		0.8.3
revision	3
categories	net
maintainers	fkr@opendarwin.org ricci@opendarwin.org
description	Packet Capture library
long_description	The Packet Capture library provides a high level interface to packet \
	capture systems. All  packets  on  the network, even those  destined \
	for  other  hosts,  are  accessible through this mechanism.
homepage	http://www.tcpdump.org/
platforms	darwin
master_sites	${homepage}release/
checksums	md5 56a9d4615d8354fcfe8cff8c8443c77b
configure.args	--mandir=${prefix}/share/man
configure.env	CFLAGS="-I. -dynamic -fno-common -DHAVE_CONFIG_H"
patchfiles	patch-Makefile.in
pre-configure	{
	reinplace "s/COMPAT_INFO/-compatibility_version $version -current_version $version/" \
	Makefile.in
}

variant ipv6 {
	configure.args-append	--enable-ipv6
}

variant no-shared {
	configure.env-delete	CFLAGS="-I. -dynamic -fno-common -DHAVE_CONFIG_H"
	patchfiles-delete	patch-Makefile.in
	pre-configure	{
		reinplace "s/COMPAT_INFO/-compatibility_version $version -current_version $version/" \
		Makefile.in
		}
}

platform darwin 8 {
	patchfiles-append patch-nametoaddr.c
}
