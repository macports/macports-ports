# $Id$

PortSystem 1.0

name                ldns
version             1.6.17
categories          net devel
platforms           darwin
license             BSD
maintainers         nomaintainer
description         DNS library in C
long_description    ldns is a library with the aim of simplifying DNS \
                    programming in C. It is heavily based upon the Net::DNS module from \
                    Perl.

homepage            http://www.nlnetlabs.nl/projects/ldns/
master_sites        http://www.nlnetlabs.nl/downloads/ldns/

checksums           rmd160  5382cfaafa7ec1fadcf390f804fbf14e04d7c03a \
                    sha256  8b88e059452118e8949a2752a55ce59bc71fa5bc414103e17f5b6b06f9bcc8cd

depends_build       bin:glibtool:libtool
depends_lib         path:lib/libssl.dylib:openssl

configure.args      --mandir=${prefix}/share/man --with-ssl=${prefix}
configure.cppflags  -I${worksrcpath}/include
build.type          gnu

pre-destroot {
    reinplace "s,defined(@\$also),@\$also," ${worksrcpath}/doc/doxyparse.pl
}

post-destroot {
    # Install pkg-config files not installed by the Makefile
    reinplace "s/-arch \[^ \]*//g" ${worksrcpath}/packaging/libldns.pc
    file mkdir ${destroot}${prefix}/lib/pkgconfig/
    file copy ${worksrcpath}/packaging/libldns.pc \
        ${destroot}${prefix}/lib/pkgconfig/libldns.pc
}

livecheck.type      regex
livecheck.url       http://www.nlnetlabs.nl/projects/ldns/
livecheck.regex     "The latest release is (\\d+(?:\\.\\d+)*)"
