# $Id: Portfile,v 1.16 2005/04/21 15:57:56 jberry Exp $
PortSystem 1.0

name			net-snmp
version			5.2
revision		2
categories		net
maintainers		opendarwin.org@darkart.com
description		An extendable SNMP implementation
long_description	This is net-snmp, a derivative of CMU's SNMP \
					package. Various tools relating to the Simple \
					Network Management Protocol including: an extensible \
					agent, an SNMP library, tools to request or set \
					information from SNMP agents, tools to generate and \
					handle SNMP traps, a version of the unix 'netstat' \
					command using SNMP, a Tk/perl MIB browser.
homepage		http://net-snmp.sourceforge.net/
platforms		darwin
master_sites	sourceforge
checksums		md5 af1c18209474ec4851b06504aae2a7c1
depends_build	path:/usr/include/netinet/ip_var.h:netinet-headers
patchfiles		patch-Makefile.in
configure.args	--enable-shared --disable-static --with-defaults \
				--with-sys-contact=nobody@no.where \
				--with-mib-modules="host disman/event-mib smux" \
				--with-persistent-directory='\${prefix}/var/net-snmp' \
				--mandir='\${prefix}/share/man' \
				--infodir='\${prefix}/share/info' \
				--with-logfile='\${prefix}/var/log' \
				--without-openssl --without-zlib
default_variants +ssl +zlib

variant ssl {
	depends_lib-append port:openssl
	configure.args-delete --without-openssl
	configure.args-append --with-openssl=${prefix}
}

variant zlib {
	depends_lib-append lib:libz.1.2:zlib
	configure.args-delete --without-zlib
	configure.args-append --with-zlib=${prefix}
}

variant server	{ depends_run path:/Library/StartupItems/DarwinPortsStartup:DarwinPortsStartup }

variant ipv6	{ configure.args-append --enable-ipv6 }

destroot.destdir	prefix=${destroot}${prefix} \
					exec_prefix=${destroot}${prefix}
post-destroot	{ destroot.keepdirs ${destroot}${prefix}/var/net-snmp }

