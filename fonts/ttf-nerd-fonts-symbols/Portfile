# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0

github.setup        ryanoasis nerd-fonts 3.4.0 v
github.tarball_from releases
name                ttf-nerd-fonts-symbols
revision            0

categories          fonts
license             MIT
maintainers         {judaew @judaew} openmaintainer

description         High number of extra glyphs from popular 'iconic fonts'
long_description    {*}${description}
homepage            https://nerdfonts.com

dist_subdir         ${name}/${version}
distfiles           NerdFontsSymbolsOnly.tar.xz

checksums           rmd160  8af31cac786110f3b0e2a0e769b8a26b501cb098 \
                    sha256  7f8c090da3b0eaa7108646bf34cbbb6ed13d5358a72460522108b06c7ecd716a \
                    size    2260092

depends_run         port:fontconfig

use_xz          yes
extract.mkdir   yes
use_configure   no

build       {}

destroot {
    set fontdir ${destroot}${prefix}/share/fonts/${name}
    xinstall -m 0755 -d ${fontdir}
    xinstall -m 0644 ${worksrcpath}/SymbolsNerdFont-Regular.ttf ${fontdir}
    xinstall -m 0644 ${worksrcpath}/SymbolsNerdFontMono-Regular.ttf ${fontdir}

    set fontconfig ${destroot}${prefix}/share/fontconfig/conf.avail
    xinstall -m 0755 -d ${fontconfig}
    xinstall -m 0644 ${worksrcpath}/10-nerd-font-symbols.conf ${fontconfig}
}

post-activate {
    system "${prefix}/bin/fc-cache -v ${prefix}/share/fonts"
}
post-deactivate {
    system "${prefix}/bin/fc-cache -v ${prefix}/share/fonts"
}

