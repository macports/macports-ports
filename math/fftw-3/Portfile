# $Id$

PortSystem      1.0
name            fftw-3
version         3.1.2
categories      math
platforms       darwin
maintainers     takeshi@macports.org
homepage        http://www.fftw.org/
distname        fftw-${version}

master_sites \
	${homepage} \
	ftp://ftp.fftw.org/pub/fftw/ \
	ftp://ftp.kusastro.kyoto-u.ac.jp/pub/src/GNU/fftw/

description \
	Fast C routines to compute the Discrete Fourier Transform

long_description \
	FFTW is a C subroutine library for computing the \
	Discrete Fourier Transform (DFT) in one or more \
	dimensions, of both real and complex data, and of \
	arbitrary input size. We believe that FFTW, which is \
	free software, should become the FFT library of choice \
	for most applications. Our benchmarks, performed on a \
	variety of platforms, show that FFTW's performance is \
	typically superior to that of other publicly available \
	FFT software. Moreover, FFTW's performance is portable: \
	the program will perform well on most architectures \
	without modification. \
	This port is of fftw version 3.x. It has many \
	improvements relative to 2.x, but is not backwardly \
	compatible.

checksums \
	md5 08f2e21c9fd02f4be2bd53a62592afa4 \
	sha1 3e4c64009ffb48123a0f30f46c1d89da7810dc67 \
	rmd160 13069b3582eeaa1fba1614cdca2dfbc2e45ab585

configure.args \
	--enable-type-prefix \
	--enable-threads \
	--enable-fma \
	--disable-fortran \
	--mandir=${prefix}/share/man \
	--infodir=${prefix}/share/info

post-build {
	system "cd ${worksrcpath} &&
	    make check"
}

variant fortran conflicts g95 {
	depends_lib-append port:gcc40
	configure.args-delete --disable-fortran
	configure.args-append --enable-fortran=gfortran-mp-4.0
}

variant g95 conflicts fortran {
	configure.fc	g95
	depends_lib-append port:g95
	configure.args-delete --disable-fortran
	configure.args-append --enable-fortran
}
