# $Id: Portfile,v 1.7 2004/10/11 23:02:53 gwright Exp $

PortSystem 1.0
name		maxima
version		5.9.0
revision	1
categories	math
maintainers	gwright@opendarwin.org
platforms	darwin
description	The Maxima computer algebra system
long_description	\
		The Maxima computer algebra system is a descendant	\
		of DOE Macsyma, a version of MIT's Macsyma whose	\
		development was supported by the U.S. Department of	\
		Energy.							\
									\
		Through the effort of the late William Shelter of the	\
		University of Texas, it was released under the GNU	\
		General Public License. It is one of the more		\
		comprehensive and powerful computer algebra systems	\
		available as open source. 

#bugs		The graphical interfaces (xmaxima and the maxima	\
#		session	mode of TeXmacs) are still quite immature and	\
#		prone to hang.						\
#									\
#		The not all of the printable documentation can be built \
#		from the top level makefile yet. The printable_doc	\
#		variant	builds the reference manual in dvi format and	\
#		forces its installation into				\
#		${prefix}/share/maxima/<version>/doc/dvi.		\

#user_notes	Because maxima usually only works with correctly	\
#		with specific versions of the underlying lisp,		\
#		the lisp that maxima uses is now found in the		\
#		maxima-lisp port. (Currently maxima-lisp is		\
#		clisp-2.29.) This allows the various lisps to be	\
#		updated without breaking maxima.

homepage	http://maxima.sourceforge.net/
master_sites    sourceforge
checksums	md5 a1d6d6ed6afb0eebf03df865c0a19f19

depends_build	bin:maxima-lisp:maxima-lisp
depends_run	bin:wish:tk

configure.args	--infodir=${prefix}/share/info		\
		--mandir=${prefix}/share/man		\
		--enable-clisp				\
		--with-clisp=${prefix}/bin/maxima-lisp

variant	printable_doc	{
		depends_build-append	bin:latex:teTeX
		build.target		all dvi

		pre-destroot	{ system "install -d -m 755 ${destroot}/${prefix}/share/${name}/${version}/doc/dvi"
				  system "install -c -m 644 ${workpath}/${worksrcdir}/doc/info/maxima.dvi ${destroot}/${prefix}/share/${name}/${version}/doc/dvi"
				}
		}
