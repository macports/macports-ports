# $Id$

PortSystem 1.0
name		cln
version		1.1.13
categories	math
platforms	darwin
maintainers	gwright@macports.org
description	Class Library for Numbers
long_description	\
		CLN is a C++ library providing a rich library of 	\
		numeric functions.

use_bzip2	yes

homepage	http://www.ginac.de/CLN/
master_sites	ftp://ftpthep.physik.uni-mainz.de/pub/gnu/

checksums	md5 1f3d227360003b389bba14c8a5c3695a

depends_lib	port:gmp

platform darwin 6 {
		return -code error "cln is not supported on Jaguar (OS X 10.2.x)"
		}

platform darwin 7 {
		return -code error "cln is not supported on Panther (OS X 10.3.x)"
		}

platform darwin 8 {
	configure.ldflags-append \
		-lstdc++
	configure.cflags-append \
		-fno-exceptions \
		-finline-limit=1000 \
		-I../include \
		-I${prefix}/include
	configure.cxxflags-append \
		-fno-exceptions \
		-finline-limit=1000 \
		-I../include \
		-I${prefix}/include \
		-L${prefix}/lib
}


configure.args	--with-gmp				\
		--infodir=${prefix}/share/info		\
		--mandir=${prefix}/share/man

build		{ system "cd ${worksrcpath} && LDFLAGS=\"-lstdc++ -Wl,-read_only_relocs,warning -L${prefix}/lib\" make all"
		}

default_variants	+test
variant test	{ test.run	yes
		  test.cmd	make
		  test.target	check
		}

