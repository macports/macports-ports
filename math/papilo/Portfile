# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0
PortGroup               boost 1.0
PortGroup               cmake 1.1
PortGroup               github 1.0
PortGroup               compiler_blacklist_versions 1.0
PortGroup               compilers 1.0

# NOTE: PaPILO can be used as a header-based library, please bump all dependent ports
github.setup            scipopt papilo 2.1.1 v
revision                1
categories              math
license                 {LGPL-3 GPL-3}

maintainers             {@catap korins.ky:kirill} openmaintainer

description             Parallel Presolve for Integer and Linear Optimization
long_description        {*}${description}

checksums               rmd160  086c74c8ce81f8b10c7073ea3b0090a7d1e77e0f \
                        sha256  f443e94de1ea61132526a68a681e8aa2e94488802085115284cf5dd000b31d25 \
                        size    1082818

patchfiles              patch-negative-egcd.diff

compilers.setup         require_fortran
compiler.cxx_standard   2014

compiler.blacklist-append {clang < 1000}

depends_lib-append      path:lib/libopenblas.dylib:OpenBLAS \
                        port:gmp \
                        port:onetbb

# PAPILO might be frontend for SCIP and/or SOPLEX
# anyway, SCIP is also required PAPILO,
# to break the dependency loop and make build clean
# disable SCIP, SOPLEX and HIGHS at PAPILO
# See: https://github.com/scipopt/papilo/issues/21
configure.args-append   -DSCIP=OFF \
                        -DSOPLEX=OFF \
                        -DHIGHS=OFF

# PAPILO may be linked against libquadmath, prevent that by using GMP.
configure.args-append   -DGMP=ON \
                        -DQUADMATH=OFF

test.run                yes
