# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0

github.setup        tulip-control gr1c 0.13.3 v
github.tarball_from archive

categories          math devel
maintainers         {cds.caltech.edu:slivingston @slivingston} \
                    openmaintainer
license             BSD

description         Tools for GR(1) synthesis and related activities

long_description    A collection of tools for GR(1) synthesis and related \
                    activities.  Its core functionality is checking \
                    realizability of and synthesizing strategies for GR(1) \
                    specifications, though it does much more.

homepage            http://scottman.net/2012/gr1c

checksums           rmd160  3688cbc01e01aeef6b435199eb65bac866036a9a \
                    sha256  de0e2f88a36e7c89bc8f0f2eaa0ed45fee8905f08aaf7ee3bf40baa43635a033 \
                    size    193089

depends_build       port:bison \
                    port:flex \
                    path:bin/dot:graphviz \
                    port:spin

patchfiles          patch-test-verification.patch

depends_lib         port:libcudd

configure.cmd       true

build.args          prefix="${prefix}"

foreach arch ${configure.universal_archs} {
    lappend merger_build_args(${arch}) \
                    CC='${configure.cc} -arch ${arch}' \
                    LD='ld -r -arch ${arch}'
}

if {(!${universal_possible} || ![variant_isset universal]) && [info exists merger_build_args(${build_arch})]} {
    build.args-append $merger_build_args(${build_arch})
}

test.run            yes
test.target         check
test.args           {*}${build.args}

destroot.target     install
destroot.args       {*}${build.args}
