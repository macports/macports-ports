# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0

name                claude-code
version             2.0.74
revision            0

categories          llm
maintainers         {breun @breun} openmaintainer
license             Commercial
supported_archs     x86_64 arm64

description         Claude Code -- Anthropic's agentic coding tool that lives in your terminal
long_description    Claude Code is an agentic coding tool that lives in your \
                    terminal, understands your codebase, and helps you code \
                    faster by executing routine tasks, explaining complex \
                    code, and handling git workflows - all through natural \
                    language commands.

homepage            https://claude.com/product/claude-code

if {${configure.build_arch} eq "x86_64"} {
    set arch_classifier x64
    checksums    rmd160  8ab24313c77422b23d978bbe553a46dc90933ef0 \
                 sha256  16c0c33e3f2b78c0f4de6f65964c6e72a1ddf2d6d32813a1bfc89864dea73c0f \
                 size    188717760
} elseif {${configure.build_arch} eq "arm64"} {
    set arch_classifier arm64
    checksums    rmd160  ec73a324aca86d245388a8358ccc6f771947eed0 \
                 sha256  4e25eec16cefdaf0de6f37d6b2417195996bd7bb91958f3712513e8e8e15681f \
                 size    182420720
} else {
    set arch_classifier unsupported_arch
}

set claude_code_releases https://storage.googleapis.com/claude-code-dist-86c565f3-f756-42ad-8dfa-d59b1c096819/claude-code-releases

master_sites        ${claude_code_releases}/${version}/darwin-${arch_classifier}/

distname            claude

extract.suffix
extract {}

use_configure       no
build {}

destroot {
    xinstall -m 755 ${distpath}/${distfiles} ${destroot}${prefix}/bin/claude
}

test.run    yes
test.cmd    claude
test.target
test.args   --version

livecheck.type      regex
livecheck.url       ${claude_code_releases}/latest
livecheck.regex     ^(\[\\d.\]+)$


