# $Id: Portfile,v 1.6 2004/12/11 01:05:48 matt Exp $

PortSystem 1.0
name			sylpheed-gtk2
version			0.9.99
categories		mail
maintainers		matt@opendarwin.org
description		GTK+2 port of the Sylpheed mail agent
homepage		http://sylpheed-gtk2.sf.net/
platforms		darwin

long_description	Sylpheed is a fast, lightweight email client written in \
			GTK+2.  The appearance and interface are similar to \
			popular Windows clients, such as Outlook Express, \
			Becky!, and Datula.

master_sites    	sourceforge
checksums		md5 980e69d99457db9c75480c876af90c31

distname		sylpheed-${version}-gtk2-20041024

depends_lib		lib:libgtk.2:gtk2

pre-configure {		reinplace "s|-traditional-cpp|-no-cpp-precomp|g" \
				${worksrcpath}/configure
			}

configure.env		LDFLAGS="-L${prefix}/lib -L${x11prefix}/lib -lX11" \
			CPPFLAGS="-I${prefix}/include" \
			CFLAGS="-O3 \
				-fstrict-aliasing \
				-funroll-loops \
				-pipe \
				-bind_at_load \
				-multiply_defined suppress"

configure.args		--disable-compface \
			--disable-jpilot \
			--disable-gdk-pixbuf \
			--disable-ipv6 \
			--program-suffix=-gtk2

variant ssl {		depends_lib-append lib:libssl.0.9:openssl
			configure.args-append --enable-ssl
			}

variant gpg {		depends_lib-append	lib:libgpgme:gpgme
			configure.args-append	--enable-gpgme \
						--with-gpgme-prefix=${prefix}
			}

variant ipv6 {		configure.args-delete	--disable-ipv6 
			configure.args-append	--enable-ipv6
			}

variant gdk {		depends_lib-append	lib:libgdk-pixbuf:gdk-pixbuf
			configure.args-delete	--disable-gdk-pixbuf
			configure.args-append	--enable-gdk-pixbuf
			}

variant ldap		{ configure.args-append	--enable-ldap }

