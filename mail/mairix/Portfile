# $Id: Portfile,v 1.4 2006/06/06 23:18:47 vinc17 Exp $

PortSystem 1.0
name			mairix
version			0.18
revision		1
categories		mail
maintainers		vincent-opdarw@vinc17.org
description		Email index and search tool
long_description	mairix is a program for indexing and searching email \
			messages stored in Maildir, MH or mbox folders.      \
			Indexing is fast. It runs incrementally on new       \
			messages - any particular message only gets scanned  \
			once in the lifetime of the index file. The search   \
			mode populates a "virtual" maildir (or MH) folder    \
			with symlinks which point to the real messages. This \
			folder can be opened as usual in your mail program.  \
			The search mode is very fast. Indexing and searching \
			works on the basis of words. The index file tabulates\
			which words occur in which parts (particular headers \
			+ body) of which messages.
homepage		http://www.rc0.org.uk/mairix/
master_sites		http://www.rpcurnow.force9.co.uk/mairix/
checksums		md5 ea9f19b5e80dcdfd56dd2da64b879e47 \
			sha1 b2a1a12117005a2453dff8ab41d61959066dc7a9

# Patch patch-rfc822.c resolves a conflict with /usr/include/stdio.h
# (defining _POSIX_C_SOURCE solves this problem, but introduces other
# ones, so a patch seems to be the best solution).
patchfiles		patch-parse.y patch-rfc822.c

depends_lib		port:zlib port:bzip2
configure.env		CPPFLAGS="-I${prefix}/include" LDFLAGS="-L${prefix}/lib"
configure.args		--mandir=${prefix}/share/man \
			--enable-gzip-mbox --enable-bzip-mbox
