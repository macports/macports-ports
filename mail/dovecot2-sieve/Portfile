# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github  1.0
PortGroup           cxx11   1.1

github.setup        dovecot pigeonhole 0.5.7.2

name                dovecot2-sieve

# Maintainers: Please revbump port:dovecot2-sieve and port:dovecot2-antispam
# on port:dovecot2 version changes.
revision            0

# Please keep port:dovecot2 major.minor version in sync.
# On port:dovecot2 major.minor version change please find the new version
# of port:dovecot2-sieve.
set dovecot2        2.3.7.2

categories          mail
maintainers         nomaintainer
platforms           darwin
license             LGPL
homepage            https://pigeonhole.dovecot.org/

description         Pigeonhole sieve and managesieve plugins for dovecot
long_description    ${description}

distname            dovecot-${dovecot2}-pigeonhole-${version}

checksums           rmd160  75e8312c59bce686ef191d7a939c6dccd343024b \
                    sha256  23aff6a6ffee6d4b970a24862161bfbae07b0e16cf7446854c728bfccfe34929 \
                    size    1026859

depends_lib         port:dovecot2 \
                    port:gettext \
                    port:mercurial

# Note: https://trac.macports.org/ticket/58544#comment:11 for this build logic
use_autoreconf      yes
autoreconf.cmd      ./autogen.sh
depends_build-append \
                    port:autoconf \
                    port:automake \
                    port:libtool

configure.ldflags-append \
                    -L${prefix}/lib/dovecot
configure.args      --with-managesieve=yes \
                    --disable-dependency-tracking
