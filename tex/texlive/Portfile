# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem      1.0

name            texlive
version         2009

categories      tex
maintainers     dports
description     TeX Live metaport
long_description    TeX Live is an easy way to get up and running with TeX. \
    It provides a comprehensive TeX system with binaries for most flavors   \
    of Unix, including GNU/Linux, and also Windows. It includes all the     \
    major TeX-related programs, macro packages, and fonts that are free     \
    software, including support for many languages around the world.        \
                                                                            \
    This is a metaport that installs collections of TeX Live packages.      \
    See the variants list for options about which collections to install.
    

homepage        http://www.tug.org/texlive/
platforms       darwin
supported_archs noarch

distfiles
use_configure   no
build           {}

destroot        {
    # Create a dummy file so the port can be successfully activated
    xinstall -d ${destroot}${prefix}/share/doc
    system "echo ${long_description} > ${destroot}${prefix}/share/doc/README.${name}.txt"
}

variant minimal \
    description "Minimal installation scheme (plain TeX only; no LaTeX)" \
    conflicts basic medium full {
    depends_lib port:texlive-basic
}

variant basic \
    description "Basic installation scheme for plain TeX or LaTeX documents" \
    conflicts minimal medium full {
    depends_lib port:texlive-basic \
                port:texlive-latex
}

variant medium \
    description "Medium installation scheme: plain, latex, recommended packages, some languages" \
    conflicts minimal basic full {
    depends_lib port:texlive-basic \
                port:texlive-bin-extra \
                port:texlive-context \
                port:texlive-documentation-english \
                port:texlive-fontutils \
                port:texlive-fonts-recommended \
                port:texlive-lang-czechslovak \
                port:texlive-lang-dutch \
                port:texlive-lang-french \
                port:texlive-lang-german \
                port:texlive-lang-italian \
                port:texlive-lang-polish \
                port:texlive-lang-portuguese \
                port:texlive-lang-spanish \
                port:texlive-lang-ukenglish \
                port:texlive-latex \
                port:texlive-latex-recommended \
                port:texlive-math-extra \
                port:texlive-metapost \
                port:texlive-xetex \
                port:texlive-luatex \
                port:texlive-generic-recommended
}

variant full \
    description "Full installation scheme (very large!)" \
    conflicts minimal basic medium {
    # should depend on texlive-htmlxml (currently broken)
    depends_lib port:texlive-basic \
                port:texlive-bibtex-extra \
                port:texlive-bin-extra \
                port:texlive-context \
                port:texlive-documentation-arabic \
                port:texlive-documentation-base \
                port:texlive-documentation-bulgarian \
                port:texlive-documentation-chinese \
                port:texlive-documentation-czechslovak \
                port:texlive-documentation-dutch \
                port:texlive-documentation-english \
                port:texlive-documentation-finnish \
                port:texlive-documentation-french \
                port:texlive-documentation-german \
                port:texlive-documentation-italian \
                port:texlive-documentation-japanese \
                port:texlive-documentation-korean \
                port:texlive-documentation-mongolian \
                port:texlive-documentation-polish \
                port:texlive-documentation-portuguese \
                port:texlive-documentation-russian \
                port:texlive-documentation-slovenian \
                port:texlive-documentation-spanish \
                port:texlive-documentation-thai \
                port:texlive-documentation-turkish \
                port:texlive-documentation-ukrainian \
                port:texlive-documentation-vietnamese \
                port:texlive-fonts-extra \
                port:texlive-fonts-recommended \
                port:texlive-fontutils \
                port:texlive-formats-extra \
                port:texlive-games \
                port:texlive-generic-extra \
                port:texlive-generic-recommended \
                port:texlive-humanities \
                port:texlive-lang-african \
                port:texlive-lang-arabic \
                port:texlive-lang-armenian \
                port:texlive-lang-cjk \
                port:texlive-lang-croatian \
                port:texlive-lang-cyrillic \
                port:texlive-lang-czechslovak \
                port:texlive-lang-danish \
                port:texlive-lang-dutch \
                port:texlive-lang-finnish \
                port:texlive-lang-french \
                port:texlive-lang-german \
                port:texlive-lang-greek \
                port:texlive-lang-hebrew \
                port:texlive-lang-hungarian \
                port:texlive-lang-indic \
                port:texlive-lang-italian \
                port:texlive-lang-latin \
                port:texlive-lang-latvian \
                port:texlive-lang-lithuanian \
                port:texlive-lang-mongolian \
                port:texlive-lang-norwegian \
                port:texlive-lang-other \
                port:texlive-lang-polish \
                port:texlive-lang-portuguese \
                port:texlive-lang-spanish \
                port:texlive-lang-swedish \
                port:texlive-lang-tibetan \
                port:texlive-lang-ukenglish \
                port:texlive-lang-vietnamese \
                port:texlive-latex \
                port:texlive-latex-extra \
                port:texlive-latex-recommended \
                port:texlive-latex3 \
                port:texlive-luatex \
                port:texlive-math-extra \
                port:texlive-metapost \
                port:texlive-music \
                port:texlive-omega \
                port:texlive-pictures \
                port:texlive-plain-extra \
                port:texlive-pstricks \
                port:texlive-publishers \
                port:texlive-science \
                port:texlive-xetex
}

variant letter description {Set paper format to letter} {
    build   {
        system "texconfig-sys paper letter"
    }
}

# These variants are for the underlying texmf ports; list them here so
# they get shown in 'port variants texlive'
variant doc description {Install documentation} { }
variant src description {Install TeX source} { }

default_variants +doc

if {![variant_isset minimal]
    && ![variant_isset basic]
    && ![variant_isset full]} {
    default_variants-append    +medium
}


livecheck.type      regex
livecheck.url       ${homepage}acquire.html
livecheck.regex     "TeX Live (\[0-9\]+) "

