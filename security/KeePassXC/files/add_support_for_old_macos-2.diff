--- src/gui/osutils/macutils/AppKitImpl.mm.orig	2025-05-27 17:48:31.000000000 -0700
+++ src/gui/osutils/macutils/AppKitImpl.mm	2025-05-27 19:14:00.000000000 -0700
@@ -19,7 +19,7 @@
 #import "AppKitImpl.h"
 #import <QWindow>
 #import <Cocoa/Cocoa.h>
-#if __clang_major__ >= 13 && MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_VERSION_12_3
+#if __clang_major__ >= 13 && MAC_OS_X_VERSION_MIN_REQUIRED >= 120300
 #import <ScreenCaptureKit/ScreenCaptureKit.h>
 #endif
 
@@ -61,7 +61,7 @@
 
 - (void) observeValueForKeyPath:(NSString *)keyPath
                       ofObject:(id)object
-                        change:(NSDictionary<NSKeyValueChangeKey,id> *)change
+                        change:(NSDictionary *)change
                        context:(void *)context
 {
     Q_UNUSED(object)
@@ -75,8 +75,10 @@
             };
 
             if(@available(macOS 11.0, *)) {
+#if __clang_major__ >= 9 && MAC_OS_X_VERSION_MIN_REQUIRED >= 101400
                 // Not sure why exactly this call is needed, but Apple sample code uses it so it's best to use it here too
                 [NSApp.effectiveAppearance performAsCurrentDrawingAppearance:emitBlock];
+#endif
             }
             else {
                 emitBlock();
@@ -134,7 +136,11 @@
 //
 - (bool) isDarkMode
 {
+#if __clang_major__ >= 9 && MAC_OS_X_VERSION_MIN_REQUIRED >= 101400
     return [NSApp.effectiveAppearance.name isEqualToString:NSAppearanceNameDarkAqua];
+#else
+    return false;
+#endif
 }
 
 
@@ -186,7 +192,7 @@
 //
 - (bool) enableScreenRecording 
 {
-#if __clang_major__ >= 13 && MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_VERSION_12_3
+#if __clang_major__ >= 13 && MAC_OS_X_VERSION_MIN_REQUIRED >= 120300
     if (@available(macOS 12.3, *)) {
         __block BOOL hasPermission = NO;
         dispatch_semaphore_t sema = dispatch_semaphore_create(0);
