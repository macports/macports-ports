# $Id: Portfile,v 1.2 2006/04/08 19:37:34 markd Exp $
PortSystem        1.0
name              prelude-manager
version           0.9.4.1
categories        security
maintainers       julien.touche@touche.fr.st
description       Prelude Network Intrusion Detection System central logging point
long_description  Prelude is a new innovative hybrid Intrusion Detection system designed \
                  to be very modular, distributed, rock solid and fast. \
		  \
		  The Prelude Log Monitoring Lackey monitors local logfiles and sends \
		  alerts to the manager if something suspicious is found. It is also a sensor
homepage          http://www.prelude-ids.org
master_sites      http://www.prelude-ids.org/download/releases/
platforms         darwin
checksums         md5 4641da26473496b2bc43647753ff0499
patchfiles	  patch-src-server-generic.c patch-src-server-logic.c
build.type        gnu
configure.args    --mandir=${prefix}/share/man \
                  --with-html-dir=${prefix}/share/doc \
		  --localstatedir=${prefix}/var \
		  --enable-ssl \
		  --disable-mysql \
		  --disable-pgsql
depends_lib       lib:libxml2:libxml2 \
                  lib:libprelude:libprelude

post-destroot {
	system "touch ${destroot}/${prefix}/var/spool/prelude-manager/.turd"
	reinplace "s|= /var|= ${prefix}/var|g" ${destroot}${prefix}/etc/prelude-manager/prelude-manager.conf
}
variant no_ssl {
	configure.args-delete --enable-ssl
	configure.args-append --disable-ssl
}

variant mysql {
	configure.args-delete --disable-mysql
	configure.args-append --enable-mysql
	depends_lib-append lib:libmysqlclient:mysql
}

#variant pgsql {
#	configure.args-delete --disable-pgsql
#	configure.args-append --enable-pgsql
#	depends_lib-append lib::postgresql
#}

