# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           golang 1.0

go.setup            github.com/FiloSottile/age 1.3.1 v
go.package          filippo.io/age
revision            0

homepage            https://age-encryption.org

description         \
    A simple, modern and secure encryption tool with small explicit keys, no \
    config options, and UNIX-style composability.

long_description    {*}${description}

categories          security
installs_libs       no
license             BSD
maintainers         {gmail.com:herby.gillot @herbygillot} \
                    openmaintainer

build.pre_args      -o ./_dist/ -ldflags \"-X main.Version=v${version}\"
build.args          ./cmd/...

github.livecheck.regex \
                    {([0-9.-]+)}

pre-build {
    file mkdir ${worksrcpath}/_dist
}

destroot {
    foreach age_bin [glob ${worksrcpath}/_dist/*] {
        xinstall -m 0755 ${age_bin} ${destroot}${prefix}/bin/
    }
    foreach doc [glob ${worksrcpath}/doc/*.1] {
        copy ${doc} ${destroot}${prefix}/share/man/man1
    }
}

checksums           ${distname}${extract.suffix} \
                        rmd160  ecdbbb2393fb7dae1ce16a46e0e87e11f749c304 \
                        sha256  396007bc0bc53de253391493bda1252757ba63af1a19db86cfb60a35cb9d290a \
                        size    247789

go.vendors          golang.org/x/tools \
                        lock    v0.39.0 \
                        rmd160  709ceb0817539220bd256f8646c8837aa1adf55f \
                        sha256  55ed1e9dfff57ad77abaf2b1fc6db34205aebe4375f7dd8215f06d98bd662168 \
                        size    8312159 \
                    golang.org/x/term \
                        lock    v0.37.0 \
                        rmd160  3759f4d1753501eddc200d9470abbc5532628b4d \
                        sha256  5c843cde30cc5db1f4f91029922acfef7ef7b2f25e8de668a9810bb6eb6b8920 \
                        size    15933 \
                    golang.org/x/sys \
                        lock    v0.38.0 \
                        rmd160  116c6683aefacc223a60af4811ab8d97c4d3f6b0 \
                        sha256  5a63f5eb3814a66b1988ad9ff703c8d54d79463eed52a49f546091e17682cbc7 \
                        size    1535499 \
                    golang.org/x/crypto \
                        lock    v0.45.0 \
                        rmd160  5e8c5670b4ae9f82c9bc4e41dd2863beab2bd7e0 \
                        sha256  bd578b01007a7eccb50a26722812150c25361e900f329d961dcb1e52fa121ef0 \
                        size    2152069 \
                    github.com/rogpeppe/go-internal \
                        lock    v1.14.1 \
                        rmd160  73e6c350ebee85f1124b04a1d0efecfa724a8835 \
                        sha256  32749548af3fe11d55ec86ce24a089e1611224a0e302058695961498e73cac8a \
                        size    116406 \
                    filippo.io/nistec \
                        repo    github.com/FiloSottile/nistec \
                        lock    v0.0.4 \
                        rmd160  964249c1a11b811f948b5e85b5b6bb6685494cef \
                        sha256  94b755e01784141338b9fe54228ba251ac3d0fb99010943abade60e48d870e47 \
                        size    286472 \
                    filippo.io/hpke \
                        repo    github.com/FiloSottile/hpke \
                        lock    v0.4.0 \
                        rmd160  d5ed75761956a4cf0bd0049788a4dadaae2e19c3 \
                        sha256  c362d17b3fc4e7c0cea81f96dc9a98fc4cbdb679999ccabb2d8fa21c3f5f9116 \
                        size    78232 \
                    filippo.io/edwards25519 \
                        repo    github.com/FiloSottile/edwards25519 \
                        lock    v1.1.0 \
                        rmd160  32e76862168e566190f9be95e5a88dcb10b3a6a2 \
                        sha256  a68a54423370e136bf03e4217d2fba807b4d041f873f6ebbcfc8ad4ba9925f5d \
                        size    47132 \
                    c2sp.org/CCTV/age \
                        repo    github.com/C2SP/CCTV \
                        lock    e9274a7bdbfd \
                        rmd160  d9ed215a87b8286bf78080bc03200ead5df017dd \
                        sha256  fa8750df366002d1fed8e4e67a6e1e15bcd164e82549c3e3ab491d966f48d705 \
                        size    399064
