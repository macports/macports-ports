# $Id$

PortSystem 1.0

name		afflib
version		3.0.4
revision	0
categories	security
maintainers	opendarwin.org@darkart.com
description	The Advanced Forensic Format
homepage	http://www.afflib.org/
platforms	darwin

long_description AFF(R) is an open and extensible file format designed \
			to store disk images and associated metadata.

master_sites	http://www.afflib.org/downloads/

checksums	md5	60730870a313056ae85aa489141714e7		\
		sha1	6b17e3297fb6825e3748a8f4aef6065b77a69291
##		rmd160	dd5a0bb35bf27c2c16794580a6e9861fffe78ccc


use_bzip2	no

depends_lib	port:libewf	\
		port:openssl	\
		port:readline	\
		port:zlib

configure.args	--enable-fuse=no	\
		--enable-s3=no		\
		--with-ssl=${prefix}	\
		--with-zlib=${prefix}

pre-destroot {
	## install things that don't get automatically installed (say, libs, headers...)
	## really the auto* stuff needs to be reworked, below is a band-aid
	xinstall -d ${destroot}/${prefix}/lib
	xinstall -m 0644 ${worksrcpath}/lib/.libs/libafflib.a ${destroot}/${prefix}/lib/
	xinstall -d ${destroot}/${prefix}/include/${name}/lib
	foreach header [glob ${worksrcpath}/lib/*.h] {
		xinstall -m 0644 $header ${destroot}${prefix}/include/${name}/lib
	}
	xinstall -m 0644 ${worksrcpath}/config.h ${destroot}${prefix}/include/${name}/
}


variant s3 description {Enable the use of Amazon's S3 service} {
	configure.args-append	--enable-s3=yes	\
				--with-curl=${prefix}/lib
	configure.args-delete	--enable-s3=no
	depends_lib-append	port:curl	\
				port:expat
}


## untested....
## variant fuse description {Access AFF data through FUSE} {
## 	configure.args-append	--enable-fuse=yes
## 	configure.args-delete	--enable-fuse=no
## 	'port lint' is silly about trailing whitespace in comments
## }
##

#
##EOF
