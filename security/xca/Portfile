# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem                  1.0
PortGroup                   github 1.0
PortGroup                   openssl 1.0
PortGroup                   qt5 1.0
PortGroup                   cmake   1.1

github.setup                chris2511 xca 2.9.0 RELEASE.
revision                    0
github.tarball_from         releases

categories                  security crypto
license                     Permissive
license_noconflict          openssl

maintainers                 nomaintainer

description                 X Certificate and Key management
long_description            XCA is a CA & PKI management tool that supports creating and managing X.509 certificates, \
                            certificate requests, RSA, DSA and EC private keys, Smartcards and CRLs.
homepage                    https://www.hohnstaedt.de/xca/

checksums                   rmd160  f665d1759ec3487e985e0d0ea1c835f81e630572 \
                            sha256  c8a956f6f0660356b725cb06ef5835dfb36526043a4f8c1cfe7674bb7bdd6c5c \
                            size    1954022

# Uses -fmacro-prefix-map which is only supported since GCC 8, LLVM Clang 10, and AppleClang 12
# clang: error: unknown argument: '-fmacro-prefix-map=/opt/local/var/macports/build/xca-c416d8d7/work/xca-2.9.0=.'
compiler.blacklist-append   {clang < 1200} {macports-clang-[0-9].*}

qt5.depends_component       qtdeclarative \
                            qtmacextras \
                            qtmultimedia \
                            qtsvg \
                            qttools \
                            qttranslations \
                            sqlite-plugin

variant RemoteSQL description { Add support MySQL/MariaDB and PostgreSQL databases } {
    qt5.depends_component   qtdeclarative \
                            qtmacextras \
                            qtmultimedia \
                            qtsvg \
                            qttools \
                            qttranslations \
                            sqlite-plugin \
                            mysql-plugin \
                            psql-plugin
}

depends_lib-append          port:libtool

configure.args-append       -DQTFIXEDVERSION=Qt5

openssl.branch              1.1

destroot {
    copy "${cmake.build_dir}/${name}.app" \
        ${destroot}${applications_dir}
}
