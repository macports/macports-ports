# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                skipfish
version             2.07b
license             Apache-2.0
categories          security
maintainers         snc openmaintainer
description         web application security scanner
long_description    A fully automated, active web application security \
                    reconnaissance tool.

homepage            http://code.google.com/p/skipfish/
platforms           darwin
depends_lib         port:openssl port:libidn port:zlib

master_sites        googlecode
extract.suffix      .tgz

checksums           rmd160  22c14a49eabd31a625d785eb6eb475f29ab4a876 \
                    sha256  eecfe8ecfd3dde191bae3dd31efde5d4c0d35fa5898d83865a4644031ae37d82

patchfiles          patch-config.h.diff
post-patch {
    reinplace s|@@SHARE@@|${prefix}/share/${name}/|g ${worksrcpath}/config.h
    reinplace s|-L/usr/local/lib/\ ||g ${worksrcpath}/Makefile
}

use_configure       no

build.args-append   CC=${configure.cc}
destroot {
    file mkdir ${destroot}${prefix}/share/${name}
    file copy ${worksrcpath}/skipfish ${destroot}${prefix}/bin/skipfish
    file copy ${worksrcpath}/assets/ ${destroot}${prefix}/share/${name}
}

notes \
"Having problems with your scans? Be sure to visit:\
http://code.google.com/p/skipfish/wiki/KnownIssues"
