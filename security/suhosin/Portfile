# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem		    1.0

name                suhosin
version             0.9.27
categories          security www
maintainers         snc openmaintainer
description         Advanced protection extension for PHP
homepage            http://www.hardended-php.net/suhosin/
long_description    Suhosin is an advanced protection system for PHP\
                    installations. It was designed to protect servers and users\
                    from known and unknown flaws in PHP applications and the\
                    PHP core. Suhosin is binary compatible to normal PHP\
                    installations, which means it is compatible to 3rd party\
                    binary extensions like ZendOptimizer.

platforms           darwin freebsd
depends_build       path:bin/phpize:php5

master_sites        http://download.suhosin.org/
extract.suffix      .tgz

checksums           md5 9aae02bc2d2bcf9b8bd97cd22f56a8b8\
                    sha1 3033bd3840c75786179cf8240f63d97b5f6accbf\
                    rmd160 46bf47daf0dab05359da62fde8a76ba7c43b3dbc

pre-configure {
    system "cd ${worksrcpath} && phpize"
}

use_parallel_build  yes

test.run            yes

destroot.destdir    INSTALL_ROOT=${destroot}
post-destroot {
    xinstall -m 644 ${worksrcpath}/suhosin.ini ${destroot}${prefix}/etc/suhosin.ini
}

livecheck.check     regex
livecheck.url       http://www.hardened-php.net/suhosin/download.html
livecheck.regex     ${name}-(\[0-9.\]+)\\.tgz
