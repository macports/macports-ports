# $Id$

PortSystem 1.0
name            zsh
version         4.2.6
categories      shells
maintainers     nox openmaintainer
description     Zsh is a UNIX command interpreter (shell)
long_description \
    Zsh is a UNIX command interpreter (shell) which of the standard     \
    shells most resembles the Korn shell (ksh), although it is not      \
    completely compatible. It includes enhancements of many types,      \
    notably in the command-line editor, options for customising its     \
    behaviour, filename globbing, features to make C-shell (csh) users  \
    feel more at home and extra features drawn from tcsh (another       \
    `custom' shell).

homepage        http://www.zsh.org
platforms       darwin
use_bzip2       yes
master_sites    http://www.zsh.org/pub/ \
                  ftp://ftp.zsh.org/zsh/ \
                  ftp://ftp.sterling.com/zsh/ \
                  ftp://ftp.fu-berlin.de/pub/unix/shells/zsh/ \
                  ftp://ftp.iij.ad.jp/pub/misc/zsh/ \
                  ftp://ftp.icm.edu.pl/vol/wojsyl/zsh/
checksums       md5 2cefebf742c190cbc611baded825db64
depends_lib     port:libiconv port:ncurses
configure.args  --mandir=${prefix}/share/man \
                --infodir=${prefix}/share/info \
                --enable-libs="-liconv -lncurses"

platform darwin 8 {
    post-configure {
        reinplace "s|#define HAVE_POLL 1|#undef HAVE_POLL|" ${worksrcpath}/config.h
    }
}

variant dp_completion {
    post-destroot   {
        file copy -force ${filespath}/_port \
          ${destroot}${prefix}/share/${name}/${version}/functions
    }   
}

