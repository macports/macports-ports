# $Id: Portfile,v 1.1 2005/12/19 19:33:21 mww Exp $

PortSystem 1.0

name			fish
version			1.21.11
categories		shells
platforms		darwin
maintainers		nomaintainer@macports.org
description		user friendly command line shell for UNIX-like operating systems
long_description	fish is a user friendly command line shell for UNIX-like \
			operating systems like Darwin.

homepage		http://roo.no-ip.org/fish/
master_sites	http://roo.no-ip.org/fish/files/${version}/
checksums		md5 522fba3b00939f9c36f2eac14ffc10a6
use_bzip2		yes

depends_build	bin:doxygen:doxygen

configure.args	--mandir=${prefix}/share/man

platform darwin 8 {
	configure.env CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
    # The following fixes a build bug in 1.21.11. Fixed for 1.21.12.
    # See http://comments.gmane.org/gmane.comp.shells.fish.user/672
    post-configure {
        reinplace "s|-D_XOPEN_SOURCE=600 -D_POSIX_C_SOURCE=200112L||" \
        "${worksrcpath}/Makefile"
    }
}

