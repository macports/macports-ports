# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           cmake 1.1
PortGroup           mpi 1.0
PortGroup           linear_algebra 1.0

name                gromacs
version             2021.3
revision            0
categories          science math
platforms           darwin
license             LGPL-2.1
maintainers         {dstrubbe @dstrubbe} openmaintainer
description         Molecular dynamics package designed for simulations of proteins, lipids, and nucleic acids.
long_description    GROMACS is a versatile package to perform molecular \
                    dynamics, i.e. simulate the Newtonian equations of motion for \
                    systems with hundreds to millions of particles. It is primarily \
                    designed for biochemical molecules like proteins and lipids that \
                    have a lot of complicated bonded interactions, but since GROMACS is \
                    extremely fast at calculating the nonbonded interactions (that \
                    usually dominate simulations) many groups are also using it for \
                    research on non-biological systems, e.g. polymers.
homepage            http://www.gromacs.org/
master_sites        http://ftp.gromacs.org/pub/gromacs
checksums           md5     1850870fbbfb228051ee0afc1c5ddeff \
                    size    37987972 \
                    rmd160  74adb5fc9e2fa461d4d7ff603d0fe7e08476da20 \
                    sha256  e109856ec444768dfbde41f3059e3123abdb8fe56ca33b1a83f31ed4575a1cc6

depends_lib-append  port:fftw-3-single port:zlib
configure.args-append  -DGMX_SIMD=SSE4.1 -DGMX_FFT_LIBRARY=fftw3 -DREGRESSIONTEST_DOWNLOAD=ON
test.run     yes
test.target  check

variant double description "build GROMACS in double precision (slower, and not normally useful)" {
    configure.args-append   -DGMX_DOUBLE:BOOL=ON
}

livecheck.type      regex
livecheck.url       http://ftp.gromacs.org/pub/gromacs/
livecheck.regex     ${name}-(\[0-9.\]+)${extract.suffix}
