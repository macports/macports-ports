--- makefile.orig	2005-07-27 17:22:01.000000000 -0700
+++ makefile	2017-09-10 00:15:00.000000000 -0700
@@ -18,7 +18,7 @@
 
 # CC should be set to the name of your favorite C compiler.
 
-CC = cc
+CC = /usr/bin/clang
 
 # CSWITCHES is a list of all switches passed to the C compiler.  I strongly
 #   recommend using the best level of optimization.  I also strongly
@@ -73,7 +73,7 @@
 #
 #   CSWITCHES = -O -DNO_TIMER -DLINUX -I/usr/X11R6/include -L/usr/X11R6/lib
 
-CSWITCHES = -O -DLINUX -I/usr/X11R6/include -L/usr/X11R6/lib
+CSWITCHES = -Os -arch x86_64 -arch i386
 
 # TRILIBDEFS is a list of definitions used to compile an object code version
 #   of Triangle (triangle.o) to be called by another program.  The file
@@ -97,6 +97,7 @@
 all: $(BIN)triangle $(BIN)showme
 
 trilibrary: $(BIN)triangle.o $(BIN)tricall
+	$(CC) -dynamiclib -L/opt/local/lib -Wl,-headerpad_max_install_names -install_name /opt/local/lib/libtriangle.dylib -o libtriangle.dylib triangle.o
 
 $(BIN)triangle: $(SRC)triangle.c
 	$(CC) $(CSWITCHES) -o $(BIN)triangle $(SRC)triangle.c -lm
