# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:filetype=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0
PortGroup           gnuradio 1.0

name                gr-iridium
license             GPL-3+
maintainers         {ra1nb0w @ra1nb0w} {michaelld @michaelld} openmaintainer
description         Iridium burst detector and demodulator.
long_description    ${description}

if {${subport} eq ${name}} {

    github.setup    muccc gr-iridium ef2eaa33ba3c410120729d3a619e09d708390056
    version         20220514-[string range ${github.version} 0 7]
    checksums       rmd160  ba4c74e48c312f3d196f3b481018d609e6e9bf1c \
                    sha256  74f95dc3d3e130989c7f5b1a05788b26e45b19db74f10db80e8c67d1604fa41d \
                    size    10535556
    revision        0

    conflicts gr37-iridium

}

subport gr37-iridium {

    name gr37-iridium

    github.setup    muccc gr-iridium 7d883ddb8870011b98645e4b1a9ed5bb4658bdbf
    version         20200715-[string range ${github.version} 0 7]
    checksums       rmd160  dfeace42d299913f7b0ebf70ffca1b443db0572f \
                    sha256  a41903406334db9e93800ec5ec066f5ebe889c0f49df6f513f82a666c79079ed \
                    size    143175
    revision        2
    git.branch      maint-3.7
    github.livecheck.branch maint-3.7

    conflicts gr-iridium

    patchfiles-append \
        gr3.7-cmake-boost.patch
}

post-destroot {
    # copy GNU Radio examples
    xinstall -m 755 -d ${destroot}${prefix}/share/gnuradio/examples/iridium
    file copy {*}[glob ${worksrcpath}/examples/*] \
        ${destroot}${prefix}/share/gnuradio/examples/iridium/
}
