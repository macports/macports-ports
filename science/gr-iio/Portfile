# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0
PortGroup           gnuradio 1.0

name                gr-iio
maintainers         {michaelld @michaelld} openmaintainer
description         Provides augmented functionality for GNU Radio: IIO device source
long_description    ${description}
license             GPL-3

if {${subport} eq ${name}} {

    version         20200403-45658994
    revision        8
    replaced_by     gr37-iio
    PortGroup       obsolete 1.0

}

subport gr37-iio {

    name            gr37-iio

    github.setup    analogdevicesinc gr-iio 9088ac791955c522ce1143fe10b85ded56ead0ee
    version         20190725-[string range ${github.version} 0 7]
    checksums       rmd160 15848e397eff6bd8782cf3927795cd51cf730794 \
                    sha256 0bcb973ba406bbf5149765b974e36137ffc515457f2e86e8cade389a334fc5d7 \
                    size   68707
    revision        5

    # patch CMake modules dir
    patchfiles-append \
        patch-fix_cmake_dirs.diff

    conflicts       gr-iio

}

depends_build-append \
    port:bison \
    port:flex

depends_lib-append \
    port:libad9361-iio \
    path:lib/libiio.dylib:libiio
