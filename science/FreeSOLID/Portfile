# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0

name                FreeSOLID
version             2.1.2
revision            3

categories          science
license             LGPL-2
maintainers         nomaintainer

description         Library for collision detection of three-dimensional objects.
long_description    FreeSOLID is a library for collision detection of three-dimensional \
                    objects undergoing rigid motion and deformation. FreeSOLID is designed \
                    to be used in interactive 3D graphics applications.

homepage            https://sourceforge.net/projects/freesolid/
master_sites        sourceforge:project/freesolid

checksums           rmd160  0f7134913dc5a74d7a8508f43d98e5d4006b3603 \
                    sha256  89edc6afdd9d60c8020b2b865b61558c86a8928dc6f1773b9f4708b5c28eb873

use_zip             yes

depends_lib         port:qhull

# Update config.guess and config.sub to be able to build on arm64.
depends_build-append    port:automake
post-patch {
    set automake_dirs [glob -directory ${prefix}/share automake-*]
    set automake_dir [lindex [lsort -command vercmp $automake_dirs] end]
    copy -force ${automake_dir}/config.guess ${automake_dir}/config.sub \
        ${worksrcpath}
}

patchfiles          configure.patch

post-extract {
    system "chmod +x ${worksrcpath}/configure"
}

configure.args      --infodir=${prefix}/share/info

livecheck.regex     ${name}-(\[0-9.\]+)${extract.suffix}
