From e6d9eb9c4b99e55e99b50c78266ac34b0f942eca Mon Sep 17 00:00:00 2001
From: Jarrett Johnson <jarrett.johnson@schrodinger.com>
Date: Fri, 26 Sep 2025 10:57:23 -0400
Subject: [PATCH] Port over Qt6 changes for APBS dialog

Fixes #469
---
 data/startup/apbs_gui/__init__.py | 15 +++++++--------
 1 file changed, 7 insertions(+), 8 deletions(-)

diff --git data/startup/apbs_gui/__init__.py.orig  data/startup/apbs_gui/__init__.py
index d7a242949..5b99259e6 100644
--- data/startup/apbs_gui/__init__.py.orig
+++ data/startup/apbs_gui/__init__.py
@@ -144,11 +144,11 @@ def get_cb_pseudocharge(resn, name):
             def result():
                 msgbox = QMessageBox(QMessageBox.Question, 'Continue?',
                     method + ' emmitted warnings, do you want to continue?',
-                    QMessageBox.Yes | QMessageBox.No , form._dialog)
+                    QMessageBox.StandardButton.Yes | QMessageBox.StandardButton.No , form._dialog)
                 msgbox.setDetailedText(warnings)
                 return msgbox.exec_()
 
-            if result == QMessageBox.No:
+            if result == QMessageBox.StandardButton.No:
                 raise SilentAbort
 
     if form.do_apbs.isChecked():
@@ -266,9 +266,9 @@ def run_finally(args):
             return
 
         quit_msg = "Finished with Success. Close the APBS dialog?"
-        if QMessageBox.Yes == QMessageBox.question(
-                form._dialog, 'Finished', quit_msg, QMessageBox.Yes,
-                QMessageBox.No):
+        if QMessageBox.StandardButton.Yes == QMessageBox.question(
+                form._dialog, 'Finished', quit_msg, QMessageBox.StandardButton.Yes,
+                QMessageBox.StandardButton.No):
             form._dialog.close()
 
     def handle_exception(e, stdout):
@@ -276,11 +276,10 @@ def handle_exception(e, stdout):
             return
 
         msg = str(e) or 'unknown error'
-        msgbox = QMessageBox(QMessageBox.Critical, 'Error',
-                             msg, QMessageBox.Close, form._dialog)
+        msgbox = QMessageBox(QMessageBox.Icon.Critical, 'Error', msg, QMessageBox.StandardButton.Close, form._dialog)
         if stdout.strip():
             msgbox.setDetailedText(stdout)
-        msgbox.exec_()
+        msgbox.exec()
 
     # "Abort" button callback
     def abort():
