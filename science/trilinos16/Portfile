PortSystem          1.0
PortGroup           cmake 1.1
PortGroup           github 1.0

name                trilinos16
version             16.1.0
categories          science
maintainers         {gmail.com:degnan.68k @bpdegnan} \
                    openmaintainer
license             BSD
description         Scientific computing libraries including solvers and preconditioners
long_description    \
    Trilinos is a collection of packages for scientific computing, including \
    solvers, preconditioners, nonlinear and optimization libraries, and interfaces \
    to third-party libraries. It is designed for flexibility and high performance.

#homepage            https://trilinos.github.io/
##note, the project used - instead of . for archive files
#distname            trilinos-release-16-1-0
#master_sites        https://github.com/trilinos/Trilinos/archive/refs/tags/
#extract.suffix      .tar.gz
##note, the mixed capitalization is causing fits with the default build system
#worksrcdir  Trilinos-trilinos-release-16-1-0

github.setup        trilinos Trilinos trilinos-release-16-1-0
github.tarball_from archive


checksums           rmd160 0464487926704ba40cc6f1b20fa631aec7512333 \
					sha256 e9651c88f581049457036cfc01b527a9d3903c257338eeeab942befd7452f23a \
                    size 197260161

depends_build-append port:pkgconfig

depends_lib-append  port:gcc13 \
                    port:OpenBLAS \
                    port:SuiteSparse \
                    port:netcdf

configure.args-append \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=${prefix} \
    -DCMAKE_Fortran_COMPILER=${prefix}/bin/gfortran-mp-13 \
    -DCMAKE_CXX_STANDARD=17 \
    -DTrilinos_ENABLE_ALL_OPTIONAL_PACKAGES=ON \
    -DTrilinos_ALLOW_DEPRECATED_PACKAGES=ON \
    -DTrilinos_ENABLE_ALL_PACKAGES=OFF \
    -DTrilinos_ENABLE_Epetra=ON \
    -DTrilinos_ENABLE_EpetraExt=ON \
    -DTrilinos_ENABLE_Teuchos=ON \
    -DTrilinos_ENABLE_AztecOO=ON \
    -DTrilinos_ENABLE_Ifpack=ON \
    -DTrilinos_ENABLE_Belos=ON \
    -DTrilinos_ENABLE_Amesos=ON \
    -DAmesos_ENABLE_KLU=ON \
    -DEpetraExt_BUILD_BTF=ON \
    -DEpetraExt_BUILD_EXPERIMENTAL=ON \
    -DEpetraExt_BUILD_GRAPH_REORDERINGS=ON \
    -DTrilinos_ENABLE_COMPLEX_DOUBLE=ON \
    -DTrilinos_ENABLE_Sacado=ON \
    -DTrilinos_ENABLE_NOX=ON \
    -DTrilinos_ENABLE_TrilinosCouplings=ON \
    -DNOX_ENABLE_LOCA=ON \
    -DTPL_ENABLE_BLAS=ON \
    -DTPL_ENABLE_LAPACK=ON \
    -DTPL_ENABLE_SuiteSparse=ON \
    -DTPL_ENABLE_Netcdf=ON \
    -DTPL_Netcdf_INCLUDE_DIRS=${prefix}/include \
    -DTPL_Netcdf_LIBRARIES=${prefix}/lib/libnetcdf.dylib \
    -DTrilinos_INSTALL_CMAKE_DIR=lib/cmake/Trilinos \
    -DTPL_ENABLE_AMD=ON \
    -DAMD_INCLUDE_DIRS=${prefix}/include/suitesparse \
    -DAMD_LIBRARY_NAMES=amd \
    -DAMD_LIBRARY_DIRS=${prefix}/lib \
    -DBUILD_SHARED_LIBS=ON

