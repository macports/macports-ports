# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0

name                clipper
version             2.1.20180802
revision            0

categories          science
license             LGPL-2.1
maintainers         {reneeotten @reneeotten} openmaintainer

description         Crystallographic automation and complex data manipulation libraries
long_description    {*}${description}

homepage            https://www.ysbl.york.ac.uk/~cowtan/clipper/clipper.html

master_sites        https://www2.mrc-lmb.cam.ac.uk/personal/pemsley/coot/dependencies/

checksums           rmd160  28e871b92a0c8ceb5380492c0afbe45a7622ca7f \
                    sha256  7c7774f224b59458e0faa104d209da906c129523fa737e81eb3b99ec772b81e0 \
                    size    4238748

worksrcdir          clipper-2.1

post-patch {
    reinplace "s|libccp4c|ccp4c|g" ${worksrcpath}/configure
}

depends_build-append \
                    path:bin/pkg-config:pkgconfig

depends_lib-append  port:fftw-single \
                    path:lib/pkgconfig/glib-2.0.pc:glib2 \
                    port:libccp4 \
                    port:mmdb2

configure.args-append \
                    --disable-silent-rules \
                    --enable-shared \
                    --disable-static \
                    --enable-mmdb \
                    --enable-ccp4 \
                    --enable-cif \
                    --enable-minimol \
                    --enable-cns
