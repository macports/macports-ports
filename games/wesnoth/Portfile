# $Id$

PortSystem 1.0

name		wesnoth
version		1.4.4
categories	games
platforms	darwin
maintainers	nomaintainer
description	A fantasy turn-based strategy game
long_description	Battle for Wesnoth is a fantasy turn-based strategy \
			game. Battle for control of villages, using variety of \
			units which have advantages and disadvantages in \
			different types of terrains and against different \
			types of attacks. Units gain experience and advance \
			levels, and are carried over from one scenario to the \
			next campaign.
checksums	md5     b2260808e94eba12aa7ceaa40fa0ee4d \
		sha1    c903160cdf1ecbfef6e668772ad5fe15f599ac7d \
		rmd160  d32161d67002dc12197a6a8667dfb734bb208157
homepage	http://www.wesnoth.org/
master_sites	sourceforge
use_bzip2	yes
use_parallel_build	yes
depends_lib	lib:libX11.6:XFree86 \
		port:boost \
		port:libsdl \
		port:libsdl_image \
		port:libsdl_mixer \
		port:libsdl_ttf \
		port:libsdl_net \
		port:libiconv \
		port:freetype \
		port:fribidi \
		port:gettext \
		port:zlib

configure.args	--with-freetype-prefix=${prefix} \
				--with-libiconv-prefix=${prefix} \
				--disable-desktop-entry \
				--disable-sdltest \
				--disable-python \
				--disable-server

pre-configure {
	configure.args-append \
				--with-boost=${prefix}/include/[strsed [file readlink ${prefix}/include/boost] {g|/boost||}]
}

# Can be removed once MacPorts 1.7.0 is released
if {![info exists applications_dir]} {
    set applications_dir /Applications/MacPorts
}

platform macosx {
	pre-destroot	{
		xinstall -d ${destroot}${applications_dir}/Wesnoth.app/Contents/MacOS
		ln -sf ${prefix}/bin/wesnoth \
			${destroot}${applications_dir}/Wesnoth.app/Contents/MacOS/Wesnoth
	}
}

livecheck.regex	<title>${name}.* ${name}-(\[0-9\]+\\.\[0-9\]*\[02468\](\\.\[0-9\]+)*) released.*</title>
