# $Id: Portfile,v 1.4 2004/10/27 07:50:43 mww Exp $

PortSystem 1.0

name			blobwars
version			0.96
categories		games
platforms		darwin
maintainers		mww@opendarwin.org
description		jump and run game featuring a Blob as main character
long_description	In Blob Wars : Metal Blob Solid, you take on the role \
				of a fearless Blob agent, Bob. Bob's mission is to \
				infiltrate the various enemy bases around the Blobs' \
				homeworld and rescue as many MIAs as possible. But \
				standing in his way are many vicious aliens, other \
				Blobs who have been assimilated and the evil alien \
				leader, Galdov.

homepage		http://www.parallelrealities.co.uk/blobWars.php
master_sites	http://www.opendarwin.org/~mww/files
checksums		md5 cdfe1231a9f6966c0d5189c1706000fe
use_bzip2		yes
patchfiles	patch-makefile.diff

depends_lib	bin:sdl-config:libsdl \
		lib:libSDL_image:libsdl_image \
		lib:libSDL_ttf:libsdl_ttf \
		lib:libSDL_mixer:libsdl_mixer \
		lib:libzzip:libzzip

use_configure	no

build.args	PREFIX=${prefix}
build.env	CFLAGS=-I${prefix}/include \
			LDFLAGS=-bind_at_load

variant darwin {
	pre-destroot	{
		xinstall -m 755 -d ${destroot}/Applications/DarwinPorts/BlobWars.app/Contents/MacOS
		system "ln -s ${prefix}/bin/blobwars \
			${destroot}/Applications/DarwinPorts/BlobWars.app/Contents/MacOS/BlobWars"
	}
}
destroot.destdir	PREFIX=${destroot}${prefix}
post-destroot	{
	file delete -force ${destroot}${prefix}/share/applnk \
		${destroot}${prefix}/share/gnome ${destroot}${prefix}/share/icons
}
