# $Id: Portfile,v 1.8 2003/03/03 06:31:23 mij Exp $

PortSystem 1.0

name		xracer
version		0.96.9
description	WipeOut clone for OpenGL and X11

long_description XRacer is a Wipeout clone. At the moment it is incomplete, but work is undergoing

maintainers	jkh@opendarwin.org
categories	x11 games
platforms	darwin
master_sites	http://xracer.annexia.org/files/
checksums	${distname}${extract.sufx} md5 8daee4a6f7864f37203b4f8db25dfc2d xracer-data.tar.gz md5 167c3e0688ec7a880ccd8fabac48252f

prefix		${x11prefix}
distfiles	${distname}${extract.sufx} xracer-data.tar.gz
patchfiles	patch-configure patch-joystick.c patch-src-Makefile.in \
		patch-track.c patch-craft.c

depends_lib	lib:libdl.1:dlcompat lib:libjpeg.9:jpeg lib:libglut.3:glut lib:libX11.6:XFree86

configure.env	CPPFLAGS="-I${prefix}/include" LIBS="-L${prefix}/lib"
configure.post_args   --with-jpeg-libs=/opt/local/lib --with-jpeg-inc=/opt/local/include --disable-nls ppc-netbsd

pre-build {
	system "cp /usr/bin/glibtool ${worksrcpath}/libtool"
}

post-install {
	system "rm -rf ${destroot}${prefix}/share/xracer/doc"
	system "install -d ${destroot}${prefix}/share/doc"
	system "mv ${destroot}${prefix}/doc ${destroot}${prefix}/share/xracer/doc"
}

