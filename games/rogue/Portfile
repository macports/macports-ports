# $Id$

PortSystem       1.0
name		     rogue
version		     5.4.2
categories	     games
maintainers	     aschenke@macports.org
description	     Rogue is a popular dungeon exploring adventure game
long_description Rogue is a popular dungeon exploring adventure game. It is one of the earliest \
                 (early 1980s) dungeon crawl games, and is an ancestor of games like Diablo. Version \
                 5.4 is the last iteration of the original Rogue by Toy, Arnold, and Wichman developed \
                 for Unix.
homepage         http://rogue.rogueforge.net/
master_sites     sourceforge
master_sites.mirror_subdir  roguelike
checksums	     md5 bd656cb017a579eba835a0ee445a0a32
distname         ${name}${version}-src
worksrcdir       

depends_lib      port:ncurses

configure        { 
                   reinplace "s|CFLAGS= \$(COPTS) \$(ROPTS)|CFLAGS= \$(COPTS) \$(ROPTS) \
                    -I${prefix}/include -L${prefix}/lib|" ${worksrcpath}/Makefile
                   
                   reinplace "s|-DALLSCORES -DSCOREFILE||" ${worksrcpath}/Makefile
                   
                   reinplace "s|/usr/games/rogue|rogue|" ${worksrcpath}/rogue.6
                   reinplace "s|/usr/games/lib/||" ${worksrcpath}/rogue.6                   
                 }

build.target     
build.cmd        { make }

destroot         {
                    cd ${worksrcpath}
                    xinstall -m 755 -c rogue54 ${destroot}${prefix}/bin/rogue
                    xinstall -m 644 -c rogue.6 ${destroot}${prefix}/share/man/man6/
                 }
