# $Id: Portfile,v 1.1 2003/05/22 22:18:00 ranger Exp $

PortSystem 1.0
name		vnc
version		3.3.7
revision	0
categories	x11
maintainers	ranger@befunk.com
description	Remote display system for X11 applications
long_description	\
		creates a virtual X11 windowing environment that can be viewed \
		not only on the machine where it is running, but from anywhere \
		on the Internet and from a wide variety of machine architectures.

homepage	http://www.uk.research.att.com/vnc/
platforms	darwin
distname	${name}-${version}-unixsrc
master_sites	\
	http://www.realvnc.com/dist/
checksums	md5 511ffbc8ed8d9df82e7c67852164728c
depends_lib	lib:libX11.6:XFree86

patch {
	system "cd '${worksrcpath}' && sed -e 's#@PREFIX@#${prefix}#g' '${portpath}/${filedir}/patch-vnc.darwin' | patch -p1"
}

configure.env	CPPFLAGS="-no-cpp-precomp"
post-build {
	system "cd '${worksrcpath}/Xvnc' && make World"
}
pre-install {
	system "mkdir -p ${destroot}${prefix}/bin"
	system "mkdir -p ${destroot}${prefix}/man/man1"
	system "mkdir -p ${destroot}${prefix}/share/vnc/classes"
}
install {
	system "cd '${worksrcpath}' && ./vncinstall '${destroot}${prefix}/bin' '${destroot}${prefix}/man'"
	system "install -c -m 644 ${worksrcpath}/classes/* '${destroot}${prefix}/share/vnc/classes/'"
}
