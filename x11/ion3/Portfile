# $Id$

PortSystem        1.0

name              ion3
version           3ds-20070318
categories        x11 x11-wm
maintainers       pmq@macports.org

description       A tiling window manager for keyboard users
long_description  Ion is a tiling tabbed window manager designed \
                  with keyboard users in mind. It tries to address \
                  the navigation problem by dividing the screen into \
		  mutually non-overlapping frames. As in PWM, the \
		  frames may have multiple clients attached.

homepage          http://modeemi.cs.tut.fi/~tuomov/ion/
master_sites      http://iki.fi/~tuomov/dl/
distname          ion-${version}
checksums         sha1 f352a1c7f6f465478141d538b2a4c3f3e81a4f30 \
		  rmd160 a7cc9baea3624b0ed840fdc82fc5db2ac1018d9a

depends_lib       lib:libX11.6:XFree86 lib:libXext.6:XFree86 \
		  port:lua port:gettext

livecheck.url	  "http://www.freebsd.org/cgi/ports.cgi?query=ion-3ds&stype=all"
livecheck.regex	  ">ion-(.*?)<"

configure {
    # don't put these in a patch because it changes w/ every release
    reinplace "s|/usr/local|${prefix}|g" ${worksrcpath}/system.mk
    reinplace "s|/var/cache/ion3|${prefix}/var/cache/ion3|g" ${worksrcpath}/system.mk
    reinplace "s|#PRELOAD_MODULES|PRELOAD_MODULES|g" ${worksrcpath}/system.mk
    reinplace "s|#HAS_SYSTEM_ASPRINTF|HAS_SYSTEM_ASPRINTF|g" ${worksrcpath}/system.mk
    reinplace "s|#EXTRA_LIBS|EXTRA_LIBS|g" ${worksrcpath}/system.mk
}

build.env         INCLUDES="-I${prefix}/include" LIBS="-L${prefix}/lib"
destroot.destdir  PREFIX=${destroot}${prefix}
