# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0
PortGroup               github 1.0
PortGroup               legacysupport 1.0
PortGroup               compiler_blacklist_versions 1.0

github.setup            bbidulock blackboxwm 0.75
revision                0
github.tarball_from     releases

categories              x11 x11-wm
license                 MIT
maintainers             nomaintainer
platforms               darwin

name                    blackbox
distname                ${name}-${version}
use_lzip                yes
checksums               rmd160  cc1362a45e292dccfbcaf03bc0a508a27bf64980 \
                        sha256  197e7e8a5616f1a3be77b37f5dafa6c72e6621c779ba87f15d7463c2a71e7f6b \
                        size    562326

description             blackbox is a fast, light window manager
long_description        blackbox is that fast, light window manager you \
                        have been looking for without all those annoying \
                        library dependancies. If you have a C++ compiler \
                        and the X Window System you can compile and use it. \
                        This is a maintained fork of the original blackbox CVS \
                        that is on Sourceforge. It includes is all changes \
                        made on the official blackbox CVS repository on branch \
                        blackbox-0_70_2cvs, as well as patches collected from \
                        pdl-linux, Debian, the blackbox bug list, other \
                        GitHub forks. It also includes enhanced EWMH/ICCCM compliance.

depends_build-append    port:pkgconfig \
                        port:asciidoc \
                        port:gsed

depends_lib-append      port:Xft2 \
                        port:xorg-libXext \
                        port:libiconv \
                        port:gettext

# error: use of undeclared identifier 'strtoul'
compiler.blacklist-append { clang < 802 }

# error: expected primary-expression before ‘.’ token
compiler.blacklist-append *gcc-3.* *gcc-4.*

configure.args          --disable-dependency-tracking \
                        --disable-silent-rules \
                        --enable-shared \
                        --disable-rpath \
                        SED=${prefix}/bin/gsed

configure.cxxflags-append -Wno-format-security \
                          -std=c++98

configure.ldflags-append  -lintl

patchfiles              patch-blackbox-menu-advance.diff

notes "
new blackbox users may find this setup guide useful:
https://ubuntuforums.org/showthread.php?t=125084

and how to change windowmanagers:
https://fanf.livejournal.com/142372.html

"
