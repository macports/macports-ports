# $Id$

PortSystem          1.0
name                font-bitstream-100dpi
version             1.0.0
categories          x11 x11-font graphics
maintainers         blb openmaintainer
description         X.org Bitstream 100 DPI font
long_description    ${description}

platforms           darwin

homepage            http://www.x.org/
master_sites        ${homepage}pub/individual/font/
use_bzip2           yes

checksums           md5     173352ddec3d26e2b91df1edcf1ae85b \
                    sha1    6aa6ccc3d7a28a0ae3618613fc7b78d4b1e9b4d7 \
                    rmd160  ce7304b7d65d3bec9a75eafd07106858d06ced85

depends_build       port:pkgconfig bin:bdftopcf:bdftopcf port:xorg-font-util \
                    port:mkfontscale port:mkfontdir bin:gzip:gzip

set myfontdir       ${prefix}/share/fonts/100dpi

configure.args      --with-fontdir=${myfontdir}

post-destroot {
   foreach fontsFile {fonts.alias fonts.dir fonts.list fonts.scale} {
      if {[file exists ${destroot}${myfontdir}/${fontsFile}]} {
         delete ${destroot}${myfontdir}/${fontsFile}
      }
   }
}

post-activate {
   system "mkfontscale ${myfontdir}"
   system "mkfontdir ${myfontdir}"
}

# This should be done when uninstalling, but deactivate doesn't currently work
#post-deactivate {
#   system "mkfontscale ${myfontdir}"
#   system "mkfontdir ${myfontdir}"
#}

livecheck.check     regex
livecheck.regex     ${name}-(\[\\d.\]+)${extract.suffix}
livecheck.url       ${master_sites}

