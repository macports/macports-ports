# $Id$

PortSystem      1.0

name            tk
version         8.5.0
categories      x11
maintainers     mww openmaintainer
description     Tcl Tool Kit
homepage        http://www.tcl.tk/
long_description \
  This is Tk version ${version}, a GUI toolkit for Tcl. The best way to get \
  started with Tcl is to read ``Tcl and the Tk Toolkit'' by John K.         \
  Ousterhout, Addison-Wesley, ISBN 0-201-63337-X.

platforms       darwin
master_sites    sourceforge:tcl
dist_subdir     tcltk
distname        ${name}${version}-src
worksrcdir      ${name}${version}/unix
checksums \
  ${distname}${extract.suffix} \
    md5 bc217c45ed6b2f5b8d3120df63fa13bd \
    sha1 289ca08c53b4719b03ae47a379b4b5a2f4d404ec \
    rmd160 d2bcabd3a125f60842c322839a20bbdc074d0afc
# suck in Tcl as well so we can use it internally.
distfiles-append    tcl${version}-src${extract.suffix}
checksums-append \
  tcl${version}-src${extract.suffix} \
    md5 d890c505465411b25050b6cd95971d2c \
    sha1 d636d29f213533e8d32eb21f7cd7f8c7a5d76565 \
    rmd160 f398a26ea7c8937507049a927f918d18c906f6e5

# force usage of DP Tcl
depends_lib         port:tcl lib:libX11.6:XFree86

post-patch {
    reinplace s|@TCL_SRC_DIR@|${worksrcpath}/../../tcl${version}/|g ${worksrcpath}/Makefile.in
}

configure.args      --mandir=${prefix}/share/man --with-tcl=${prefix}/lib
configure.cppflags  "-I${workpath}/tcl${version}/generic -I${prefix}/include"

destroot.destdir    INSTALL_ROOT=${destroot}
post-destroot {
    ln -s ${prefix}/bin/wish8.5 ${destroot}${prefix}/bin/wish
    ln -s ${prefix}/lib/libtk8.5.dylib ${destroot}${prefix}/lib/libtk.dylib
}

#variant quartz {
#    configure.args-append   --enable-aqua
#    post-destroot {
#        delete ${destroot}${prefix}/include/X11
#    }
#}

livecheck.check	freshmeat
livecheck.name	tcltk
livecheck.version	8.5
