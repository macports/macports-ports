# $Id: Portfile,v 1.5 2004/06/03 21:30:06 mij Exp $

PortSystem 1.0
name		gtk1
version		1.2.10
revision	6
categories	x11
maintainers	mij@opendarwin.org
description	Gimp Tool Kit
homepage	http://www.gtk.org/
platforms	darwin freebsd sunos

long_description This is GTK+ version 1.2.10. GTK+, which stands for \
		 the Gimp ToolKit, is a library for creating graphical \
		 user interfaces for the X Window System.

master_sites	ftp://ftp.gtk.org/pub/gtk/v1.2/ \
		opendarwin::lt

distname	gtk+-${portversion}
set filename	gtk+-${portversion}${extract.suffix}
distfiles	${filename} ltconfig13:lt ltmain13:lt
checksums	gtk+-1.2.10.tar.gz md5 4d5cb2fc7fb7830e4af9747a36bfce20 \
		ltconfig13 md5 ea53f42a550c9f9e653758a8ed91574e \
		ltmain13 md5 e094ae92724c4015dbab97de151c2525
extract.only	${filename}

depends_lib	lib:libintl.3:gettext lib:libglib.1:glib1 lib:libX11.6:XFree86

patchfiles	patch-config.guess patch-config.sub

configure.env	LIBS="-L${prefix}/lib" CFLAGS="-I${prefix}/include" \
		CPPFLAGS="-I${prefix}/include"

configure.args	--disable-shm --with-locale --mandir=${prefix}/share/man \
		--infodir=${prefix}/share/info

post-patch	{ system "cp ${distpath}/ltconfig13 ${worksrcpath}/ltconfig"
		  system "cp ${distpath}/ltmain13 ${worksrcpath}/ltmain.sh" }

post-destroot	{ system "ln -sf libgdk-1.2.0.9.1.dylib \
		    ${destroot}${prefix}/lib/libgdk.1.dylib"  
		  system "ln -sf libgtk-1.2.0.9.1.dylib \
		    ${destroot}${prefix}/lib/libgtk.1.dylib" }

variant sunos {
	depends_lib-delete	lib:libX11.6:XFree86
	depends_lib-append	lib:libX11.4:XFree86
	configure.args-delete	--disable-shm --with-locale
	configure.args-append	--disable-nls 
}
