PortSystem 1.0
name		gtk2
version		2.0.9
categories	x11
maintainers	mij@opendarwin.org
description	Gimp ToolKit version 2
platforms	darwin
master_sites	ftp://ftp.gnome.org/pub/gnome/sources/gtk+/2.0/

distname	gtk+-${portversion}
checksums	md5 9827bca97fc09ff62b75579614dcfeb2

use_bzip2	yes

depends_lib	lib:libintl.1:gettext lib:libglib.2:glib2 \
		lib:libjpeg.9:jpeg lib:libtiff.3:tiff lib:libpng.3:libpng \
		lib:libungif.4:libungif lib:libatk.1:atk \
		lib:libpango.1:pango lib:libX11.6:XFree86

patchfiles	patch-configure patch-demos-gtk-demo-main.c \
		patch-ltmain.sh patch-gdk-x11-gdkdrawable-x11.c

configure.env	LDFLAGS="-L${prefix}/lib" CPPFLAGS="-I${prefix}/include \
		-no-cpp-precomp" CFLAGS="-O3 -funroll-loops \
		-fstrict-aliasing"
configure.args	--disable-shm
build.args	CFLAGS+="-I/usr/X11R6/include"

post-install	{ system "ln -fs libgtk-x11-2.0.0.0.9.dylib \
		    ${prefix}/lib/libgtk.2.dylib"
		  system "ln -fs libgdk-x11-2.0.0.0.9.dylib \
		    ${prefix}/lib/libgdk.2.dylib" }

include		contents
