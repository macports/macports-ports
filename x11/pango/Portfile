# $Id: Portfile,v 1.26 2004/09/19 18:00:26 olegb Exp $

PortSystem 1.0
name		pango
version		1.6.0
categories	x11
maintainers	mij@opendarwin.org
description	Framework for the layout and rendering of i18n text
platforms	darwin

long_description The goal of the Pango project is to provide an \
		 open-source framework for the layout and rendering \
		 of internationalized text.

master_sites	gnome:sources/pango/1.6/
checksums	md5 6c732bbc5fba5a0f1f8086e8aa4f490d

use_bzip2	yes

depends_lib	lib:libglib.2:glib2 lib:libX11.6:XFree86 \
		lib:libXft.2.1.2:Xft2

configure.env	CPPFLAGS="-no-cpp-precomp" \
		LDFLAGS="-no-undefined -bind_at_load"

configure.args	--mandir=${prefix}/share/man

post-destroot	{
		  system "ln -fs libpango-1.0.0.600.0.dylib \
		    ${destroot}${prefix}/lib/libpango.1.dylib"
		  system "ln -fs libpangox-1.0.0.600.0.dylib \
		    ${destroot}${prefix}/lib/libpangox.1.dylib"
		  system "ln -fs libpangoft2-1.0.0.600.0.dylib \
		    ${destroot}${prefix}/lib/libpangoft2.1.dylib"
		  system "install -o root -m 755 -d \
		    ${destroot}${prefix}/etc/pango"
		  system "cp ${worksrcpath}/examples/pangorc \
		    ${destroot}${prefix}/etc/pango"
		  system "cp ${worksrcpath}/examples/pangox.aliases \
		    ${destroot}${prefix}/etc/pango" 
		  reinplace "s|\\./|${prefix}/etc/pango/|g" \
		    ${destroot}/${prefix}/etc/pango/pangorc
		  reinplace "s|\\./|${prefix}/etc/pango/|g" \
		    ${destroot}/${prefix}/etc/pango/pangox.aliases
		  system "env LANG=C DYLD_LIBRARY_PATH=${destroot}${prefix}/lib \
		    ${destroot}${prefix}/bin/pango-querymodules ${destroot}${prefix}/lib/pango/1.4.0/modules/* >${destroot}${prefix}/etc/pango/pango.modules"
		  reinplace s|${destroot}||g ${destroot}${prefix}/etc/pango/pango.modules
}
