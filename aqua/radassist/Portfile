# $Id: Portfile,v 1.1 2004/01/27 03:49:47 rshaw Exp $
PortSystem 1.0

name			radassist
version			0.9.5-beta
categories		aqua
maintainers		rshaw@opendarwin.org
description		An Aqua wrapper for the radmind command-line clients
long_description	The Radmind Assistant provides a point-and-click \
					interface to create radmind loadsets and update \
					radmind clients.
platforms		darwin
homepage		http://rsug.itd.umich.edu/software/radmind/
fetch.type		cvs
cvs.root		:pserver:anonymous@rsug.itd.umich.edu:/usr/local/src/cvsroot
cvs.password	RSUG
cvs.module		${name}
cvs.tag			${name}-[strsed $version {g/[.]/-/}]
distname		${name}

depends_run		bin:${prefix}/sbin/radmind:radmind

post-patch		{ cd ${worksrcpath}
				  reinplace "s|:/usr/local/bin|:${prefix}/bin&|" \
					  600.radmind \
					  Build.hook \
					  LI00CheckUsername.hook \
					  LI10SetupUserEnvironment.hook \
					  LO10CreateTemplateHomeCopy.hook \
					  LO20UserAccounting.hook \
					  login.hook \
					  logout.hook \
					  masterlogin.hook \
					  masterlogout.hook \
					  radmind.defaults \
					  radmind.hook
				  reinplace "s|:/usr/local/sbin|:${prefix}/sbin&|" \
					  masterlogin.hook \
					  masterlogout.hook
				  reinplace "s|/usr/local|${prefix}|g" \
					  authtools.c \
					  RadmindServer \
					  RCMStepController.m \
					  rmauthexec.c \
					  rsm/authtools.c \
					  rsm/rsmauthtool.c \
					  rte/RXTranscript.m }

use_configure	no

build.target	install

destroot		{ cd ${worksrcpath}
				  set path ${destroot}/Applications/DarwinPorts
				  xinstall -d -m 0755 ${path}
				  system "ditto -v -rsrcFork 'tmp/Radmind Assistant.app' \
					  '${path}/Radmind Assistant.app'" }

