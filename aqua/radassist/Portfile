# $Id: Portfile,v 1.5 2004/11/07 00:36:44 jkh Exp $
PortSystem		1.0

name			radassist
version			0.9.6rc3
revision		1
categories		aqua
maintainers		rshaw@opendarwin.org
description		An Aqua wrapper for the radmind command-line clients
long_description	The Radmind Assistant provides a point-and-click \
					interface to create radmind loadsets and update \
					radmind clients.
platforms		darwin
homepage		http://rsug.itd.umich.edu/software/radmind
master_sites	${homepage}/files/
checksums		md5 f7e280de763ef0eef5f7d30815ae7182

depends_lib		path:${prefix}/sbin/radmind:radmind \
				path:/Applications/DarwinPorts/iHook.app:ihook

post-patch {
	file copy ${filespath}/patch-darwinports.in ${workpath}/patch-darwinports
	reinplace "s|@PREFIX@|${prefix}|g" ${workpath}/patch-darwinports
	system "[command patch] < \"${workpath}/patch-darwinports\""
}

use_configure	no

build.target	install

destroot {
	cd ${worksrcpath}
	set appPath ${destroot}/Applications/DarwinPorts
	xinstall -d -m 0755 ${appPath}
	set appName "Radmind Assistant"
	system "cp -R 'tmp/${appName}.app' '${appPath}/${appName}.app'"
	xinstall -d -m 0755 ${destroot}${prefix}/var/radmind/server_file_backup
	destroot.keepdirs ${destroot}${prefix}/var/radmind/server_file_backup
}

