# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0

PortGroup           github 1.0
PortGroup           xcode 1.0
PortGroup           xcodeversion 1.0

github.setup        yujitach MenuMeters 2.0.7
categories          aqua sysutils
maintainers         {stevenmyint.com:git @myint} openmaintainer
license             GPL-2

description         Set of CPU, memory, disk, and network monitoring tools
long_description    The MenuMeters monitors are true SystemUIServer plugins     \
                    (also known as Menu Extras). This means they can be reordered   \
                    using command-drag and remember their positions in the menubar  \
                    across logins and restarts.

checksums           rmd160  d41810a5d34656f96d2343ccb73c7a1f043fb68e \
                    sha256  585023277222064fe2889b9dc34fb4e671592f6b9e7c933b50eb94fe4999dce9 \
                    size    1218059

patchfiles          patch-MenuMeters.xcodeproj-project.pbxproj.diff

xcode.configuration Release
xcode.scheme        MenuMeters
destroot.pre_args   -derivedDataPath ./DerivedData
build.pre_args      -derivedDataPath ./DerivedData

destroot    {
    file copy ${worksrcpath}/build/Release/MenuMeters.app ${destroot}${applications_dir}
}

minimum_xcodeversions {14 8.0}

pre-fetch {
    if {${os.subplatform} eq "macosx" && [vercmp ${macosx_version} 10.10] < 0} {
        ui_error "${name} ${version} requires OS X 10.10 or greater."
        return -code error "incompatible macOS version"
    }
}

notes "
Support for the System Preferences panel has been removed from\
MenuMeters. It is now a standalone application installed to\
${applications_dir}. You may want to 'killall MenuMetersApp' after\
installation and before opening the new version."
