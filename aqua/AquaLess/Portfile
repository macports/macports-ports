# $Id$

PortSystem		1.0
PortGroup		xcode 1.0

name			AquaLess
version			1.5
categories		aqua sysutils
platforms		darwin
maintainers		nox
homepage		http://aqualess.sourceforge.net/
description		Cocoa pager similar to less

long_description	${description}
			
			
master_sites		sourceforge:aqualess
checksums		md5 7e3d04993dc09c31f1daf09dbb5e2677 \
				sha1 754681d9bd3e85586d2e50a9697c2ca0dc3b4750 \
				rmd160 7a574fff89463fa57e0f1a0e49ad790be2e00b93

distname		${name}-${version}-src

xcode.target			${name}
xcode.destroot.settings	SKIP_INSTALL=NO

post-patch {
	reinplace -E "/@/s|/usr|${prefix}|" \
		${worksrcpath}/ToolInstaller.m

	reinplace -E "/(MACOSX_DEPLOYMENT_TARGET|SDKROOT)_ppc =/d" \
		${worksrcpath}/${name}.xcodeproj/project.pbxproj
}

# Dummy configure to enable universal variant.
use_configure	yes
configure		{}

if {! [variant_isset universal]} {
	set arch ${os.arch}
	if {! [string compare ${arch} powerpc]} {
		set arch ppc
	}

	xcode.build.settings-append		ARCHS=${arch}
	xcode.destroot.settings-append	ARCHS=${arch}
}

post-destroot {
	delete ${destroot}/Applications/MacPorts/aless
	xinstall -m 0755 ${destroot}/Applications/MacPorts/${name}.app/Contents/Resources/aless \
		${destroot}${prefix}/bin
}

livecheck.distname ${name}

