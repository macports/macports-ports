--- macosx/KeychainSupport.m
+++ macosx/KeychainSupport.m
@@ -24,6 +24,9 @@
 
 #define GPG_SERVICE_NAME "GnuPG"
 
+#ifndef errSecUserCanceled
+#define errSecUserCanceled -128
+#endif
 
 BOOL storePassphraseInKeychain(NSString *fingerprint, NSString *passphrase, NSString *label) {
 	OSStatus status;
--- macosx/PinentryMac.m
+++ macosx/PinentryMac.m
@@ -23,6 +23,9 @@
 
 #define localized(x) [[NSBundle mainBundle] localizedStringForKey:x value:nil table:nil]
 
+#ifndef NSAppKitVersionNumber10_8
+#define NSAppKitVersionNumber10_8 1187
+#endif
 
 @interface PinentryMac ()
 @property (nonatomic, strong) IBOutlet NSWindow *window;
