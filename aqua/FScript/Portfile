# -*- coding: utf-8; mode: tcl; tab-width: 4; truncate-lines: t; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem              1.0
PortGroup               xcode 1.0

name                    FScript
version                 2.0.1
categories              aqua lang
platforms               darwin
license                 BSD
maintainers             nomaintainer

description             Open-source interactive Cocoa scripting environment
long_description        F-Script is an open-source interactive and scripting \
                        environment for Cocoa.  Based on Smalltalk, F-Script \
                        provides a pure object-oriented environment that \
                        leverages Mac OS X technologies and frameworks.  It \
                        aims to be a useful and fun tool for both beginners \
                        and experts, allowing interactively exploring, testing \
                        and using Cocoa-based objects and frameworks.

homepage                http://www.fscript.org/

fetch.type              git
git.url                 git://github.com/pmougin/F-Script
git.branch              9f46645527bd47cdaae9f1211e282571b4667603

xcode.target            FScriptFramework F-Script FScriptIBPlugin
xcode.destroot.settings SKIP_INSTALL=NO

destroot.violate_mtree  yes

variant without_ibplugin description "Disable Interface Builder Plug-in" {
        xcode.target-delete FScriptIBPlugin
        destroot.violate_mtree no
}

set ibplugin_dir "${developer_dir}/Platforms/MacOSX.platform/Developer/Library/Interface Builder/Plug-ins"

post-destroot {
        delete ${destroot}${applications_dir}/FSTest1.app
        delete ${destroot}${applications_dir}/FSTest2.app
        file rename ${destroot}${applications_dir}/FScript.framework ${destroot}${frameworks_dir}/
        if { ![variant_isset without_ibplugin] } {
                xinstall -d -m 755 ${destroot}${ibplugin_dir}
                file rename ${destroot}${applications_dir}/FScriptIBPlugin.ibplugin ${destroot}${ibplugin_dir}
        }
}
