# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem                  1.0
PortGroup                   gitlab 1.0
PortGroup                   qmake5 1.0

name                        oscar
gitlab.setup                CrimsonNape OSCAR-code 1.7.1 v

categories                  aqua
license                     GPL-3
maintainers                 {mcalhoun @MarcusCalhoun-Lopez} {mark @markemer} openmaintainer

description                 a cross platform, opensource sleep tracking program for reviewing CPAP and Oximetry data
long_description            OSCAR is ${description}, \
                            which are devices used in the treatment of Sleep Disorders like Obstructive Sleep Apnea.

homepage                    https://www.sleepfiles.com/OSCAR/

checksums                   rmd160  a6e8524d775a0a4fa49600ddf3329d76216ebd71 \
                            sha256  d92d4a753c5df29e3f9aea3ce19929256c71aad3fea83660fd646eca3f17d561 \
                            size    6953803

qt5.min_version             5.13

patchfiles-append           patch-oscar.pro.diff

configure.args-append       ${worksrcpath}/oscar/oscar.pro

qt5.depends_build_component qttools

depends_lib-append          port:zlib
qt5.depends_component       qtserialport

destroot {
    copy ${worksrcpath}/OSCAR.app ${destroot}${applications_dir}
}

livecheck.type              regex
livecheck.url               https://gitlab.com/CrimsonNape/OSCAR-code/-/tags
livecheck.regex             { v(\d+(?:\.\d+)*)[^-]}
