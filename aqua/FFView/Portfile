# $Id$

PortSystem		1.0
PortGroup		xcode 1.0

name			FFView
version			0.9.8
categories		aqua graphics
platforms		darwin
maintainers		nomaintainer@macports.org
description		fast OpenGL-powered picture viewer
long_description	FFView is a fast OpenGL-powered picture viewer a la \
				ACDsee. It is aimed at letting you read manga or other \
				comics onscreen (windowed & fullscreen mode). Features \
				include fast prefetching, smooth panning, voice commands, \
				the ability to browse pictures inside archives \
				(.rar/.cbr, .zip/.cbz) and sticky per-picture options.

homepage		http://www.feedface.com/projects/ffview.html
master_sites	http://www.feedface.com/projects/files/ffview/
distname		${name}-src-${version}
use_bzip2		yes
distfiles-append \
				[suffix FFArchive-src-0.8.1] \
				[suffix FFEXIF-src-0.5.2]

checksums		[suffix ${distname}] \
					md5 19b0aa32ef1f036864404a3726532969 \
					sha1 ce38bf5e9313c3c48f6366718069d4252957d204 \
					rmd160 d5ebb3b5c9457ad3abade6ead945b2feb2c5fe54 \
				[suffix FFArchive-src-0.8.1] \
					md5 60cc021380de3d05480345aa29783b10 \
					sha1 4b6aa52e2c444c3b4b31604f3cac28a8b44c25fe \
					rmd160 7484b80845665a8f4a1aaeac94ec9622f4f14aa0 \
				[suffix FFEXIF-src-0.5.2] \
					md5 a987bdbd053947f57b8e5c4281a408b7 \
					sha1 dc457cac7b3996e75bdc17cd8540f499fe7c8222 \
					rmd160 d49a3e9def1e03bcb3727be5da772bc0b5e6c580

worksrcdir		${name}

xcode.target	${name}

# Dummy configure to enable universal variant
use_configure	yes
configure		{}

if {! [variant_isset universal]} {
	set arch ${os.arch}
	if {! [string compare ${arch} powerpc]} {
		set arch ppc
	}

	xcode.build.settings-append		ARCHS=${arch}
	xcode.destroot.settings-append	ARCHS=${arch}
}

pre-build {
	foreach {framework} {FFArchive FFEXIF} {
		cd ${workpath}/${framework}
		system "${build.cmd} -configuration ${xcode.configuration} ${xcode.build.settings}"
	}
}

