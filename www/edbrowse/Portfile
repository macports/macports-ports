# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                edbrowse
version             3.4.3
categories          www
maintainers         snc email.uc.edu:obrienj
description         A combination editor, browser, and mail client that is \
                    100% text based.
long_description    Edbrowse is a combination editor, browser, and mail client \
                    that is 100% text based.  The interface is similar to \
                    /bin/ed, though there are many more features, such as \
                    editing multiple files simultaneously, and rendering html.\
                    This program was originally written for blind users, but \
                    many sighted users have taken advantage of the unique \
                    scripting capabilities of this program, which can be found \
                    nowhere else.  A batch job, or cron job, can access web \
                    pages on the internet, submit forms, and send email, with \
                    no human intervention whatsoever.  edbrowse can also tap \
                    into databases through odbc.

homepage            http://eklhad.net/edbrowse/

platforms           darwin freebsd
depends_lib         port:pcre \
                    port:spidermonkey \
                    port:curl \
                    port:openssl

master_sites        ${homepage}
use_zip             yes

checksums           md5 67ef18f1d64538cfaafdf99d2cdd676d \
                    sha1 fe9e27f9708731899803539f6e7272335faed791 \
                    rmd160 01a0be54e33b17bc2a018cfac53c2037a39ab67f

set worksrcpath     ${worksrcpath}/src

patch {
    reinplace       "s| -I/usr/include||" ${worksrcpath}/makefile.osx
    reinplace       "s| -L/usr/lib||" ${worksrcpath}/makefile.osx
    reinplace       "s|/usr/local/bin|${destroot}${prefix}/bin|" ${worksrcpath}/makefile.osx
}

use_configure       no

build.cmd           "cd src && make -f makefile.osx"
build.target        all

livecheck.regex     {(3.[0-9].[0-9])}
livecheck.check     regex
