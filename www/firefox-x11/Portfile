# $Id$

PortSystem	1.0

name		firefox-x11
categories	www x11
version		2.0.0.7
revision	1
platforms	darwin
maintainers	rhwood openmaintainer
description	Mozilla.org's popular stand-alone browser
long_description	\
		Firefox empowers you to browse faster, more safely and more \
		efficiently than with any other browser. Join more than 44 \
		million others and make the switch today. Firefox imports \
		your Favorites, settings and other information, so you have \
		nothing to lose.

homepage	http://www.mozilla.com/firefox/
master_sites	http://ftp.mozilla.org/pub/mozilla.org/firefox/releases/${version}/source/
distname	firefox-${version}-source
checksums	rmd160 8fd4e43cda35b2401d6ed800305d4fc52216ea1c
use_bzip2	yes
worksrcdir	mozilla

depends_lib	port:libidl \
		port:glib2 \
		port:zip \
		port:gtk2 \
		port:gnome-vfs \
		port:gnome-icon-theme \
		port:cairo
depends_build	port:pkgconfig

patchfiles	patch-browser-app-profile-firefox.js \
                patch-xpcom-build-Makefile \
		patch-dylib_file.diff \
		patch-layout-build-Makefile.in \
		patch-build-unix-mozilla-xpcom.pc \
		patch-browser-app-mozilla.in \
		patch-xptcall_x86.diff

configure.args	--enable-application=browser \
		--disable-official-branding \
		--with-distribution-id=org.macports \
		--disable-static \
		--enable-shared \
		--enable-default-toolkit=gtk2 \
		--enable-xft \
		--disable-freetype2 \
		--enable-xinerama \
		--with-pthreads \
		--enable-gnomevfs \
		--enable-postscript \
		--disable-prebinding \
		--disable-debug \
		--enable-strip \
		--enable-optimize='-O2' \
		--disable-tests \
		--with-default-mozilla-five-home=${prefix}/lib/firefox \
		--with-system-jpeg=${prefix} \
		--with-system-zlib=${prefix} \
		--with-system-png=${prefix} \
		--enable-system-cairo \
		--with-system-cairo=${prefix}
		
variant debug {
        configure.args-delete --disable-debug --enable-optimize='-O2' --enable-strip
        configure.args-append --enable-debug --disable-optimize --disable-strip
}

post-destroot	{
	file mkdir	${destroot}${prefix}/share/applications
	file copy	${filespath}/share-applications-firefox.desktop \
				${destroot}${prefix}/share/applications/firefox.desktop
}
