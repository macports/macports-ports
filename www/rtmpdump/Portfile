# -*- coding: utf-8; mode: tcl; tab-width: 4; truncate-lines: t; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem 1.0

name                rtmpdump
version             2.2
revision            1
categories          www net
platforms           darwin
depends_lib         port:openssl

maintainers         gmail.com:captsolo openmaintainer
description         a tool for downloading RTMP streaming media
long_description    A small dumper for media content streamed over \
                    the RTMP protocol. Supplying an rtmp url will result \
                    in a dumped flv file, which can be played or transcoded \
                    using ffmpeg/mplayer, etc.

homepage            http://rtmpdump.mplayerhq.hu/
master_sites        ${homepage}download/

checksums           md5     1ce6753c95754d1a72b635d488757096 \
                    sha1    80ad4878b5b48c59cb6754fac31f811b8a7d399d \
                    rmd160  673e9baf426d8fe0d32471d101648660080e996d

use_bzip2           yes

post-patch {
    reinplace "s|CC=.*\$|CC=${configure.cc}|" ${worksrcpath}/Makefile
    reinplace "s|CXX=.*\$|CXX=${configure.cxx}|" ${worksrcpath}/Makefile
}
use_configure       no

build.target        osx
build.pre_args-delete -w

destroot {
    xinstall -m 755 -W ${worksrcpath} rtmpdump rtmpsuck rtmpsrv rtmpgw ${destroot}${prefix}/bin
}

livecheck.url       [lindex ${master_sites} 0]
livecheck.type      regex
livecheck.regex     ${name}-(\[0-9a-z.\]+)\\.
