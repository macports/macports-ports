# $Id: Portfile,v 1.11 2006/03/14 05:48:06 joe Exp $
PortSystem 1.0

name			mediawiki
version			1.5.7
categories		www php
maintainers		joe@opendarwin.org
description		The wiki engine used by Wikipedia
long_description	MediaWiki is the collaborative editing software that runs Wikipedia, \
				the free encyclopedia, and other projects. It's designed to \
				handle a large number of users and pages without imposing too \
				rigid a structure or workflow.

homepage		http://www.mediawiki.org
master_sites		sourceforge:wikipedia
distname		mediawiki-${version}
checksums		md5 0a2347e2422006d8f75479b06c1963d8
platforms		darwin freebsd

depends_run		port:libiconv \
			port:jpeg \
			port:jasper \
			port:tiff \
			port:lcms \
			port:libpng \
			port:freetype \
			port:libxml2 \
			port:jbigkit \
			port:expat \
			port:fontconfig \
			port:gnughostscript \
			port:ImageMagick \
			port:pkgconfig \
			port:aspell

depends_lib	port:apache2 port:php5 port:mysql5 
			
variant apache {
	depends_lib-append	port:apache
	depends_lib-delete	port:apache2
}

variant php4 {
	depends_lib-append      port:php4
	depends_lib-delete	port:php5
}

variant mysql3 conflicts mysql4 {
	depends_lib-append	port:mysql3
	depends_lib-delete	port:mysql5
}

variant mysql4 conflicts mysql3 {
	depends_lib-append	port:mysql4
	depends_lib-delete	port:mysql5
}

use_configure   no
build			{}

set docpath ${destroot}${prefix}/www/data

destroot {
	xinstall -d -m 0755 ${docpath}/mediawiki
	eval file copy [glob ${worksrcpath}/*] ${docpath}/mediawiki
}
