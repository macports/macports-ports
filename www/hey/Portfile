# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           golang 1.0

go.setup            github.com/rakyll/hey 0.1.5 v
github.tarball_from archive
revision            0

categories          www net
license             Apache-2
platforms           darwin

description         hey is a tiny program that sends some load to a web \
                    application.

long_description    {*}${description} HTTP load generator, ApacheBench (ab) \
                    replacement, formerly known as rakyll/boom. Supports \
                    HTTP\/2.

maintainers         {gmail.com:herby.gillot @herbygillot} \
                    openmaintainer

build.cmd           make
build.target        release

post-extract {
    # Only build macOS: delete commands to build Windows & Linux.
    reinplace "/windows/ d" ${worksrcpath}/Makefile
    reinplace "/linux/ d" ${worksrcpath}/Makefile
}

destroot {
    xinstall -m 0755 ${worksrcpath}/bin/${name}_darwin_amd64 \
        ${destroot}${prefix}/bin/${name}
}

checksums           ${distname}${extract.suffix} \
                        rmd160  2e019eef39e5561133bfe0a316b0fdbb4e29e10b \
                        sha256  f678bc0f07c62a6513726298873940b70099aa85244efa813f6a0d925092ffe9 \
                        size    15804

go.vendors          golang.org/x/text \
                        lock    v0.33.0 \
                        rmd160  bc224244349bfd7ff4d9d4764e71590a63fe6357 \
                        sha256  400f98455ceb3925f77850a044a0f4fa5cb7d47c2c89660d59f93527eacdab52 \
                        size    8971284 \
                    golang.org/x/net \
                        lock    v0.48.0 \
                        rmd160  7386bb6aa24247f6801ce1973787a68971351497 \
                        sha256  7c87f4fb33ac853ad663b5feb369b95803cb2d047c466cde9fa8939380991ee4 \
                        size    1528817
