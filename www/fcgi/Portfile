# $Id: Portfile,v 1.2 2004/04/27 01:06:54 matt Exp $
# vim: ts=8 sw=8
PortSystem 1.0

name			fcgi
version			2.4.0
categories		www
maintainers		shu@rufuran.org
description		The FastCGI development kit in C
long_description	FastCGI is a language independent, scalable, open \
			extension  to CGI that provides high performance \
			without the limitations of server specific APIs. \
			This is the C development kit.

homepage		http://www.fastcgi.com/
master_sites		${homepage}/dist/
checksums		md5 d15060a813b91383a9f3c66faf84867e
platforms		darwin

patchfiles		patch-ltmain.sh \
			patch-libfcgi-Makefile.in

configure.env		CFLAGS=-Wno-long-double

post-destroot {
	xinstall -d -m 755 ${destroot}${prefix}/share/man/man1
	xinstall -m 644 ${worksrcpath}/doc/cgi-fcgi.1 ${destroot}${prefix}/share/man/man1
	xinstall -d -m 755 ${destroot}${prefix}/share/man/man3
	xinstall -m 644 ${worksrcpath}/doc/FCGI_Accept.3 ${destroot}${prefix}/share/man/man3
	xinstall -m 644 ${worksrcpath}/doc/FCGI_Finish.3 ${destroot}${prefix}/share/man/man3
	xinstall -m 644 ${worksrcpath}/doc/FCGI_SetExitStatus.3 ${destroot}${prefix}/share/man/man3
	xinstall -m 644 ${worksrcpath}/doc/FCGI_StartFilterData.3 ${destroot}${prefix}/share/man/man3
	xinstall -d -m 0755 ${destroot}${prefix}/share/doc
	system "cp -R ${worksrcpath}/doc ${destroot}${prefix}/share/doc/${name}"
	system "rm -f ${destroot}${prefix}/share/doc/${name}/*.\[13\]"
}
