# $Id: Portfile,v 1.12 2005/08/14 07:45:13 pguyot Exp $
PortSystem		1.0
PortGroup		ruby 1.0

ruby.setup		{cocoa rubycocoa} 0.4.1 install.rb \
				{ReadMe.ascii.html doc sample}
maintainers		yuhei@pop21.odn.ne.jp
description		Ruby bindings for writing cocoa programs
long_description	RubyCocoa is a Ruby library for using Cocoa Objects \
					on Mac OS X in Ruby scripts. You can use RubyCocoa \
					to work with Cocoa objects in Ruby scripts, write \
					Cocoa applications with Ruby and Interface Builder, \
					develop small scale simple Cocoa applications and \
					such.
categories-append	devel
homepage		http://www.fobj.com/${ruby.project}/
master_sites	sourceforge:${ruby.project}
extract.suffix	.tgz
checksums		md5 05aa5c4835153ead032b877b84fe8bba
platforms		darwin

post-patch {
	if {[catch {set xcodebuild [binaryInPath xcodebuild]}] == 0} {
		reinplace "s%pbxbuild%${xcodebuild}%" ${worksrcpath}/install.rb
	}
	if {[catch {set cpp [binaryInPath cpp-3.3]}] == 0} {
		reinplace "s%/usr/bin/cpp3%${cpp}%" ${worksrcpath}/tool/och_analyzer3.rb
	} elseif {[catch {set cpp [binaryInPath cpp3]}] == 0} {
		reinplace "s%/usr/bin/cpp3%${cpp}%" ${worksrcpath}/tool/och_analyzer3.rb
	} elseif {[catch {set cpp [binaryInPath cpp]}] == 0} {
		reinplace "s%/usr/bin/cpp3%${cpp}%" ${worksrcpath}/tool/och_analyzer3.rb
	}
}

if {${xcodeversion} == "2.1"} {
	# Fix the project for Xcode 2.1.
	patchfiles-append	patch-ext-rubycocoa-extconf.rb.in \
						patch-framework-pre-install.rb
}

configure.args		--install-prefix=${destroot}${prefix} \
					--install-root=${destroot}

