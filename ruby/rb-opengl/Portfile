# $Id: Portfile,v 1.2 2004/03/01 03:07:49 rshaw Exp $
PortSystem 1.0

name			rb-opengl
version			0.32c
categories		ruby graphics
maintainers		darwin@otierney.net
description		OpenGL bindings for ruby
long_description	${description}
homepage		http://www2.giganet.net/~yoshi/
platforms		darwin 
master_sites	http://www2.giganet.net/~yoshi/
distname		rbogl-${version}
dist_subdir		ruby
checksums		md5 37e8a112dcc1b2e8446abfdab3b6ac07
worksrcdir		opengl-${version}

set ruby ${prefix}/bin/ruby
depends_lib		lib:libruby.1.8:ruby
depends_build	path:${ruby}:ruby

patchfiles		patch-extconf.rb \
				patch-glu.c \
				patch-glut.c \
				patch-ogl.c \
				patch-rbogl.c

configure.cmd	${ruby} extconf.rb
configure.pre_args
post-configure	{ cd ${worksrcpath}
				  reinplace "s|^CFLAGS.*\$|& \
					  -I/System/Library/Frameworks/OpenGL.framework/Headers \
					  -I/System/Library/Frameworks/GLUT.framework/Headers|" \
					  Makefile.glut Makefile.ogl
				  reinplace "s|^DLDFLAGS.*\$|& \
					  -L\$(prefix)/lib \
					  -L/System/Library/Frameworks/OpenGL.framework/Libraries|" \
					  Makefile.glut Makefile.ogl
				  reinplace "s|^LIBS.*\$|& \
					  -lGLU -framework GLUT -lGL -framework OpenGL|" \
					  Makefile.glut Makefile.ogl }

build.args		RUBY=${ruby}

destroot.args	RUBY=${ruby}
post-destroot	{ xinstall -d -m 0755 ${destroot}${prefix}/share/doc/${name}
				  foreach file [glob sample/*.rb] {
					  xinstall -m 0644 $file ${destroot}${prefix}/share/doc/${name}/
				  } }

