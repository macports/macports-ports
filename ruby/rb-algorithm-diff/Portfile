# $Id: Portfile,v 1.1 2004/01/19 03:38:26 rshaw Exp $
PortSystem 1.0

name			rb-algorithm-diff
version			0.4
categories		ruby
maintainers		rshaw@opendarwin.org
description		diff algorithm for arrays in Ruby
long_description	The diff algorithm computes the differences between \
					two arrays of elements, like the unix program \
					\"diff\". It can diff Arrays by each element or \
					Strings by each character, or your own class if you \
					implement the interface. The algorithm is complete, \
					stable (TestUnit test available), but the interface \
					may change before a 1.0 release.
homepage		http://rubynet.org/mirrors/diff/
platforms		darwin
master_sites	http://rubynet.org/mirrors/diff/
dist_subdir		ruby
distname		diff-0.4
checksums		md5 3e832de40dc1866dddc64978fe67e4c8

set ruby ${prefix}/bin/ruby
depends_build	bin:${ruby}:ruby

post-extract	{
	reinplace "s|\\(siteruby.*=\\).*|\\1 stdruby|" ${worksrcpath}/install.rb
	reinplace "s|\\(versite.*=\\).*|\\1 stdruby|" ${worksrcpath}/install.rb
	reinplace "s|\\(sodir.*=\\).*|\\1 \"stdruby/\#{c\['arch'\]}\"|" ${worksrcpath}/install.rb
}

configure.cmd		${ruby} install.rb
configure.pre_args	config
configure.args		--prefix=${destroot}${prefix}

build.cmd			${ruby} install.rb
build.target		setup

test.run			yes
test.dir			${worksrcpath}/test
test.cmd			${ruby} -I../lib test_diff.rb
test.target

destroot.cmd		${ruby} install.rb
destroot.destdir

