# $Id: Portfile,v 1.13 2004/09/30 04:16:30 rshaw Exp $
PortSystem		1.0
PortGroup		ruby 1.0

ruby.setup		{sqlite sqlite-ruby} 2.1.0 basic_install.rb \
				{TODO ChangeLog api doc} \
				rubyforge:1590
maintainers		rshaw@opendarwin.org
description		Interface to the SQLite DB engine from Ruby
long_description	Provides an interface for the SQLite DB engine. This \
					differs from the 'ruby-sqlite' project (also on RAA) \
					in that it is more complete, and from the ruby DBI \
					version of SQLite in that it is SQLite specific, so \
					you can do things that would otherwise be more \
					difficult via DBI. If you want portability between \
					backends, use DBI. If you want ease of use with \
					SQLite, use this.
categories-append	databases
use_bzip2		yes
checksums		md5 06065c55d5d3f5f2e9c9e6082784236b
platforms		darwin

depends_lib-append		lib:libsqlite:sqlite

post-patch {
	reinplace "s|ruby extconf.rb|${ruby.bin} -rvendor-specific extconf.rb|" \
		${worksrcpath}/install.rb
	reinplace "s|make install|& DESTDIR=${destroot}|" \
		${worksrcpath}/install.rb
	reinplace "s|make|& RUBY=${ruby.bin}|" \
		${worksrcpath}/install.rb
}

test.run		yes
test.dir		${worksrcpath}/test
test.cmd		${ruby.bin}
test.target		tests.rb

