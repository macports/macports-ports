# $Id: Portfile,v 1.1 2004/07/12 21:27:47 rshaw Exp $
PortSystem		1.0
PortGroup		ruby 1.0

ruby.setup		pdumpfs 1.1 gnu {README doc}
maintainers		rshaw@opendarwin.org
description		simply daily backup system similar to Plan9's dumpfs
long_description	pdumpfs is a simple daily backup system similar to \
					Plan9's dumpfs which preserves every daily snapshot. \
					pdumpfs is written in Ruby. You can access the past \
					snapshots at any time for retrieving a certain day's \
					file. Let's backup your home directory with pdumpfs!
categories-append	sysutils
homepage		http://namazu.org/~satoru/pdumpfs
master_sites	${homepage}
checksums		md5 df2a9cb5076a30c815a6db89d883eb06
platforms		darwin

patchfiles		patch-pdumpfs-test

use_configure	no

build.target	${ruby.module}
post-build {
	reinplace "s|^#!.*ruby|#!${ruby.bin}|" ${worksrcpath}/pdumpfs
}

test.run		yes
test.target		check

destroot {
	cd ${worksrcpath}
	xinstall -d -m 0755 ${destroot}${prefix}/bin
	xinstall -m 0755 pdumpfs ${destroot}${prefix}/bin
	xinstall -d -m 0755 ${destroot}${prefix}/share/man/man8
	xinstall -m 0644 man/man8/pdumpfs.8 ${destroot}${prefix}/share/man/man8
	xinstall -d -m 0755 ${destroot}${prefix}/share/man/ja/man8
	xinstall -m 0644 man/ja/man8/pdumpfs.8 ${destroot}${prefix}/share/man/ja/man8
}

