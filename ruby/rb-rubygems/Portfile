# $Id$
PortSystem		1.0
PortGroup		ruby 1.0

ruby.setup		rubygems 0.9.4 setup.rb {README doc examples gemspecs} \
			rubyforge:20989
maintainers		nomaintainer
description		a package management framework for Ruby
long_description	RubyGems is the Ruby standard for publishing and \
					managing third party libraries.
categories-append	devel
checksums		md5 b5680acaa019c80ea44fe87cc2e227da \
				sha1 904080d36e34d7a6969c3cef228380eb82688d2a \
				rmd160 6ee02db45173f05e6f8c5b1ecd5af832fb8601f8
extract.suffix		.tgz
platforms		darwin

set gems_libdir	${destroot}${prefix}/lib/ruby/gems/${ruby.version}
post-patch {
	reinplace "s%Gem.dir%'${gems_libdir}'%" ${worksrcpath}/post-install.rb
}
destroot.keepdirs \
	${gems_libdir}/cache \
	${gems_libdir}/doc \
	${gems_libdir}/gems \
	${gems_libdir}/specifications
pre-destroot {
	xinstall -d -m 0755 ${gems_libdir}
}
post-destroot {
	foreach script {gem gem_mirror gem_server gemlock gemri gemwhich index_gem_repository.rb update_rubygems} {
		reinplace "s%^#!.*ruby%#!${ruby.bin}%" ${destroot}${prefix}/bin/$script
	}
}

depends_build	port:autoconf
